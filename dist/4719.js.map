{"version":3,"file":"4719.js","mappings":"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","sources":["file:////home/j/code/web3os/@web3os-core/kernel/node_modules/.pnpm/arg@5.0.2/node_modules/arg/index.js","file:////home/j/code/web3os/@web3os-core/kernel/src/modules/desktop/index.js","file:////home/j/code/web3os/@web3os-core/kernel/node_modules/.pnpm/ctxmenu@1.4.3/node_modules/ctxmenu/index.js","file:////home/j/code/web3os/@web3os-core/kernel/src/assets/default-app-icon.svg","file:////home/j/code/web3os/@web3os-core/kernel/src/modules/desktop/default_wallpaper.png"],"sourcesContent":["const flagSymbol = Symbol('arg flag');\n\nclass ArgError extends Error {\n\tconstructor(msg, code) {\n\t\tsuper(msg);\n\t\tthis.name = 'ArgError';\n\t\tthis.code = code;\n\n\t\tObject.setPrototypeOf(this, ArgError.prototype);\n\t}\n}\n\nfunction arg(\n\topts,\n\t{\n\t\targv = process.argv.slice(2),\n\t\tpermissive = false,\n\t\tstopAtPositional = false\n\t} = {}\n) {\n\tif (!opts) {\n\t\tthrow new ArgError(\n\t\t\t'argument specification object is required',\n\t\t\t'ARG_CONFIG_NO_SPEC'\n\t\t);\n\t}\n\n\tconst result = { _: [] };\n\n\tconst aliases = {};\n\tconst handlers = {};\n\n\tfor (const key of Object.keys(opts)) {\n\t\tif (!key) {\n\t\t\tthrow new ArgError(\n\t\t\t\t'argument key cannot be an empty string',\n\t\t\t\t'ARG_CONFIG_EMPTY_KEY'\n\t\t\t);\n\t\t}\n\n\t\tif (key[0] !== '-') {\n\t\t\tthrow new ArgError(\n\t\t\t\t`argument key must start with '-' but found: '${key}'`,\n\t\t\t\t'ARG_CONFIG_NONOPT_KEY'\n\t\t\t);\n\t\t}\n\n\t\tif (key.length === 1) {\n\t\t\tthrow new ArgError(\n\t\t\t\t`argument key must have a name; singular '-' keys are not allowed: ${key}`,\n\t\t\t\t'ARG_CONFIG_NONAME_KEY'\n\t\t\t);\n\t\t}\n\n\t\tif (typeof opts[key] === 'string') {\n\t\t\taliases[key] = opts[key];\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet type = opts[key];\n\t\tlet isFlag = false;\n\n\t\tif (\n\t\t\tArray.isArray(type) &&\n\t\t\ttype.length === 1 &&\n\t\t\ttypeof type[0] === 'function'\n\t\t) {\n\t\t\tconst [fn] = type;\n\t\t\ttype = (value, name, prev = []) => {\n\t\t\t\tprev.push(fn(value, name, prev[prev.length - 1]));\n\t\t\t\treturn prev;\n\t\t\t};\n\t\t\tisFlag = fn === Boolean || fn[flagSymbol] === true;\n\t\t} else if (typeof type === 'function') {\n\t\t\tisFlag = type === Boolean || type[flagSymbol] === true;\n\t\t} else {\n\t\t\tthrow new ArgError(\n\t\t\t\t`type missing or not a function or valid array type: ${key}`,\n\t\t\t\t'ARG_CONFIG_VAD_TYPE'\n\t\t\t);\n\t\t}\n\n\t\tif (key[1] !== '-' && key.length > 2) {\n\t\t\tthrow new ArgError(\n\t\t\t\t`short argument keys (with a single hyphen) must have only one character: ${key}`,\n\t\t\t\t'ARG_CONFIG_SHORTOPT_TOOLONG'\n\t\t\t);\n\t\t}\n\n\t\thandlers[key] = [type, isFlag];\n\t}\n\n\tfor (let i = 0, len = argv.length; i < len; i++) {\n\t\tconst wholeArg = argv[i];\n\n\t\tif (stopAtPositional && result._.length > 0) {\n\t\t\tresult._ = result._.concat(argv.slice(i));\n\t\t\tbreak;\n\t\t}\n\n\t\tif (wholeArg === '--') {\n\t\t\tresult._ = result._.concat(argv.slice(i + 1));\n\t\t\tbreak;\n\t\t}\n\n\t\tif (wholeArg.length > 1 && wholeArg[0] === '-') {\n\t\t\t/* eslint-disable operator-linebreak */\n\t\t\tconst separatedArguments =\n\t\t\t\twholeArg[1] === '-' || wholeArg.length === 2\n\t\t\t\t\t? [wholeArg]\n\t\t\t\t\t: wholeArg\n\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t.split('')\n\t\t\t\t\t\t\t.map((a) => `-${a}`);\n\t\t\t/* eslint-enable operator-linebreak */\n\n\t\t\tfor (let j = 0; j < separatedArguments.length; j++) {\n\t\t\t\tconst arg = separatedArguments[j];\n\t\t\t\tconst [originalArgName, argStr] =\n\t\t\t\t\targ[1] === '-' ? arg.split(/=(.*)/, 2) : [arg, undefined];\n\n\t\t\t\tlet argName = originalArgName;\n\t\t\t\twhile (argName in aliases) {\n\t\t\t\t\targName = aliases[argName];\n\t\t\t\t}\n\n\t\t\t\tif (!(argName in handlers)) {\n\t\t\t\t\tif (permissive) {\n\t\t\t\t\t\tresult._.push(arg);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new ArgError(\n\t\t\t\t\t\t\t`unknown or unexpected option: ${originalArgName}`,\n\t\t\t\t\t\t\t'ARG_UNKNOWN_OPTION'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst [type, isFlag] = handlers[argName];\n\n\t\t\t\tif (!isFlag && j + 1 < separatedArguments.length) {\n\t\t\t\t\tthrow new ArgError(\n\t\t\t\t\t\t`option requires argument (but was followed by another short argument): ${originalArgName}`,\n\t\t\t\t\t\t'ARG_MISSING_REQUIRED_SHORTARG'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (isFlag) {\n\t\t\t\t\tresult[argName] = type(true, argName, result[argName]);\n\t\t\t\t} else if (argStr === undefined) {\n\t\t\t\t\tif (\n\t\t\t\t\t\targv.length < i + 2 ||\n\t\t\t\t\t\t(argv[i + 1].length > 1 &&\n\t\t\t\t\t\t\targv[i + 1][0] === '-' &&\n\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\targv[i + 1].match(/^-?\\d*(\\.(?=\\d))?\\d*$/) &&\n\t\t\t\t\t\t\t\t(type === Number ||\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t\t\t\t(typeof BigInt !== 'undefined' && type === BigInt))\n\t\t\t\t\t\t\t))\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst extended =\n\t\t\t\t\t\t\toriginalArgName === argName ? '' : ` (alias for ${argName})`;\n\t\t\t\t\t\tthrow new ArgError(\n\t\t\t\t\t\t\t`option requires argument: ${originalArgName}${extended}`,\n\t\t\t\t\t\t\t'ARG_MISSING_REQUIRED_LONGARG'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[argName] = type(argv[i + 1], argName, result[argName]);\n\t\t\t\t\t++i;\n\t\t\t\t} else {\n\t\t\t\t\tresult[argName] = type(argStr, argName, result[argName]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult._.push(wholeArg);\n\t\t}\n\t}\n\n\treturn result;\n}\n\narg.flag = (fn) => {\n\tfn[flagSymbol] = true;\n\treturn fn;\n};\n\n// Utility types\narg.COUNT = arg.flag((v, name, existingCount) => (existingCount || 0) + 1);\n\n// Expose error class\narg.ArgError = ArgError;\n\nmodule.exports = arg;\n","import arg from 'arg'\r\nimport path from 'path'\r\nimport colors from 'ansi-colors'\r\nimport { ctxmenu } from 'ctxmenu'\r\nimport { lookup } from 'mime-types'\r\n\r\nimport './index.css'\r\nimport README from '../../../README.md'\r\nimport defaultWallpaperURL from './default_wallpaper.png'\r\nimport { default as defaultAppIcon } from '../../assets/default-app-icon.svg'\r\n\r\nexport const name = 'desktop'\r\nexport const version = '1.0.0'\r\nexport const description = 'Web3OS Desktop'\r\nexport const help = `\r\n  Usage:\r\n    desktop <options>             Start the Desktop Environment\r\n    desktop launcher              Start the Desktop Launcher only\r\n\r\n  Options:\r\n    --wallpaper, -w               Specify the URL to the wallpaper to use at startup\r\n    --launcher-wallpaper, l       Specify the URL to the wallpaper for the launcher\r\n`\r\n\r\nconst spec = {\r\n  '--version': Boolean,\r\n  '-v': '--version',\r\n  '--wallpaper': String,\r\n  '-w': '--wallpaper',\r\n  '--launcher-wallpaper': String,\r\n  '-l': '--launcher-wallpaper'\r\n}\r\n\r\nlet kernel = globalThis.Kernel\r\nlet terminal = globalThis.Terminal\r\nlet desktop\r\nlet launcher\r\nconst defaultLauncherWallpaper = 'https://images.unsplash.com/photo-1639262498805-17c7dc422d37'\r\n\r\nexport function saveDesktopIconPositions () {\r\n  const positions = {}\r\n\r\n  document.querySelectorAll('.web3os-desktop-entry').forEach(entry => {\r\n    const { x, y } = entry.getBoundingClientRect()\r\n    const { location } = JSON.parse(entry.dataset.file)\r\n    positions[location] = { x, y }\r\n  })\r\n\r\n  globalThis.localStorage.setItem('web3os_desktop_icon_positions', JSON.stringify(positions))\r\n}\r\n\r\nexport function loadDesktopIconPositions () {\r\n  try {\r\n    const positions = JSON.parse(globalThis.localStorage.getItem('web3os_desktop_icon_positions'))\r\n\r\n    document.querySelectorAll('.web3os-desktop-entry').forEach(entry => {\r\n      try {\r\n        const { location } = JSON.parse(entry.dataset.file)\r\n        const { x, y } = positions[location]\r\n        entry.style.position = 'absolute'\r\n        entry.style.top = y + 'px'\r\n        entry.style.left = x + 'px'\r\n      } catch {\r\n        console.log('Position not set:', entry.dataset.file)\r\n      }\r\n    })\r\n  } catch (err) {\r\n    console.warn('No desktop positions set')\r\n  }\r\n}\r\n\r\nexport async function launchTerminal (options = {}) {\r\n  let win = null\r\n\r\n  const customCommands = options.customCommands || []\r\n  customCommands.push({ name: 'exit', run: () => win.window.close() })\r\n\r\n  const termKernel = options.kernel ? options.kernel : (kernel || globalThis.Kernel)\r\n\r\n  const newTerm = termKernel.Web3osTerminal.create({\r\n    fontFamily: options.fontFamily || \"'Fira Mono', monospace\",\r\n    fontSize: options.fontSize || 18,\r\n    fontWeight: options.fontWeight || 900,\r\n    theme: options.theme || { background: '#131820' },\r\n    customCommands\r\n  })\r\n\r\n  const container = document.createElement('div')\r\n  container.style.width = '100%'\r\n  container.style.height = '100%'\r\n  newTerm.open(container)\r\n  newTerm.cwd = options.path || '/'\r\n\r\n  let fitInterval\r\n  win = termKernel.windows.create({\r\n    title: options.windowTitle || options.command || 'web3os.sh',\r\n    mount: container,\r\n    width: options.windowWidth || '75%',\r\n    height: options.windowHeight || '70%',\r\n    x: 'center',\r\n    y: 'center',\r\n    onclose: () => {\r\n      clearInterval(fitInterval)\r\n    }\r\n  })\r\n\r\n  win.term = newTerm\r\n  if (options.startup) termKernel.execute(options.startup, { terminal: newTerm })\r\n  newTerm.prompt()\r\n  newTerm.focus()\r\n\r\n  if (options.command) kernel.execute(options.command, { terminal: newTerm })\r\n\r\n  // TODO: There's gotta be a better way, but for now we'll just setInterval\r\n  // Running .fit in win.onresize doesn't work\r\n  fitInterval = setInterval(newTerm.fit, 200)\r\n  setTimeout(() => win.window.focus(), 10)\r\n\r\n  return win\r\n}\r\n\r\nasync function createFileLayer () {\r\n  const fileLayer = document.createElement('div')\r\n  fileLayer.id = 'web3os-desktop-file-layer'\r\n  fileLayer.addEventListener('dragover', e => {\r\n    e.preventDefault()\r\n    e.dataTransfer.dropEffect = 'move'\r\n  })\r\n\r\n  const files = kernel.fs.readdirSync('/desktop')\r\n\r\n  files.forEach(filename => {\r\n    const file = {\r\n      name: filename,\r\n      location: kernel.utils.path.resolve('/desktop', filename),\r\n      type: kernel.fs.statSync(path.resolve('/desktop', filename)).isDirectory() ? 'dir' : 'file'\r\n    }\r\n\r\n    const entry = document.createElement('div')\r\n    const icon = document.createElement('mwc-icon')\r\n    const title = document.createElement('h1')\r\n\r\n    let fileIcon\r\n    switch (file.type) {\r\n      case 'dir':\r\n        fileIcon = 'folder'\r\n        break\r\n      default:\r\n        fileIcon = 'text_snippet'\r\n    }\r\n\r\n    entry.id = `web3os-desktop-entry-${btoa(file.location)}`\r\n    entry.classList.add('web3os-desktop-entry')\r\n\r\n    icon.textContent = fileIcon\r\n    title.textContent = file.name\r\n    entry.dataset.file = JSON.stringify(file)\r\n    icon.dataset.file = entry.dataset.file\r\n    title.dataset.file = entry.dataset.file\r\n\r\n    entry.appendChild(icon)\r\n    entry.appendChild(title)\r\n    fileLayer.appendChild(entry)\r\n\r\n    entry.draggable = true\r\n\r\n    entry.addEventListener('dragstart', e => {\r\n      // console.log('dragstart', e)\r\n      e.dataTransfer.setData('text', e.target.id)\r\n      e.dataTransfer.effectAllowed = 'move'\r\n    })\r\n\r\n    entry.addEventListener('dragend', e => {\r\n      // console.log('dragend', e)\r\n      e.target.style.position = 'absolute'\r\n      e.target.style.left = (e.x - 48) + 'px'\r\n      e.target.style.top = (e.y - 48) + 'px'\r\n      saveDesktopIconPositions()\r\n    })\r\n\r\n    const entryContextMenu = [\r\n      {\r\n        text: 'Edit',\r\n        action: () => kernel.execute(`edit ${file.location}`)\r\n      },\r\n\r\n      {\r\n        text: 'Delete',\r\n        action: async () => {\r\n          kernel.execute(`rm ${file.location}`)\r\n          const fileLayer = await createFileLayer()\r\n          document.querySelector('#web3os-desktop-file-layer').replaceWith(fileLayer)\r\n          loadDesktopIconPositions()\r\n        }\r\n      }\r\n    ]\r\n\r\n    entry.addEventListener('contextmenu', e => {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      ctxmenu.show(entryContextMenu, e.target)\r\n    })\r\n\r\n    entry.addEventListener('click', e => {\r\n      const { file } = e.target.dataset\r\n      const data = JSON.parse(file)\r\n      const stat = kernel.fs.statSync(data.location)\r\n      const fileParts =kernel.utils.path.parse(data.name)\r\n      const extension = fileParts.ext\r\n      const mime = lookup(extension)\r\n\r\n      if (stat.isDirectory()) {\r\n        return kernel.execute(`files ${data.location}`)\r\n      }\r\n\r\n      switch (extension) {\r\n        case '.sh':\r\n          return kernel.executeScript(data.location)\r\n        case '.js':\r\n          return kernel.execute(`eval ${data.location}`)\r\n        case '.json':\r\n        case '.txt':\r\n          return kernel.execute(`edit ${data.location}`)\r\n        case '.md':\r\n          return kernel.execute(`markdown ${data.location}`)\r\n        case '.link':\r\n          try {\r\n            const { url, useWeb3osBrowser } = JSON.parse(kernel.fs.readFileSync(location, 'utf8'))\r\n            if (!useWeb3osBrowser) globalThis.open(url, '_blank')\r\n            else kernel.execute(`www ${url}`)\r\n          } catch (err) {\r\n            console.error(err)\r\n            kernel.dialog({ title: 'Error', text: err.message, icon: 'error' })\r\n          }\r\n          break\r\n        default:\r\n          if (mime && /^(image|video|audio|application\\/pdf)/.test(mime)) return kernel.execute(`view ${location}`)\r\n          kernel.execute(`alert I'm not sure how to handle this file!`)\r\n      }\r\n    })\r\n  })\r\n\r\n  return fileLayer\r\n}\r\n\r\nexport async function start (args) {\r\n  try {\r\n    terminal.log('Starting web3os.sh Desktop..')\r\n\r\n    desktop = document.createElement('div')\r\n    desktop.id = 'web3os-desktop'\r\n\r\n    const wallpaper = document.createElement('img')\r\n    wallpaper.id = 'web3os-desktop-wallpaper'\r\n    wallpaper.src = args['--wallpaper'] || defaultWallpaperURL\r\n    wallpaper.style.opacity = 0\r\n\r\n    if (wallpaper.complete) {\r\n      wallpaper.style.opacity = 1\r\n    } else {\r\n      wallpaper.addEventListener('load', () => { wallpaper.style.opacity = 1 })\r\n    }\r\n\r\n    const fileLayer = await createFileLayer()\r\n\r\n    desktop.appendChild(wallpaper)\r\n    desktop.appendChild(fileLayer)\r\n\r\n    const menuButton = document.createElement('mwc-icon')\r\n    menuButton.id = 'web3os-desktop-menu-button'\r\n    menuButton.ariaLabel = 'Open the Launcher'\r\n    menuButton.textContent = 'widgets'\r\n    // menuButton.classList.add('animate__animated', 'animate__bounce', 'animate__slow')\r\n    menuButton.classList.add('hint--left', 'hint--success')\r\n\r\n    const shellButton = document.createElement('mwc-icon')\r\n    shellButton.id = 'web3os-desktop-shell-button'\r\n    shellButton.ariaLabel = 'Open a terminal'\r\n    shellButton.textContent = 'terminal'\r\n    shellButton.classList.add('hint--left', 'hint--info')\r\n    shellButton.addEventListener('click', () => launchTerminal())\r\n\r\n    const exitButton = document.createElement('mwc-icon')\r\n    exitButton.id = 'web3os-desktop-exit-button'\r\n    exitButton.ariaLabel = 'Exit the desktop'\r\n    exitButton.textContent = 'logout'\r\n    exitButton.classList.add('hint--left', 'hint--info')\r\n    exitButton.addEventListener('click', exitDesktop)\r\n\r\n    const showButtons = () => {\r\n      [shellButton, exitButton].forEach(btn => { btn.style.opacity = 1 })\r\n    }\r\n\r\n    const hideButtons = () => {\r\n      [shellButton, exitButton].forEach(btn => { btn.style.opacity = 0 })\r\n    }\r\n    \r\n    menuButton.addEventListener('animationend', () => menuButton.classList.remove('animate__animated', 'animate__bounce', 'animate__slow'))\r\n    menuButton.addEventListener('click', e => toggleLauncher({ e }))\r\n\r\n    menuButton.addEventListener('contextmenu', e => {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n    })\r\n\r\n    menuButton.addEventListener('mouseenter', () => {\r\n      menuButton.classList.add('web3os-desktop-menu-button-hover')\r\n    })\r\n\r\n    menuButton.addEventListener('mouseleave', () => {\r\n      menuButton.classList.remove('web3os-desktop-menu-button-hover')\r\n    })\r\n\r\n    menuButton.addEventListener('touchstart', () => {\r\n      menuButton.classList.add('web3os-desktop-menu-button-hover')\r\n      showButtons()\r\n    })\r\n\r\n    menuButton.addEventListener('touchend', e => {\r\n      const target = document.elementFromPoint(e.changedTouches?.[0].clientX, e.changedTouches?.[0].clientY)\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      if (target) target.click()\r\n      hideButtons()\r\n      menuButton.classList.remove('web3os-desktop-menu-button-hover')\r\n    })\r\n\r\n    const buttons = [menuButton, shellButton, exitButton]\r\n\r\n    buttons.forEach(btn => {\r\n      btn.addEventListener('pointerenter', showButtons)\r\n      btn.addEventListener('pointerleave', hideButtons)\r\n    })\r\n\r\n    const metaListener = e => {\r\n      if (e.code === 'KeyQ' && e.ctrlKey && e.shiftKey) exitDesktop()\r\n      if (e.key === 'Meta' && e.ctrlKey) toggleLauncher(args)\r\n      if (e.key === 'Tab' && e.shiftKey) toggleRunner()\r\n    }\r\n\r\n    globalThis.addEventListener('keydown', metaListener)\r\n\r\n    desktop.append(menuButton)\r\n    desktop.append(shellButton)\r\n    desktop.append(exitButton)\r\n    \r\n    document.querySelector('#web3os-terminal').style.display = 'none'\r\n    document.body.appendChild(desktop)\r\n\r\n    loadDesktopIconPositions()\r\n\r\n    // const desktopContextMenu = [\r\n    //   {\r\n    //     text: 'New File',\r\n    //     action: () => {}\r\n    //   }\r\n    // ]\r\n\r\n    // desktop.addEventListener('contextmenu', e => {\r\n    //   e.preventDefault()\r\n    //   e.stopPropagation()\r\n    //   // console.log(e)\r\n    //   ctxmenu.show(desktopContextMenu, e)\r\n    // })\r\n  } catch (err) {\r\n    console.error(err)\r\n    throw err\r\n  }\r\n}\r\n\r\nexport async function toggleRunner () {\r\n  if (document.querySelector('#web3os-desktop-runner')) return document.querySelector('#web3os-desktop-runner').remove()\r\n\r\n  const dialog = document.createElement('div')\r\n  dialog.id = 'web3os-desktop-runner'\r\n  dialog.hideActions = true\r\n\r\n  const input = document.createElement('input')\r\n  input.id = 'web3os-desktop-runner-input'\r\n  input.placeholder = 'Run a command...'\r\n\r\n  input.addEventListener('keydown', async e => {\r\n    if (e.key !== 'Enter') return\r\n    // launchTerminal({ command: input.value })\r\n    kernel.execute(input.value)\r\n    dialog.remove()\r\n  })\r\n\r\n  dialog.append(input)\r\n  dialog.open = true\r\n\r\n  document.body.appendChild(dialog)\r\n  // TODO: Figure out how to get the damn input focused properly - everything I tried didn't work\r\n}\r\n\r\nexport async function toggleLauncher (args) {\r\n  if (launcher) {\r\n    launcher.window.close()\r\n    launcher = null\r\n    return\r\n  }\r\n\r\n  // TODO: Load this from somewhere configurable and just make it... better.\r\n  const launcherApps = [\r\n    { name: 'Files', icon: kernel.modules.files?.icon, description: kernel.modules.files?.description, run: () => kernel.execute('files /desktop')},\r\n    // { name: 'Mailchain', icon: kernel.modules.mailchain?.icon, description: kernel.modules.mailchain?.description, run: () => kernel.execute('www --no-toolbar --title Mailchain https://inbox.mailchain.xyz')},\r\n    { name: 'Doom', icon: kernel.modules['@web3os-apps/doom']?.icon, description: kernel.modules['@web3os-apps/doom']?.description, run: () => kernel.execute('@web3os-apps/doom')},\r\n    { name: 'Wolfenstein', icon: kernel.modules['@web3os-apps/wolfenstein']?.icon, description: kernel.modules['@web3os-apps/wolfenstein']?.description, run: () => kernel.execute('wolfenstein')},\r\n    { name: 'Screensaver', icon: kernel.modules.screensaver?.icon, description: kernel.modules.screensaver?.description, run: () => kernel.execute('screensaver') },\r\n    { name: 'Browser', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www about:blank')},\r\n    { name: 'Instacalc', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www https://instacalc.com') },\r\n    { name: 'Thesaurus', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www https://thesaurus.com') },\r\n    { name: 'Dictionary', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www https://dictionary.com') },\r\n    { name: 'Wikipedia', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www https://wikipedia.org') },\r\n    // { name: 'WASM Studio', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www https://webassembly.studio') },\r\n    // { name: 'WASM Shell', icon: kernel.modules.www?.icon, description: kernel.modules.www?.description, run: () => kernel.execute('www https://webassembly.sh') }\r\n  ]\r\n\r\n  const template = document.createElement('div')\r\n  template.id = 'web3os-desktop-launcher'\r\n\r\n  for (const app of launcherApps.sort((a, b) => a.name > b.name ? 1 : ((b.name > a.name) ? -1 : 0))) {\r\n    const { name, description, icon, run } = app\r\n\r\n    const entry = document.createElement('div')\r\n    entry.classList.add('web3os-desktop-launcher-entry')\r\n\r\n    const img = document.createElement('img')\r\n    img.src = icon || defaultAppIcon\r\n\r\n    const title = document.createElement('h1')\r\n    title.textContent = name\r\n\r\n    entry.title = description\r\n    entry.dataset.command = name\r\n    entry.append(img)\r\n    entry.append(title)\r\n    template.appendChild(entry)\r\n\r\n    entry.addEventListener('click', async e => {\r\n      const { command } = entry.dataset\r\n      console.log({ command })\r\n      try {\r\n        run()\r\n      } catch (err) {\r\n        kernel.log(err.message)\r\n        kernel.dialog({ icon: 'error', title: 'Error', text: colors.unstyle(err.message) })\r\n      } finally {\r\n        if (launcher?.window) launcher.window.close()\r\n      }\r\n    })\r\n  }\r\n\r\n  launcher = kernel.windows.create({\r\n    class: 'no-min no-full web3os-desktop-launcher-window',\r\n    title: 'Web3os',\r\n    mount: template,\r\n    x: 'center',\r\n    y: 'center',\r\n    width: '70%',\r\n    height: '70%',\r\n    onblur: () => {\r\n      launcher?.window?.close?.()\r\n    },\r\n    onclose: () => {\r\n      launcher = null\r\n    }\r\n  })\r\n\r\n  launcher.window.body.style.backgroundImage = `url(${args['--launcher-wallpaper'] || defaultLauncherWallpaper})`\r\n  launcher.window.body.id = 'web3os-desktop-launcher-wallpaper'\r\n}\r\n\r\nexport async function exitDesktop () {\r\n  desktop.remove()\r\n  document.querySelector('#web3os-terminal').style.display = 'block'\r\n  globalThis.Terminal.focus()\r\n  globalThis.Terminal.fit()\r\n}\r\n\r\nexport async function run (term, context) {\r\n  terminal = term\r\n  kernel = term.kernel\r\n\r\n  const args = arg(spec, { argv: context.split(' ') })\r\n  const cmd = args._?.[0]\r\n\r\n  if (args['--version']) return terminal.log(version)\r\n  if (!kernel.fs.existsSync('/desktop')) kernel.fs.mkdirSync('/desktop')\r\n  if (!kernel.fs.existsSync('/desktop/Documents')) kernel.fs.mkdirSync('/desktop/Documents')\r\n\r\n  switch (cmd) {\r\n    case 'launcher':\r\n      return toggleLauncher(args)\r\n    case 'start':\r\n    default:\r\n      if (document.querySelector('#web3os-desktop')) throw new Error('Desktop is already running')\r\n      return await start(args)\r\n  }\r\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction __spreadArrays() {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, \n    k++) r[k] = a[j];\n    return r;\n}\n\nfunction getProp(prop) {\n    return \"function\" === typeof prop ? prop() : prop;\n}\n\nfunction itemIsInteractive(item) {\n    return itemIsAction(item) || itemIsAnchor(item) || itemIsSubMenu(item) || itemIsCustom(item);\n}\n\nfunction itemIsAction(item) {\n    return item.hasOwnProperty(\"action\");\n}\n\nfunction itemIsAnchor(item) {\n    return item.hasOwnProperty(\"href\");\n}\n\nfunction itemIsDivider(item) {\n    return item.hasOwnProperty(\"isDivider\");\n}\n\nfunction itemIsSubMenu(item) {\n    return item.hasOwnProperty(\"subMenu\");\n}\n\nfunction itemIsCustom(item) {\n    return item.hasOwnProperty(\"html\") || item.hasOwnProperty(\"element\");\n}\n\nfunction onHoverDebounced(target, action) {\n    var timeout;\n    target.addEventListener(\"mouseenter\", (function(e) {\n        timeout = setTimeout((function() {\n            return action(e);\n        }), 150);\n    }));\n    target.addEventListener(\"mouseleave\", (function() {\n        return clearTimeout(timeout);\n    }));\n}\n\nfunction getBounding(elem) {\n    var container = elem.cloneNode(true);\n    container.style.visibility = \"hidden\";\n    document.body.appendChild(container);\n    var result = container.getBoundingClientRect();\n    document.body.removeChild(container);\n    return result;\n}\n\nfunction isDisabled(item) {\n    return getProp(item.disabled) || itemIsSubMenu(item) && 0 === item.subMenu.length;\n}\n\nfunction generateMenuItem(item) {\n    var li = document.createElement(\"li\");\n    if (itemIsDivider(item)) {\n        li.className = \"divider\";\n        return li;\n    }\n    generateBaseItemContent(item, li);\n    if (!itemIsInteractive(item)) {\n        li.classList.add(\"heading\");\n        return li;\n    }\n    if (isDisabled(item)) {\n        li.classList.add(\"disabled\");\n        if (itemIsSubMenu(item)) li.classList.add(\"submenu\");\n        return li;\n    }\n    li.classList.add(\"interactive\");\n    if (itemIsAnchor(item)) {\n        var a = document.createElement(\"a\");\n        a.append.apply(a, Array.from(li.childNodes));\n        a.href = getProp(item.href);\n        if (item.hasOwnProperty(\"download\")) a.download = getProp(item.download);\n        if (item.hasOwnProperty(\"target\")) a.target = getProp(item.target);\n        li.append(a);\n        return li;\n    }\n    if (itemIsAction(item)) {\n        li.addEventListener(\"click\", item.action);\n        return li;\n    }\n    li.classList.add(\"submenu\");\n    return li;\n}\n\nfunction generateBaseItemContent(item, li) {\n    var html = getProp(item.html);\n    var text = \"<span>\" + getProp(item.text) + \"</span>\";\n    var elem = getProp(item.element);\n    elem ? li.append(elem) : li.innerHTML = html ? html : text;\n    li.title = getProp(item.tooltip) || \"\";\n    if (item.style) li.setAttribute(\"style\", getProp(item.style));\n    if (item.icon) {\n        li.classList.add(\"icon\");\n        li.innerHTML += '<img class=\"icon\" src=\"' + getProp(item.icon) + '\" />';\n    }\n}\n\nvar styles = 'html{min-height:100%}.ctxmenu{position:fixed;max-height:100vh;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana, sans-serif}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0, 0, 0, .1)}.ctxmenu li.submenu::after{content:\"\";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border-right:1px solid #000;border-top:1px solid #000;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}';\n\n/*! ctxMenu v1.4.3 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/ var ContextMenu = function() {\n    function ContextMenu() {\n        var _this = this;\n        this.cache = {};\n        this.hdir = \"r\";\n        this.vdir = \"d\";\n        this.preventCloseOnScroll = false;\n        window.addEventListener(\"click\", (function(ev) {\n            var item = ev.target instanceof Element && ev.target.parentElement;\n            if (item && \"interactive\" === item.className) return;\n            _this.hide();\n        }));\n        window.addEventListener(\"resize\", (function() {\n            return _this.hide();\n        }));\n        var timeout = 0;\n        window.addEventListener(\"wheel\", (function() {\n            clearTimeout(timeout);\n            timeout = setTimeout((function() {\n                if (_this.preventCloseOnScroll) {\n                    _this.preventCloseOnScroll = false;\n                    return;\n                }\n                _this.hide();\n            }));\n        }), {\n            passive: true\n        });\n        ContextMenu.addStylesToDom();\n    }\n    ContextMenu.getInstance = function() {\n        if (!ContextMenu.instance) ContextMenu.instance = new ContextMenu;\n        var instance = ContextMenu.instance;\n        return {\n            attach: instance.attach.bind(instance),\n            delete: instance.delete.bind(instance),\n            hide: instance.hide.bind(instance),\n            show: instance.show.bind(instance),\n            update: instance.update.bind(instance)\n        };\n    };\n    ContextMenu.prototype.attach = function(target, ctxMenu, beforeRender) {\n        var _this = this;\n        if (void 0 === beforeRender) beforeRender = function(m) {\n            return m;\n        };\n        var t = document.querySelector(target);\n        if (void 0 !== this.cache[target]) {\n            console.error(\"target element \" + target + \" already has a context menu assigned. Use ContextMenu.update() intstead.\");\n            return;\n        }\n        if (!t) {\n            console.error(\"target element \" + target + \" not found\");\n            return;\n        }\n        var handler = function(e) {\n            var newMenu = beforeRender(__spreadArrays(ctxMenu), e);\n            _this.show(newMenu, e);\n        };\n        this.cache[target] = {\n            ctxMenu: ctxMenu,\n            handler: handler,\n            beforeRender: beforeRender\n        };\n        t.addEventListener(\"contextmenu\", handler);\n    };\n    ContextMenu.prototype.update = function(target, ctxMenu, beforeRender) {\n        var o = this.cache[target];\n        var t = document.querySelector(target);\n        o && (null === t || void 0 === t ? void 0 : t.removeEventListener(\"contextmenu\", o.handler));\n        delete this.cache[target];\n        this.attach(target, ctxMenu || (null === o || void 0 === o ? void 0 : o.ctxMenu) || [], beforeRender || (null === o || void 0 === o ? void 0 : o.beforeRender));\n    };\n    ContextMenu.prototype.delete = function(target) {\n        var o = this.cache[target];\n        if (!o) {\n            console.error(\"no context menu for target element \" + target + \" found\");\n            return;\n        }\n        var t = document.querySelector(target);\n        if (!t) {\n            console.error(\"target element \" + target + \" does not exist (anymore)\");\n            return;\n        }\n        t.removeEventListener(\"contextmenu\", o.handler);\n        delete this.cache[target];\n    };\n    ContextMenu.prototype.show = function(ctxMenu, eventOrElement) {\n        var _this = this;\n        if (eventOrElement instanceof MouseEvent) eventOrElement.stopImmediatePropagation();\n        this.hide();\n        this.menu = this.generateDOM(__spreadArrays(ctxMenu), eventOrElement);\n        document.body.appendChild(this.menu);\n        this.menu.addEventListener(\"wheel\", (function() {\n            return _this.preventCloseOnScroll = true;\n        }), {\n            passive: true\n        });\n        if (eventOrElement instanceof MouseEvent) eventOrElement.preventDefault();\n    };\n    ContextMenu.prototype.hide = function(menu) {\n        var _a;\n        if (void 0 === menu) menu = this.menu;\n        this.hdir = \"r\";\n        this.vdir = \"d\";\n        if (menu) {\n            if (menu === this.menu) delete this.menu;\n            null === (_a = menu.parentElement) || void 0 === _a ? void 0 : _a.removeChild(menu);\n        }\n    };\n    ContextMenu.prototype.generateDOM = function(ctxMenu, parentOrEvent) {\n        var _this = this;\n        var container = document.createElement(\"ul\");\n        if (0 === ctxMenu.length) container.style.display = \"none\";\n        ctxMenu.forEach((function(item) {\n            var li = generateMenuItem(item);\n            onHoverDebounced(li, (function() {\n                var _a;\n                var subMenu = null === (_a = li.parentElement) || void 0 === _a ? void 0 : _a.querySelector(\"ul\");\n                if (subMenu && subMenu.parentElement !== li) _this.hide(subMenu);\n            }));\n            if (itemIsInteractive(item) && !isDisabled(item)) if (itemIsSubMenu(item)) onHoverDebounced(li, (function(ev) {\n                var subMenu = li.querySelector(\"ul\");\n                if (!subMenu) _this.openSubMenu(ev, getProp(item.subMenu), li);\n            })); else li.addEventListener(\"click\", (function() {\n                return _this.hide();\n            }));\n            container.appendChild(li);\n        }));\n        container.className = \"ctxmenu\";\n        var rect = getBounding(container);\n        var pos = {\n            x: 0,\n            y: 0\n        };\n        if (parentOrEvent instanceof Element) {\n            var _a = parentOrEvent.getBoundingClientRect(), left = _a.left, width = _a.width, top_1 = _a.top;\n            pos = {\n                x: \"r\" === this.hdir ? left + width : left - rect.width,\n                y: top_1\n            };\n            if (parentOrEvent.className.includes(\"submenu\")) pos.y += \"d\" === this.vdir ? 4 : -12;\n            var savePos = this.getPosition(rect, pos);\n            if (pos.x !== savePos.x) {\n                this.hdir = \"r\" === this.hdir ? \"l\" : \"r\";\n                pos.x = \"r\" === this.hdir ? left + width : left - rect.width;\n            }\n            if (pos.y !== savePos.y) {\n                this.vdir = \"u\" === this.vdir ? \"d\" : \"u\";\n                pos.y = savePos.y;\n            }\n            pos = this.getPosition(rect, pos, false);\n        } else pos = this.getPosition(rect, {\n            x: parentOrEvent.clientX,\n            y: parentOrEvent.clientY\n        });\n        container.style.left = pos.x + \"px\";\n        container.style.top = pos.y + \"px\";\n        container.addEventListener(\"contextmenu\", (function(ev) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        }));\n        container.addEventListener(\"click\", (function(ev) {\n            var item = ev.target instanceof Element && ev.target.parentElement;\n            if (item && \"interactive\" !== item.className) ev.stopPropagation();\n        }));\n        return container;\n    };\n    ContextMenu.prototype.openSubMenu = function(e, ctxMenu, listElement) {\n        var _a;\n        var subMenu = null === (_a = listElement.parentElement) || void 0 === _a ? void 0 : _a.querySelector(\"li > ul\");\n        if (subMenu && subMenu.parentElement !== listElement) this.hide(subMenu);\n        listElement.appendChild(this.generateDOM(ctxMenu, listElement));\n    };\n    ContextMenu.prototype.getPosition = function(rect, pos, addScrollOffset) {\n        if (void 0 === addScrollOffset) addScrollOffset = true;\n        var html = document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        var hasTransform = \"\" !== document.body.style.transform;\n        var minX = hasTransform ? window.scrollX : 0;\n        var minY = hasTransform ? window.scrollY : 0;\n        var maxX = hasTransform ? width + window.scrollX : width;\n        var maxY = hasTransform ? height + window.scrollY : height;\n        if (hasTransform && addScrollOffset) {\n            pos.x += window.scrollX;\n            pos.y += window.scrollY;\n        }\n        return {\n            x: \"r\" === this.hdir ? pos.x + rect.width > maxX ? maxX - rect.width : pos.x : pos.x < minX ? minX : pos.x,\n            y: \"d\" === this.vdir ? pos.y + rect.height > maxY ? maxY - rect.height : pos.y : pos.y < minY ? minY : pos.y\n        };\n    };\n    ContextMenu.addStylesToDom = function() {\n        var append = function() {\n            if (\"loading\" === document.readyState) return document.addEventListener(\"readystatechange\", append);\n            var style = document.createElement(\"style\");\n            style.innerHTML = styles;\n            document.head.insertBefore(style, document.head.childNodes[0]);\n            append = function() {};\n        };\n        append();\n    };\n    return ContextMenu;\n}();\n\nvar ctxmenu = ContextMenu.getInstance();\n\nexports.ctxmenu = ctxmenu;\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEyMi44OCAxMDEuOSI+PHBhdGggZD0iTTMuMzQgMGgxMTYuMmEzLjM1IDMuMzUgMCAwMTMuMzQgMy4zNHY3N2EzLjM1IDMuMzUgMCAwMS0zLjM0IDMuMzRIMy4zNEEzLjM1IDMuMzUgMCAwMTAgODAuMzJ2LTc3QTMuMzUgMy4zNSAwIDAxMy4zNCAwem0xMC4xNSA2My45MWEyLjU5IDIuNTkgMCAxMTAtNS4xN2gzOS40NWEyLjU5IDIuNTkgMCAxMTAgNS4xN3ptLjE1LTEzLjI4YTIuNTkgMi41OSAwIDAxMC01LjE3SDQyLjRhMi41OSAyLjU5IDAgMDEwIDUuMTd6bS0uMTUtMTMuMjNhMi41OSAyLjU5IDAgMTEwLTUuMTdoMjAuMzZhMi41OSAyLjU5IDAgMDEwIDUuMTd6bTAtMTMuMjZhMi41OSAyLjU5IDAgMTEwLTUuMTdIMjUuM2EyLjU5IDIuNTkgMCAwMTAgNS4xN3ptOTcgMjYuMTl2Ni40NGwtMTMuMjMgNy41di03LjVsOC41Mi0zLjI0LTguNTItMy4ydi03LjVsMTMuMjMgNy41em0tMjIuOTIgMTZIODJsNy0yNy4xMWg1LjYzbC03IDI3LjExem0tOS40MS0xNmwtOC41MyAzLjIgOC41MyAzLjI0djcuNUw2NSA1Ni43N3YtNi40NGwxMy4yNC03LjV2Ny41em01LjY3LTM4LjY4djMuNjdBMS44MyAxLjgzIDAgMDE4MiAxNy4xNWgtM2ExNC40MyAxNC40MyAwIDAxLTEuNiAzLjVsMiAyYTEuODMgMS44MyAwIDAxMCAyLjU4bC0yLjcxIDIuNzFhMS44MyAxLjgzIDAgMDEtMi41OCAwbC0yLjE4LTIuMThhMTQuNDMgMTQuNDMgMCAwMS0zLjYgMS4zNXYyLjgyYTEuODQgMS44NCAwIDAxLTEuODMgMS44M2gtMy44N2ExLjg0IDEuODQgMCAwMS0xLjgzLTEuODN2LTMuMDhhMTQuMiAxNC4yIDAgMDEtMy41LTEuNTlsLTIgMmExLjgyIDEuODIgMCAwMS0yLjU5IDBMNTAgMjQuNTVBMS44NCAxLjg0IDAgMDE1MCAyMmwyLjE4LTIuMTdhMTQuNSAxNC41IDAgMDEtMS4zNS0zLjYxSDQ4YTEuODMgMS44MyAwIDAxLTEuODMtMS44M3YtMi43SDMuMDl2NTkuMTVhMyAzIDAgMDAzIDNoMTEwLjc2YTMgMyAwIDAwMy0zVjExLjY1em0tMTEuNDIgMEg1Ny42MmE3LjcxIDcuNzEgMCAwMC0uMTEgMS4yOCA3LjUyIDcuNTIgMCAwMDE1IDAgNy43MSA3LjcxIDAgMDAtLjEtMS4yOHptNDEuNzktNi43M2EyIDIgMCAxMS0yIDIgMiAyIDAgMDEyLTJ6bS0xMy40NCAwYTIgMiAwIDExLTIgMiAyIDIgMCAwMTItMnptNi43MiAwYTIgMiAwIDExLTIgMiAyIDIgMCAwMTItMnpNNDYuMjkgODguMjdoMzAuM2MuMDggNS4yNCAyLjI0IDkuOTQgOC4wOSAxMy42M0gzOC4yYzQuNzEtMy40MSA4LjExLTcuNTQgOC4wOS0xMy42M3oiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==\"","module.exports = __webpack_public_path__ + \"imgs/default_wallpaper.fd2c7c2a.png\";"],"names":["flagSymbol","Symbol","ArgError","Error","constructor","msg","code","super","this","name","Object","setPrototypeOf","prototype","arg","opts","argv","process","slice","permissive","stopAtPositional","result","_","aliases","handlers","key","keys","length","type","isFlag","Array","isArray","fn","value","prev","push","Boolean","i","len","wholeArg","concat","separatedArguments","split","map","a","j","originalArgName","argStr","undefined","argName","match","Number","BigInt","flag","COUNT","v","existingCount","module","exports","desktop","launcher","version","description","help","spec","String","kernel","globalThis","Kernel","terminal","Terminal","defaultLauncherWallpaper","saveDesktopIconPositions","positions","document","querySelectorAll","forEach","entry","getBoundingClientRect","x","y","location","JSON","parse","dataset","file","localStorage","setItem","stringify","loadDesktopIconPositions","getItem","style","position","top","left","console","log","err","warn","launchTerminal","options","win","customCommands","run","window","close","termKernel","newTerm","Web3osTerminal","create","fontFamily","fontSize","fontWeight","theme","background","container","createElement","width","height","open","cwd","path","windows","title","windowTitle","command","mount","windowWidth","windowHeight","onclose","clearInterval","fitInterval","term","startup","execute","prompt","focus","setInterval","fit","setTimeout","createFileLayer","fileLayer","id","addEventListener","e","preventDefault","dataTransfer","dropEffect","fs","readdirSync","filename","fileIcon","utils","resolve","statSync","isDirectory","icon","btoa","classList","add","textContent","appendChild","draggable","setData","target","effectAllowed","entryContextMenu","text","action","querySelector","replaceWith","stopPropagation","ctxmenu","data","stat","extension","ext","mime","lookup","executeScript","readFileSync","url","useWeb3osBrowser","error","dialog","message","test","start","args","wallpaper","src","defaultWallpaperURL","opacity","complete","menuButton","ariaLabel","shellButton","exitButton","exitDesktop","showButtons","btn","hideButtons","remove","toggleLauncher","elementFromPoint","changedTouches","clientX","clientY","click","metaListener","ctrlKey","shiftKey","toggleRunner","append","display","body","hideActions","input","placeholder","launcherApps","modules","files","screensaver","www","template","sort","b","app","img","defaultAppIcon","colors","class","onblur","backgroundImage","context","cmd","existsSync","mkdirSync","__spreadArrays","s","il","arguments","r","k","jl","getProp","prop","itemIsInteractive","item","itemIsAction","itemIsAnchor","itemIsSubMenu","hasOwnProperty","itemIsCustom","onHoverDebounced","timeout","clearTimeout","isDisabled","disabled","subMenu","ContextMenu","_this","cache","hdir","vdir","preventCloseOnScroll","ev","Element","parentElement","className","hide","passive","addStylesToDom","getInstance","instance","attach","bind","delete","show","update","ctxMenu","beforeRender","m","t","handler","newMenu","o","removeEventListener","eventOrElement","MouseEvent","stopImmediatePropagation","menu","generateDOM","_a","removeChild","parentOrEvent","li","itemIsDivider","html","elem","element","innerHTML","tooltip","setAttribute","generateBaseItemContent","apply","from","childNodes","href","download","generateMenuItem","openSubMenu","rect","cloneNode","visibility","getBounding","pos","top_1","includes","savePos","getPosition","listElement","addScrollOffset","documentElement","clientWidth","clientHeight","hasTransform","transform","minX","scrollX","minY","scrollY","maxX","maxY","readyState","head","insertBefore"],"sourceRoot":""}