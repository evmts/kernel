{"version":3,"file":"modules/peer.js","mappings":"yDAEA,MAIMA,EAAa,uHASbC,EAAS,KACb,MAAMC,EAAS,CACbC,aARqB,IAAZC,GAC0B,MAA5BA,EAAQC,IAAIC,YAQnBC,SAAS,EACTC,OAAQ,GACRC,KAAM,IAkBFC,EAAO,CAACC,EAAOC,EAAOC,IACF,mBAAVF,EAAuBA,EAAMC,GAASD,EAAMD,KAAKE,EAAOC,GAGlEF,EAAQ,CAACC,EAAOE,KACpB,GAAc,KAAVF,GAAyB,MAATA,EAAe,MAAO,GAC1C,IAAuB,IAAnBV,EAAOC,QAAmB,OAAOS,EACrC,IAAuB,IAAnBV,EAAOK,QAAmB,MAAO,GACrC,IAAIQ,EAAM,GAAKH,EACXI,EAAKD,EAAIE,SAAS,MAClBC,EAAIJ,EAAMK,OAId,IAHID,EAAI,GAAKJ,EAAMG,SAAS,aAC1BH,EAAQ,IAAI,IAAIM,IAAI,CAAC,aAAcN,KAASO,WAEvCH,KAAM,GAAGH,EAAML,EAAKR,EAAOM,OAAOM,EAAMI,IAAKH,EAAKC,GACzD,OAAOD,GAGHO,EAAS,CAACC,EAAMC,EAAOC,KAC3BvB,EAAOM,OAAOe,GAlCHZ,KACX,IAAIe,EAAOf,EAAMe,KAAO,KAAUf,EAAMa,MAAM,MAC1CG,EAAQhB,EAAMgB,MAAQ,KAAUhB,EAAMa,MAAM,MAC5CI,EAAQjB,EAAMiB,MAAQ,IAAIC,OAAO,aAAalB,EAAMa,MAAM,MAAO,KASrE,OARAb,EAAMD,KAAO,CAACE,EAAOC,KACfD,EAAMK,SAASU,KAAQf,EAAQA,EAAMkB,QAAQF,EAAOD,EAAQD,IAChE,IAAIK,EAASL,EAAOd,EAAQe,EAI5B,OAAOd,EAAUkB,EAAOD,QAAQ,SAAU,GAAGH,MAAUD,KAAUK,GAE5DpB,GAsBeqB,CAAK,CAAET,OAAMC,WACxBtB,EAAOO,KAAKgB,KAAUvB,EAAOO,KAAKgB,GAAQ,KAChDQ,KAAKV,GAEVW,QAAQC,eAAejC,EAAQqB,EAAM,CACnCa,cAAc,EACdC,YAAY,EACZC,IAAIC,GACFrC,EAAOsC,MAAMjB,EAAMgB,IAErBE,MACE,IAAIC,EAAQ9B,GAASD,EAAMC,EAAO8B,EAAM5B,OAGxC,OAFAoB,QAAQS,eAAeD,EAAOxC,GAC9BwC,EAAM5B,MAAQ8B,KAAK9B,MAAQ8B,KAAK9B,MAAM+B,OAAOtB,GAAQ,CAACA,GAC/CmB,MA4Gb,OAvGApB,EAAO,QAAS,CAAC,EAAG,GAAI,YACxBA,EAAO,OAAQ,CAAC,EAAG,IAAK,YACxBA,EAAO,MAAO,CAAC,EAAG,IAAK,YACvBA,EAAO,SAAU,CAAC,EAAG,IAAK,YAC1BA,EAAO,YAAa,CAAC,EAAG,IAAK,YAC7BA,EAAO,UAAW,CAAC,EAAG,IAAK,YAC3BA,EAAO,SAAU,CAAC,EAAG,IAAK,YAC1BA,EAAO,gBAAiB,CAAC,EAAG,IAAK,YAEjCA,EAAO,QAAS,CAAC,GAAI,IAAK,SAC1BA,EAAO,MAAO,CAAC,GAAI,IAAK,SACxBA,EAAO,QAAS,CAAC,GAAI,IAAK,SAC1BA,EAAO,SAAU,CAAC,GAAI,IAAK,SAC3BA,EAAO,OAAQ,CAAC,GAAI,IAAK,SACzBA,EAAO,UAAW,CAAC,GAAI,IAAK,SAC5BA,EAAO,OAAQ,CAAC,GAAI,IAAK,SACzBA,EAAO,QAAS,CAAC,GAAI,IAAK,SAC1BA,EAAO,OAAQ,CAAC,GAAI,IAAK,SACzBA,EAAO,OAAQ,CAAC,GAAI,IAAK,SAEzBA,EAAO,UAAW,CAAC,GAAI,IAAK,MAC5BA,EAAO,QAAS,CAAC,GAAI,IAAK,MAC1BA,EAAO,UAAW,CAAC,GAAI,IAAK,MAC5BA,EAAO,WAAY,CAAC,GAAI,IAAK,MAC7BA,EAAO,SAAU,CAAC,GAAI,IAAK,MAC3BA,EAAO,YAAa,CAAC,GAAI,IAAK,MAC9BA,EAAO,SAAU,CAAC,GAAI,IAAK,MAC3BA,EAAO,UAAW,CAAC,GAAI,IAAK,MAE5BA,EAAO,cAAe,CAAC,GAAI,IAAK,UAChCA,EAAO,YAAa,CAAC,GAAI,IAAK,UAC9BA,EAAO,cAAe,CAAC,GAAI,IAAK,UAChCA,EAAO,eAAgB,CAAC,GAAI,IAAK,UACjCA,EAAO,aAAc,CAAC,GAAI,IAAK,UAC/BA,EAAO,gBAAiB,CAAC,GAAI,IAAK,UAClCA,EAAO,aAAc,CAAC,GAAI,IAAK,UAC/BA,EAAO,cAAe,CAAC,GAAI,IAAK,UAEhCA,EAAO,gBAAiB,CAAC,IAAK,IAAK,YACnCA,EAAO,cAAe,CAAC,IAAK,IAAK,YACjCA,EAAO,gBAAiB,CAAC,IAAK,IAAK,YACnCA,EAAO,iBAAkB,CAAC,IAAK,IAAK,YACpCA,EAAO,eAAgB,CAAC,IAAK,IAAK,YAClCA,EAAO,kBAAmB,CAAC,IAAK,IAAK,YACrCA,EAAO,eAAgB,CAAC,IAAK,IAAK,YAClCA,EAAO,gBAAiB,CAAC,IAAK,IAAK,YAEnCpB,EAAO4C,UAAY9C,EACnBE,EAAO6C,SAAW7C,EAAO8C,QAAUjC,IACjCb,EAAO4C,UAAUG,UAAY,EACP,iBAARlC,GAA4B,KAARA,GAAcb,EAAO4C,UAAUI,KAAKnC,IAGxEb,EAAOsC,MAAQ,CAACjB,EAAMmB,KACpB,IAAIS,EAAsB,iBAAVT,EAAqBxC,EAAOwC,GAASA,EAErD,GAAkB,mBAAPS,EACT,MAAM,IAAIC,UAAU,6EAGjBD,EAAGrC,QACNoB,QAAQC,eAAegB,EAAI,OAAQ,CAAEZ,MAAOhB,IAC5CrB,EAAOM,OAAOe,GAAQ4B,EACtBA,EAAGrC,MAAQ,CAACS,IAGdW,QAAQC,eAAejC,EAAQqB,EAAM,CACnCa,cAAc,EACdC,YAAY,EACZC,IAAIC,GACFrC,EAAOsC,MAAMjB,EAAMgB,IAErBE,MACE,IAAIC,EAAQ9B,GAASD,EAAMC,EAAO8B,EAAM5B,OAGxC,OAFAoB,QAAQS,eAAeD,EAAOxC,GAC9BwC,EAAM5B,MAAQ8B,KAAK9B,MAAQ8B,KAAK9B,MAAM+B,OAAOM,EAAGrC,OAASqC,EAAGrC,MACrD4B,MAKbxC,EAAOmD,MAAQC,IACb,GA5J4B,QAAfC,EA4JCD,IA5JqC,iBAARC,GAAqBC,MAAMC,QAAQF,GA4JvD,MAAM,IAAIH,UAAU,kCA5J9BG,MA6Jb,IAAK,IAAIhC,KAAQmC,OAAOjD,KAAK6C,GAC3BpD,EAAOsC,MAAMjB,EAAM+B,EAAO/B,IAE5B,OAAOrB,GAGTA,EAAOsC,MAAM,WAAWzB,GACH,iBAARA,GAA4B,KAARA,GAC7Bb,EAAO4C,UAAUG,UAAY,EACtBlC,EAAIe,QAAQ5B,EAAO4C,UAAW,KAEhC,KAGT5C,EAAOsC,MAAM,QAAQzB,GAAOA,IAC5Bb,EAAOyD,KAAOzD,EAAO0D,MAAQ1D,EAAO2D,KAEpC3D,EAAO4D,WAAa5D,EAAO6D,QAC3B7D,EAAO8D,QAAU,EAAQ,OACzB9D,EAAOoB,OAASA,EACTpB,GAGT+D,EAAOC,QAAUjE,IACjBgE,EAAOC,QAAQjE,OAASA,G,4CCrLxB,MAAMkE,OAA6B,IAAZ/D,GAAwD,UAA7BA,EAAQC,IAAI+D,aACxDC,OAA+B,IAAZjE,GAAgD,UAArBA,EAAQkE,SACtDC,OAA6B,IAAZnE,GAAgD,UAArBA,EAAQkE,SAEpDE,EAAS,CACbC,eAAgB,IAChBC,UAAW,IACXC,SAAU,IACVC,OAAQ,IACRC,YAAa,IACbC,UAAW,IACXC,MAAO,IACPC,YAAa,IACbC,KAAM,IACNC,KAAM,IACNC,OAAQ,IACRC,MAAO,IACPC,eAAgB,IAChBC,OAAQ,IACRC,gBAAiB,IACjBC,YAAa,IACbC,cAAe,IACfC,QAAS,IACTC,SAAU,IACVC,QAAS,IACTC,UAAW,IACXC,SAAU,IACVC,QAAS,IACTC,SAAU,IACVC,QAAS,IACTC,YAAa,KAGTC,EAAUzC,OAAO0C,OAAO,GAAI5B,EAAQ,CACxC6B,MAAO,IACPC,MAAO,IACPC,cAAe,MACfC,SAAU,MACVC,KAAM,IACNC,cAAe,IACfC,QAAS,IACTC,aAAc,IACdC,SAAU,MACVC,QAAS,MACTC,QAAS,MAGLC,EAAQtD,OAAO0C,OAAO,GAAI5B,EAAQ,CACtCyC,YAAa,IACbZ,MAAO,IACPC,MAAO,IACPC,cAAe,IACfC,SAAU,IACVC,KAAM,IACNS,aAAc,IACdR,cAAe,IACfC,QAASpC,EAAU,IAAM,IACzBqC,aAAcrC,EAAU,IAAM,IAC9BsC,SAAU,IACVC,QAAS,IACTC,QAAS,MAGX9C,EAAOC,QAAWG,IAAcF,EAAWgC,EAAUa,EACrD9E,QAAQC,eAAe8B,EAAOC,QAAS,SAAU,CAAE7B,YAAY,EAAOE,MAAOiC,IAC7EtC,QAAQC,eAAe8B,EAAOC,QAAS,UAAW,CAAE7B,YAAY,EAAOE,MAAO4D,IAC9EjE,QAAQC,eAAe8B,EAAOC,QAAS,QAAS,CAAE7B,YAAY,EAAOE,MAAOyE,K,+BCpE5E,MAAMG,EAAaC,OAAO,YAE1B,MAAMC,UAAiBC,MACtBC,YAAYC,EAAKC,GAChBC,MAAMF,GACN5E,KAAKrB,KAAO,WACZqB,KAAK6E,KAAOA,EAEZ/D,OAAOf,eAAeC,KAAMyE,EAASM,YAIvC,SAASC,EACRC,GACA,KACCC,EAAO1H,EAAQ0H,KAAKC,MAAM,GAAE,WAC5BC,GAAa,EAAK,iBAClBC,GAAmB,GAChB,IAEJ,IAAKJ,EACJ,MAAM,IAAIR,EACT,4CACA,sBAIF,MAAMa,EAAS,CAAEC,EAAG,IAEdC,EAAU,GACVC,EAAW,GAEjB,IAAK,MAAMC,KAAO5E,OAAOjD,KAAKoH,GAAO,CACpC,IAAKS,EACJ,MAAM,IAAIjB,EACT,yCACA,wBAIF,GAAe,MAAXiB,EAAI,GACP,MAAM,IAAIjB,EACT,gDAAgDiB,KAChD,yBAIF,GAAmB,IAAfA,EAAInH,OACP,MAAM,IAAIkG,EACT,qEAAqEiB,IACrE,yBAIF,GAAyB,iBAAdT,EAAKS,GAAmB,CAClCF,EAAQE,GAAOT,EAAKS,GACpB,SAGD,IAAI7G,EAAOoG,EAAKS,GACZC,GAAS,EAEb,GACC/E,MAAMC,QAAQhC,IACE,IAAhBA,EAAKN,QACc,mBAAZM,EAAK,GACX,CACD,MAAO0B,GAAM1B,EACbA,EAAO,CAACc,EAAOhB,EAAMiH,EAAO,MAC3BA,EAAKvG,KAAKkB,EAAGZ,EAAOhB,EAAMiH,EAAKA,EAAKrH,OAAS,KACtCqH,GAERD,EAASpF,IAAOsF,UAA8B,IAAnBtF,EAAGgE,OACxB,IAAoB,mBAAT1F,EAGjB,MAAM,IAAI4F,EACT,uDAAuDiB,IACvD,uBAJDC,EAAS9G,IAASgH,UAAgC,IAArBhH,EAAK0F,GAQnC,GAAe,MAAXmB,EAAI,IAAcA,EAAInH,OAAS,EAClC,MAAM,IAAIkG,EACT,4EAA4EiB,IAC5E,+BAIFD,EAASC,GAAO,CAAC7G,EAAM8G,GAGxB,IAAK,IAAIG,EAAI,EAAGC,EAAMb,EAAK3G,OAAQuH,EAAIC,EAAKD,IAAK,CAChD,MAAME,EAAWd,EAAKY,GAEtB,GAAIT,GAAoBC,EAAOC,EAAEhH,OAAS,EAAG,CAC5C+G,EAAOC,EAAID,EAAOC,EAAEtF,OAAOiF,EAAKC,MAAMW,IACtC,MAGD,GAAiB,OAAbE,EAAmB,CACtBV,EAAOC,EAAID,EAAOC,EAAEtF,OAAOiF,EAAKC,MAAMW,EAAI,IAC1C,MAGD,GAAIE,EAASzH,OAAS,GAAqB,MAAhByH,EAAS,GAAY,CAE/C,MAAMC,EACW,MAAhBD,EAAS,IAAkC,IAApBA,EAASzH,OAC7B,CAACyH,GACDA,EACCb,MAAM,GACNe,MAAM,IACNC,KAAKC,GAAM,IAAIA,MAGpB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAmB1H,OAAQ8H,IAAK,CACnD,MAAMrB,EAAMiB,EAAmBI,IACxBC,EAAiBC,GACZ,MAAXvB,EAAI,GAAaA,EAAIkB,MAAM,QAAS,GAAK,CAAClB,OAAKwB,GAEhD,IAAIC,EAAUH,EACd,KAAOG,KAAWjB,GACjBiB,EAAUjB,EAAQiB,GAGnB,KAAMA,KAAWhB,GAAW,CAC3B,GAAIL,EAAY,CACfE,EAAOC,EAAElG,KAAK2F,GACd,SAEA,MAAM,IAAIP,EACT,iCAAiC6B,IACjC,sBAKH,MAAOzH,EAAM8G,GAAUF,EAASgB,GAEhC,IAAKd,GAAUU,EAAI,EAAIJ,EAAmB1H,OACzC,MAAM,IAAIkG,EACT,0EAA0E6B,IAC1E,iCAIF,GAAIX,EACHL,EAAOmB,GAAW5H,GAAK,EAAM4H,EAASnB,EAAOmB,SACvC,QAAeD,IAAXD,EAAsB,CAChC,GACCrB,EAAK3G,OAASuH,EAAI,GACjBZ,EAAKY,EAAI,GAAGvH,OAAS,GACF,MAAnB2G,EAAKY,EAAI,GAAG,MAEXZ,EAAKY,EAAI,GAAGY,MAAM,0BACjB7H,IAAS8H,SAEU,oBAAXC,QAA0B/H,IAAS+H,SAK9C,MAAM,IAAInC,EACT,6BAA6B6B,IAF7BA,IAAoBG,EAAU,GAAK,eAAeA,OAGlD,gCAIFnB,EAAOmB,GAAW5H,EAAKqG,EAAKY,EAAI,GAAIW,EAASnB,EAAOmB,MAClDX,OAEFR,EAAOmB,GAAW5H,EAAK0H,EAAQE,EAASnB,EAAOmB,UAIjDnB,EAAOC,EAAElG,KAAK2G,GAIhB,OAAOV,EAGRN,EAAI6B,KAAQtG,IACXA,EAAGgE,IAAc,EACVhE,GAIRyE,EAAI8B,MAAQ9B,EAAI6B,MAAK,CAACE,EAAGpI,EAAMqI,KAAmBA,GAAiB,GAAK,IAGxEhC,EAAIP,SAAWA,EAEfpD,EAAOC,QAAU0D,G,iFC/LbiC,E,MAA0B,GAA4B,KAE1DA,EAAwB5H,KAAK,CAACgC,EAAO6F,GAAI,y6CAA06C,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,gDAAgD,MAAQ,GAAG,SAAW,0lBAA0lB,eAAiB,CAAC,0uCAA0uC,WAAa,MAEv5GD,EAAwBE,OAAS,CAChC,UAAa,uBACb,KAAQ,uBACR,KAAQ,uBACR,MAAS,uBACT,OAAU,uBACV,KAAQ,uBACR,OAAU,wBAEX,W,uBCVA9F,EAAOC,QAAU,SAAU8F,GACzB,IAAIC,EAAO,GA6FX,OA3FAA,EAAKC,SAAW,WACd,OAAOtH,KAAKmG,KAAI,SAAUoB,GACxB,IAAIC,EAAU,GACVC,OAA+B,IAAZF,EAAK,GA4B5B,OA1BIA,EAAK,KACPC,GAAW,cAAcvH,OAAOsH,EAAK,GAAI,QAGvCA,EAAK,KACPC,GAAW,UAAUvH,OAAOsH,EAAK,GAAI,OAGnCE,IACFD,GAAW,SAASvH,OAAOsH,EAAK,GAAGhJ,OAAS,EAAI,IAAI0B,OAAOsH,EAAK,IAAM,GAAI,OAG5EC,GAAWJ,EAAuBG,GAE9BE,IACFD,GAAW,KAGTD,EAAK,KACPC,GAAW,KAGTD,EAAK,KACPC,GAAW,KAGNA,KACNE,KAAK,KAIVL,EAAKvB,EAAI,SAAW6B,EAASC,EAAOC,EAAQC,EAAUC,GAC7B,iBAAZJ,IACTA,EAAU,CAAC,CAAC,KAAMA,OAASnB,KAG7B,IAAIwB,EAAyB,GAE7B,GAAIH,EACF,IAAK,IAAII,EAAI,EAAGA,EAAIjI,KAAKzB,OAAQ0J,IAAK,CACpC,IAAIf,EAAKlH,KAAKiI,GAAG,GAEP,MAANf,IACFc,EAAuBd,IAAM,GAKnC,IAAK,IAAIgB,EAAK,EAAGA,EAAKP,EAAQpJ,OAAQ2J,IAAM,CAC1C,IAAIX,EAAO,GAAGtH,OAAO0H,EAAQO,IAEzBL,GAAUG,EAAuBT,EAAK,WAIrB,IAAVQ,SACc,IAAZR,EAAK,KAGdA,EAAK,GAAK,SAAStH,OAAOsH,EAAK,GAAGhJ,OAAS,EAAI,IAAI0B,OAAOsH,EAAK,IAAM,GAAI,MAAMtH,OAAOsH,EAAK,GAAI,MAF/FA,EAAK,GAAKQ,GAOVH,IACGL,EAAK,IAGRA,EAAK,GAAK,UAAUtH,OAAOsH,EAAK,GAAI,MAAMtH,OAAOsH,EAAK,GAAI,KAC1DA,EAAK,GAAKK,GAHVL,EAAK,GAAKK,GAOVE,IACGP,EAAK,IAGRA,EAAK,GAAK,cAActH,OAAOsH,EAAK,GAAI,OAAOtH,OAAOsH,EAAK,GAAI,KAC/DA,EAAK,GAAKO,GAHVP,EAAK,GAAK,GAAGtH,OAAO6H,IAOxBT,EAAKhI,KAAKkI,MAIPF,I,uBClGThG,EAAOC,QAAU,SAAUiG,GACzB,IAAIC,EAAUD,EAAK,GACfY,EAAaZ,EAAK,GAEtB,IAAKY,EACH,OAAOX,EAGT,GAAoB,mBAATY,KAAqB,CAC9B,IAAIC,EAASD,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUN,MACzDO,EAAO,+DAA+DzI,OAAOoI,GAC7EM,EAAgB,OAAO1I,OAAOyI,EAAM,OACpCE,EAAaT,EAAWU,QAAQ1C,KAAI,SAAU2C,GAChD,MAAO,iBAAiB7I,OAAOkI,EAAWY,YAAc,IAAI9I,OAAO6I,EAAQ,UAE7E,MAAO,CAACtB,GAASvH,OAAO2I,GAAY3I,OAAO,CAAC0I,IAAgBjB,KAAK,MAGnE,MAAO,CAACF,GAASE,KAAK,Q,6BCpBxB,IAAIsB,EAAWlI,OAAOzD,OAClB4L,EAAYnI,OAAOvB,eACnB2J,EAAapI,OAAOqI,iBACpBC,EAAmBtI,OAAOuI,yBAC1BC,EAAoBxI,OAAOyI,0BAC3BC,EAAoB1I,OAAO2I,oBAC3BC,EAAsB5I,OAAO6I,sBAC7BC,EAAe9I,OAAO+I,eACtBC,EAAehJ,OAAOiE,UAAUgF,eAChCC,EAAelJ,OAAOiE,UAAUkF,qBAChCC,EAAkB,CAACC,EAAKzE,EAAK/F,IAAU+F,KAAOyE,EAAMlB,EAAUkB,EAAKzE,EAAK,CAAEjG,YAAY,EAAMD,cAAc,EAAM4K,UAAU,EAAMzK,UAAWwK,EAAIzE,GAAO/F,EACtJ0K,EAAiB,CAACjE,EAAGkE,KACvB,IAAK,IAAIC,KAAQD,IAAMA,EAAI,IACrBR,EAAaU,KAAKF,EAAGC,IACvBL,EAAgB9D,EAAGmE,EAAMD,EAAEC,IAC/B,GAAIb,EACF,IAAK,IAAIa,KAAQb,EAAoBY,GAC/BN,EAAaQ,KAAKF,EAAGC,IACvBL,EAAgB9D,EAAGmE,EAAMD,EAAEC,IAEjC,OAAOnE,GAELqE,EAAgB,CAACrE,EAAGkE,IAAMpB,EAAW9C,EAAGkD,EAAkBgB,IAE1DI,EAAa,CAACC,EAAIC,IAAQ,WAC5B,OAAOA,IAAO,EAAID,EAAGnB,EAAkBmB,GAAI,MAAMC,EAAM,CAAEtJ,QAAS,KAAMA,QAASsJ,GAAMA,EAAItJ,SAUzFuJ,EAAU,CAACxJ,EAAQyJ,KACrB,MATe,EAACC,EAAQ1J,EAAQ2J,EAAaC,KAC7C,GAAI5J,GAA4B,iBAAXA,GAAyC,mBAAXA,EACjD,IAAK,IAAIqE,KAAO8D,EAAkBnI,GAC3ByI,EAAaU,KAAKO,EAAQrF,IAAgC,YAARA,GACrDuD,EAAU8B,EAAQrF,EAAK,CAAE7F,IAAK,IAAMwB,EAAOqE,GAAMjG,aAAcwL,EAAO7B,EAAiB/H,EAAQqE,KAASuF,EAAKxL,aAEnH,OAAOsL,GAGAG,EAbaH,EAaa9B,EAAoB,MAAV5H,EAAiB2H,EAASY,EAAavI,IAAW,GAAI,WAAYyJ,GAAczJ,GAAUA,EAAO8J,WAAa,CAAEtL,IAAK,IAAMwB,EAAO+J,QAAS3L,YAAY,GAAS,CAAEE,MAAO0B,EAAQ5B,YAAY,IAbzMwJ,EAAU8B,EAAQ,aAAc,CAAEpL,OAAO,KAa0K0B,GAb/N,IAAC0J,GAelBM,EAAU,CAACC,EAAQC,EAAaC,IAC3B,IAAIC,SAAQ,CAACC,EAASC,KAC3B,IAAIC,EAAajM,IACf,IACEkM,EAAKL,EAAUM,KAAKnM,IACpB,MAAOoM,GACPJ,EAAOI,KAGPC,EAAYrM,IACd,IACEkM,EAAKL,EAAUS,MAAMtM,IACrB,MAAOoM,GACPJ,EAAOI,KAGPF,EAAQK,GAAMA,EAAEC,KAAOT,EAAQQ,EAAEvM,OAAS8L,QAAQC,QAAQQ,EAAEvM,OAAOyM,KAAKR,EAAWI,GACvFH,GAAML,EAAYA,EAAUa,MAAMf,EAAQC,IAAcO,WAKxDQ,EAAwB5B,EAAW,CACrC,yDAAyDpJ,EAASD,GAChE,IAAIkL,EAAiB,GACrBA,EAAeC,eAAiB,WAC9B,IAEE,OADA,IAAIC,KAAK,KACF,EACP,MAAOV,GACP,OAAO,GALqB,GAQhCQ,EAAeG,oBAAsBH,EAAeC,gBAAkB,WACpE,IACE,OAA+C,IAAxC,IAAIC,KAAK,CAAC,IAAIE,WAAW,MAAMC,KACtC,MAAOb,GACP,OAAO,GAJ2D,GAOtE1K,EAAOC,QAAQiL,eAAiBA,EAChC,IAAIM,EAAcxL,EAAOC,QAAQuL,YAIjC,SAASC,IACP9M,KAAK+M,QAAU,GACf/M,KAAKgN,OAAS,GALM,oBAAXC,SACTJ,EAAcxL,EAAOC,QAAQuL,YAAcI,OAAOC,mBAAqBD,OAAOE,gBAAkBF,OAAOG,eAAiBH,OAAOJ,aAMjIC,EAAc/H,UAAUsI,OAAS,SAAS3E,GACpB,iBAATA,EACT1I,KAAK+M,QAAQ1N,KAAKqJ,IAElB1I,KAAKsN,QACLtN,KAAKgN,OAAO3N,KAAKqJ,KAGrBoE,EAAc/H,UAAUuI,MAAQ,WAC9B,GAAItN,KAAK+M,QAAQxO,OAAS,EAAG,CAC3B,IAAIgP,EAAM,IAAIZ,WAAW3M,KAAK+M,SACzBR,EAAeG,qBAClBa,EAAMA,EAAIC,QAEZxN,KAAKgN,OAAO3N,KAAKkO,GACjBvN,KAAK+M,QAAU,KAGnBD,EAAc/H,UAAU0I,UAAY,WAElC,GADAzN,KAAKsN,QACDf,EAAeC,eAAgB,CAEjC,IADA,IAAIkB,EAAU,IAAIb,EACT/G,EAAI,EAAG6H,EAAK3N,KAAKgN,OAAOzO,OAAQuH,EAAI6H,EAAI7H,IAC/C4H,EAAQL,OAAOrN,KAAKgN,OAAOlH,IAE7B,OAAO4H,EAAQE,UAEf,OAAO,IAAInB,KAAKzM,KAAKgN,SAGzB3L,EAAOC,QAAQwL,cAAgBA,KAK/Be,EAAqBnD,EAAW,CAClC,sDAAsDpJ,EAASD,GAC7D,IAAIyL,EAAgBR,IAAwBQ,cACxCP,EAAiBD,IAAwBC,eACzCuB,EAAc,CAChBC,OAAQ,SAASrF,GAEf,OADe,IAAIsF,EAAStF,GACZqF,UAElBE,KAAM,SAASvF,GACb,IAAIwF,EAAS,IAAIC,EAGjB,OAFAD,EAAOD,KAAKvF,GACCwF,EAAOT,cAKxB,SAASO,EAAStF,GAChB1I,KAAKoO,MAAQ,EACbpO,KAAKqO,WAAa3F,EAClB1I,KAAKsO,SAAW,IAAI3B,WAAW3M,KAAKqO,YACpCrO,KAAKzB,OAASyB,KAAKqO,WAAWE,WAiMhC,SAASJ,IACPnO,KAAKwO,cAAgB,IAAI1B,EAiO3B,SAAS2B,EAAaC,GACpB,IAAI7J,EAAO6J,EAAEC,WAAW,GACxB,OAAI9J,GAAQ,KACH,KACLA,GAAQ,MACH,MACLA,GAAQ,QACH,OACLA,GAAQ,SACH,QACF,SAlbTxD,EAAOC,QAAUwM,EAOjBE,EAASjJ,UAAUgJ,OAAS,WAC1B,IAMInB,EANA/N,EAAOmB,KAAK4O,eAChB,GAAI/P,EAAO,IACT,OAAOA,EACF,IAAY,IAAPA,GAAc,GACxB,OAAe,IAAPA,GAAc,GAGxB,IAAK+N,EAAc,IAAP/N,IAAe,GACzB,OAAOmB,KAAK6O,WAAWjC,GAClB,IAAKA,EAAc,IAAP/N,IAAe,GAChC,OAAOmB,KAAK8O,cAAclC,GACrB,IAAKA,EAAc,IAAP/N,IAAe,GAChC,OAAOmB,KAAK+O,aAAanC,GACpB,IAAKA,EAAc,IAAP/N,IAAe,GAChC,OAAOmB,KAAKgP,WAAWpC,GAEzB,OAAQ/N,GACN,KAAK,IACH,OAAO,KACT,KAAK,IA0BL,KAAK,IAEL,KAAK,IAEL,KAAK,IAEL,KAAK,IACH,OA/BF,KAAK,IACH,OAAO,EACT,KAAK,IACH,OAAO,EACT,KAAK,IACH,OAAOmB,KAAKiP,eACd,KAAK,IACH,OAAOjP,KAAKkP,gBACd,KAAK,IACH,OAAOlP,KAAK4O,eACd,KAAK,IACH,OAAO5O,KAAKmP,gBACd,KAAK,IACH,OAAOnP,KAAKoP,gBACd,KAAK,IACH,OAAOpP,KAAKqP,gBACd,KAAK,IACH,OAAOrP,KAAKsP,cACd,KAAK,IACH,OAAOtP,KAAKuP,eACd,KAAK,IACH,OAAOvP,KAAKwP,eACd,KAAK,IACH,OAAOxP,KAAKyP,eASd,KAAK,IAEH,OADA7C,EAAO5M,KAAKmP,gBACLnP,KAAK8O,cAAclC,GAC5B,KAAK,IAEH,OADAA,EAAO5M,KAAKoP,gBACLpP,KAAK8O,cAAclC,GAC5B,KAAK,IAEH,OADAA,EAAO5M,KAAKmP,gBACLnP,KAAK6O,WAAWjC,GACzB,KAAK,IAEH,OADAA,EAAO5M,KAAKoP,gBACLpP,KAAK6O,WAAWjC,GACzB,KAAK,IAEH,OADAA,EAAO5M,KAAKmP,gBACLnP,KAAK+O,aAAanC,GAC3B,KAAK,IAEH,OADAA,EAAO5M,KAAKoP,gBACLpP,KAAK+O,aAAanC,GAC3B,KAAK,IAEH,OADAA,EAAO5M,KAAKmP,gBACLnP,KAAKgP,WAAWpC,GACzB,KAAK,IAEH,OADAA,EAAO5M,KAAKoP,gBACLpP,KAAKgP,WAAWpC,KAG7BoB,EAASjJ,UAAU6J,aAAe,WAChC,IAAIc,EAAmC,IAA5B1P,KAAKsO,SAAStO,KAAKoO,OAE9B,OADApO,KAAKoO,QACEsB,GAET1B,EAASjJ,UAAUoK,cAAgB,WACjC,IAAIQ,EAAQ3P,KAAK4P,KAAK,GAClBC,EAA4B,KAAP,IAAXF,EAAM,KAA8B,IAAXA,EAAM,IAE7C,OADA3P,KAAKoO,OAAS,EACPyB,GAET7B,EAASjJ,UAAUqK,cAAgB,WACjC,IAAIO,EAAQ3P,KAAK4P,KAAK,GAClBE,EAA0D,KAAlB,KAAlB,IAAXH,EAAM,GAAWA,EAAM,IAAYA,EAAM,IAAYA,EAAM,GAE1E,OADA3P,KAAKoO,OAAS,EACP0B,GAET9B,EAASjJ,UAAUsK,cAAgB,WACjC,IAAIM,EAAQ3P,KAAK4P,KAAK,GAClBG,EAAsI,KAAlB,KAAlB,KAAlB,KAAlB,KAAlB,KAAlB,IAAXJ,EAAM,GAAWA,EAAM,IAAYA,EAAM,IAAYA,EAAM,IAAYA,EAAM,IAAYA,EAAM,IAAYA,EAAM,IAAYA,EAAM,GAEtJ,OADA3P,KAAKoO,OAAS,EACP2B,GAET/B,EAASjJ,UAAUuK,YAAc,WAC/B,IAAIU,EAAQhQ,KAAK4O,eACjB,OAAOoB,EAAQ,IAAMA,EAAQA,EAAQ,KAEvChC,EAASjJ,UAAUwK,aAAe,WAChC,IAAIM,EAAS7P,KAAKmP,gBAClB,OAAOU,EAAS,MAAQA,EAASA,EAAS,OAE5C7B,EAASjJ,UAAUyK,aAAe,WAChC,IAAIM,EAAS9P,KAAKoP,gBAClB,OAAOU,EAASG,KAAKC,IAAI,EAAG,IAAMJ,EAASA,EAASG,KAAKC,IAAI,EAAG,KAElElC,EAASjJ,UAAU0K,aAAe,WAChC,IAAIM,EAAS/P,KAAKqP,gBAClB,OAAOU,EAASE,KAAKC,IAAI,EAAG,IAAMH,EAASA,EAASE,KAAKC,IAAI,EAAG,KAElElC,EAASjJ,UAAU8J,WAAa,SAASjC,GACvC,GAAI5M,KAAKzB,OAASyB,KAAKoO,MAAQxB,EAC7B,MAAM,IAAIlI,MAAM,4CAA8C1E,KAAKoO,MAAQ,IAAMxB,EAAO,IAAM5M,KAAKzB,QAErG,IAAIgP,EAAMvN,KAAKqO,WAAWlJ,MAAMnF,KAAKoO,MAAOpO,KAAKoO,MAAQxB,GAEzD,OADA5M,KAAKoO,OAASxB,EACPW,GAETS,EAASjJ,UAAU+J,cAAgB,SAASlC,GAM1C,IALA,IAGIuD,EACAtL,EAJA8K,EAAQ3P,KAAK4P,KAAKhD,GAClB9G,EAAI,EACJ3H,EAAM,GAGH2H,EAAI8G,IACTuD,EAAIR,EAAM7J,IACF,KACN3H,GAAOiS,OAAOC,aAAaF,GAC3BrK,MACc,IAAJqK,GAAW,IACrBtL,GAAY,IAAJsL,IAAY,EAAmB,GAAfR,EAAM7J,EAAI,GAClC3H,GAAOiS,OAAOC,aAAaxL,GAC3BiB,GAAK,IAELjB,GAAY,GAAJsL,IAAW,IAAqB,GAAfR,EAAM7J,EAAI,KAAY,EAAmB,GAAf6J,EAAM7J,EAAI,GAC7D3H,GAAOiS,OAAOC,aAAaxL,GAC3BiB,GAAK,GAIT,OADA9F,KAAKoO,OAASxB,EACPzO,GAET6P,EAASjJ,UAAUgK,aAAe,SAASnC,GAEzC,IADA,IAAI0D,EAAU,IAAI1P,MAAMgM,GACf9G,EAAI,EAAGA,EAAI8G,EAAM9G,IACxBwK,EAAQxK,GAAK9F,KAAK+N,SAEpB,OAAOuC,GAETtC,EAASjJ,UAAUiK,WAAa,SAASpC,GAEvC,IADA,IAAIzG,EAAM,GACDL,EAAI,EAAGA,EAAI8G,EAAM9G,IAAK,CAC7B,IAAIJ,EAAM1F,KAAK+N,SACXpO,EAAQK,KAAK+N,SACjB5H,EAAIT,GAAO/F,EAEb,OAAOwG,GAET6H,EAASjJ,UAAUkK,aAAe,WAChC,IAAIa,EAAS9P,KAAKoP,gBAEdmB,GAAOT,GAAU,GAAK,KAAO,IAEjC,OAAiB,GAHNA,GAAU,GAGA,GAAK,IADF,QAATA,EAAmB,SACQG,KAAKC,IAAI,EAAGK,EAAM,KAE9DvC,EAASjJ,UAAUmK,cAAgB,WACjC,IAAIsB,EAAMxQ,KAAKoP,gBACXqB,EAAMzQ,KAAKoP,gBAEXmB,GAAOC,GAAO,GAAK,MAAQ,KAG/B,OAAiB,GAJNA,GAAO,GAIG,GAAK,KAFR,QAANA,EAAgB,SACTP,KAAKC,IAAI,EAAGK,EAAM,IAAME,EAAMR,KAAKC,IAAI,EAAGK,EAAM,MAGrEvC,EAASjJ,UAAU6K,KAAO,SAASrR,GACjC,IAAI8H,EAAIrG,KAAKoO,MACb,GAAI/H,EAAI9H,GAAUyB,KAAKzB,OACrB,OAAOyB,KAAKsO,SAASoC,SAASrK,EAAGA,EAAI9H,GAErC,MAAM,IAAImG,MAAM,+CAMpByJ,EAAOpJ,UAAU0I,UAAY,WAC3B,OAAOzN,KAAKwO,cAAcf,aAE5BU,EAAOpJ,UAAUkJ,KAAO,SAAStO,GAC/B,IAAId,SAAcc,EAClB,GAAa,WAATd,EACFmB,KAAK2Q,YAAYhR,QACZ,GAAa,WAATd,EACLoR,KAAKW,MAAMjR,KAAWA,EACxBK,KAAK6Q,aAAalR,GAElBK,KAAK8Q,YAAYnR,QAEd,GAAa,YAATd,GACK,IAAVc,EACFK,KAAKwO,cAAcnB,OAAO,MACP,IAAV1N,GACTK,KAAKwO,cAAcnB,OAAO,UAEvB,GAAa,cAATxO,EACTmB,KAAKwO,cAAcnB,OAAO,SACrB,IAAa,WAATxO,EAgCT,MAAM,IAAI6F,MAAM,SAAW7F,EAAO,uBA/BlC,GAAc,OAAVc,EACFK,KAAKwO,cAAcnB,OAAO,SACrB,CACL,IAAI1I,EAAchF,EAAMgF,YACxB,GAAIA,GAAe/D,MACjBZ,KAAK+Q,WAAWpR,QACX,GAAIgF,GAAe8H,MAAQ9H,GAAeqM,MAAQrR,aAAiB8M,MAAQ9M,aAAiBqR,KACjGhR,KAAKiR,SAAStR,QACT,GAAIgF,GAAeuM,YACpB3E,EAAeG,mBACjB1M,KAAKiR,SAAS,IAAItE,WAAWhN,IAE7BK,KAAKiR,SAAStR,QAEX,GAAI,sBAAuBA,EAC5B4M,EAAeG,mBACjB1M,KAAKiR,SAAS,IAAItE,WAAWhN,EAAM6N,SAEnCxN,KAAKiR,SAAStR,EAAM6N,aAEjB,GAAI7I,GAAe7D,QAAU6D,EAAY2C,WAAW6J,WAAW,SACpEnR,KAAKoR,YAAYzR,QACZ,GAAIgF,GAAe0M,KACxBrR,KAAK2Q,YAAYhR,EAAM2H,gBAClB,IAAkC,mBAAvB3H,EAAM2R,aAGtB,MAAM,IAAI5M,MAAM,SAAWC,EAAY2C,WAAa,uBAFpDtH,KAAKwO,cAAcnB,OAAO1N,EAAM2R,kBAQtCtR,KAAKwO,cAAclB,SAErBa,EAAOpJ,UAAUkM,SAAW,SAASM,GACnC,IAAIhT,EAASgT,EAAKhT,QAAUgT,EAAKhD,YAAcgD,EAAK3E,KACpD,GAAIrO,GAAU,GACZyB,KAAKwR,WAAW,IAAMjT,QACjB,GAAIA,GAAU,MACnByB,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKyR,YAAYlT,OACZ,MAAIA,GAAU,YAInB,MAAM,IAAImG,MAAM,kBAHhB1E,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK0R,YAAYnT,GAInByB,KAAKwO,cAAcnB,OAAOkE,IAE5BpD,EAAOpJ,UAAU4L,YAAc,SAASxS,GACtC,IAAII,EAkKN,SAAoBJ,GAClB,OAAIA,EAAII,OAAS,IACR,IAAIkO,KAAK,CAACtO,IAAMyO,KAEhBzO,EAAIe,QAAQ,oBAAqBuP,GAAclQ,OAtK3CoT,CAAWxT,GACxB,GAAII,GAAU,GACZyB,KAAKwR,WAAW,IAAMjT,QACjB,GAAIA,GAAU,MACnByB,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKyR,YAAYlT,OACZ,MAAIA,GAAU,YAInB,MAAM,IAAImG,MAAM,kBAHhB1E,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK0R,YAAYnT,GAInByB,KAAKwO,cAAcnB,OAAOlP,IAE5BgQ,EAAOpJ,UAAUgM,WAAa,SAASa,GACrC,IAAIrT,EAASqT,EAAIrT,OACjB,GAAIA,GAAU,GACZyB,KAAKwR,WAAW,IAAMjT,QACjB,GAAIA,GAAU,MACnByB,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKyR,YAAYlT,OACZ,MAAIA,GAAU,YAInB,MAAM,IAAImG,MAAM,kBAHhB1E,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK0R,YAAYnT,GAInB,IAAK,IAAIuH,EAAI,EAAGA,EAAIvH,EAAQuH,IAC1B9F,KAAKiO,KAAK2D,EAAI9L,KAGlBqI,EAAOpJ,UAAU8L,aAAe,SAASgB,GACvC,GAAIA,IAAQ,IAAMA,GAAO,IACvB7R,KAAKwO,cAAcnB,OAAa,IAANwE,QACrB,GAAIA,GAAO,GAAKA,GAAO,IAC5B7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKwR,WAAWK,QACX,GAAIA,IAAQ,KAAOA,GAAO,IAC/B7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK8R,UAAUD,QACV,GAAIA,GAAO,GAAKA,GAAO,MAC5B7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKyR,YAAYI,QACZ,GAAIA,IAAQ,OAASA,GAAO,MACjC7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK+R,WAAWF,QACX,GAAIA,GAAO,GAAKA,GAAO,WAC5B7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK0R,YAAYG,QACZ,GAAIA,IAAQ,YAAcA,GAAO,WACtC7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKgS,WAAWH,QACX,GAAIA,IAAQ,oBAAsBA,GAAO,mBAC9C7R,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKiS,WAAWJ,OACX,MAAIA,GAAO,GAAKA,GAAO,qBAI5B,MAAM,IAAInN,MAAM,mBAHhB1E,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKkS,YAAYL,KAKrB1D,EAAOpJ,UAAU+L,YAAc,SAASe,GACtC,IAAIM,EAAO,EACPN,EAAM,IACRM,EAAO,EACPN,GAAOA,GAET,IAAItB,EAAMN,KAAKW,MAAMX,KAAKmC,IAAIP,GAAO5B,KAAKoC,KACtCC,EAAQT,EAAM5B,KAAKC,IAAI,EAAGK,GAAO,EACjCgC,EAAQtC,KAAKW,MAAM0B,EAAQrC,KAAKC,IAAI,EAAG,KACvCsC,EAAMvC,KAAKC,IAAI,EAAG,IAClBM,EAAM2B,GAAQ,GAAK5B,EAAM,MAAQ,GAAKgC,EAAQC,EAAM,QACpD/B,EAAM8B,EAAQC,EAClBxS,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKgS,WAAWxB,GAChBxQ,KAAKgS,WAAWvB,IAElBtC,EAAOpJ,UAAUqM,YAAc,SAASjH,GACtC,IACI5L,EADOuC,OAAOjD,KAAKsM,GACL5L,OAClB,GAAIA,GAAU,GACZyB,KAAKwR,WAAW,IAAMjT,QACjB,GAAIA,GAAU,MACnByB,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAKyR,YAAYlT,OACZ,MAAIA,GAAU,YAInB,MAAM,IAAImG,MAAM,kBAHhB1E,KAAKwO,cAAcnB,OAAO,KAC1BrN,KAAK0R,YAAYnT,GAInB,IAAK,IAAIgM,KAAQJ,EACXA,EAAIJ,eAAeQ,KACrBvK,KAAKiO,KAAK1D,GACVvK,KAAKiO,KAAK9D,EAAII,MAIpB4D,EAAOpJ,UAAUyM,WAAa,SAASK,GACrC7R,KAAKwO,cAAcnB,OAAOwE,IAE5B1D,EAAOpJ,UAAU0M,YAAc,SAASI,GACtC7R,KAAKwO,cAAcnB,OAAOwE,GAAO,GACjC7R,KAAKwO,cAAcnB,OAAa,IAANwE,IAE5B1D,EAAOpJ,UAAU2M,YAAc,SAASG,GACtC,IAAIvT,EAAU,WAANuT,EACR7R,KAAKwO,cAAcnB,QAAY,WAAJ/O,KAAoB,IAC/C0B,KAAKwO,cAAcnB,QAAY,SAAJ/O,KAAkB,IAC7C0B,KAAKwO,cAAcnB,QAAY,MAAJ/O,KAAe,GAC1C0B,KAAKwO,cAAcnB,OAAW,IAAJ/O,IAE5B6P,EAAOpJ,UAAUmN,YAAc,SAASL,GACtC,IAAIY,EAAOZ,EAAM5B,KAAKC,IAAI,EAAG,IACzBwC,EAAMb,EAAM5B,KAAKC,IAAI,EAAG,IAC5BlQ,KAAKwO,cAAcnB,QAAe,WAAPoF,KAAuB,IAClDzS,KAAKwO,cAAcnB,QAAe,SAAPoF,KAAqB,IAChDzS,KAAKwO,cAAcnB,QAAe,MAAPoF,KAAkB,GAC7CzS,KAAKwO,cAAcnB,OAAc,IAAPoF,GAC1BzS,KAAKwO,cAAcnB,QAAc,WAANqF,KAAsB,IACjD1S,KAAKwO,cAAcnB,QAAc,SAANqF,KAAoB,IAC/C1S,KAAKwO,cAAcnB,QAAc,MAANqF,KAAiB,GAC5C1S,KAAKwO,cAAcnB,OAAa,IAANqF,IAE5BvE,EAAOpJ,UAAU+M,UAAY,SAASD,GACpC7R,KAAKwO,cAAcnB,OAAa,IAANwE,IAE5B1D,EAAOpJ,UAAUgN,WAAa,SAASF,GACrC7R,KAAKwO,cAAcnB,QAAc,MAANwE,IAAgB,GAC3C7R,KAAKwO,cAAcnB,OAAa,IAANwE,IAE5B1D,EAAOpJ,UAAUiN,WAAa,SAASH,GACrC7R,KAAKwO,cAAcnB,OAAOwE,IAAQ,GAAK,KACvC7R,KAAKwO,cAAcnB,QAAc,SAANwE,KAAoB,IAC/C7R,KAAKwO,cAAcnB,QAAc,MAANwE,KAAiB,GAC5C7R,KAAKwO,cAAcnB,OAAa,IAANwE,IAE5B1D,EAAOpJ,UAAUkN,WAAa,SAASJ,GACrC,IAAIY,EAAOxC,KAAKW,MAAMiB,EAAM5B,KAAKC,IAAI,EAAG,KACpCwC,EAAMb,EAAM5B,KAAKC,IAAI,EAAG,IAC5BlQ,KAAKwO,cAAcnB,QAAe,WAAPoF,KAAuB,IAClDzS,KAAKwO,cAAcnB,QAAe,SAAPoF,KAAqB,IAChDzS,KAAKwO,cAAcnB,QAAe,MAAPoF,KAAkB,GAC7CzS,KAAKwO,cAAcnB,OAAc,IAAPoF,GAC1BzS,KAAKwO,cAAcnB,QAAc,WAANqF,KAAsB,IACjD1S,KAAKwO,cAAcnB,QAAc,SAANqF,KAAoB,IAC/C1S,KAAKwO,cAAcnB,QAAc,MAANqF,KAAiB,GAC5C1S,KAAKwO,cAAcnB,OAAa,IAANqF,OAyB5BC,EAAwBjI,EAAW,CACrC,sCAAsCpJ,EAASD,GAE7C,IAAIuR,EAAM9R,OAAOiE,UAAUgF,eACvB8I,EAAS,IACb,SAASC,KAOT,SAASC,EAAGxS,EAAIyS,EAASC,GACvBjT,KAAKO,GAAKA,EACVP,KAAKgT,QAAUA,EACfhT,KAAKiT,KAAOA,IAAQ,EAEtB,SAASC,EAAYC,EAASC,EAAO7S,EAAIyS,EAASC,GAChD,GAAkB,mBAAP1S,EACT,MAAM,IAAIC,UAAU,mCAEtB,IAAI6S,EAAW,IAAIN,EAAGxS,EAAIyS,GAAWG,EAASF,GAAOK,EAAMT,EAASA,EAASO,EAAQA,EAOrF,OANKD,EAAQI,QAAQD,GAEXH,EAAQI,QAAQD,GAAK/S,GAG7B4S,EAAQI,QAAQD,GAAO,CAACH,EAAQI,QAAQD,GAAMD,GAF9CF,EAAQI,QAAQD,GAAKjU,KAAKgU,IAF1BF,EAAQI,QAAQD,GAAOD,EAAUF,EAAQK,gBAKpCL,EAET,SAASM,EAAWN,EAASG,GACI,KAAzBH,EAAQK,aACZL,EAAQI,QAAU,IAAIT,SAEfK,EAAQI,QAAQD,GAE3B,SAASI,IACP1T,KAAKuT,QAAU,IAAIT,EACnB9S,KAAKwT,aAAe,EA/BlB1S,OAAOzD,SACTyV,EAAO/N,UAA4BjE,OAAOzD,OAAO,OAC5C,IAAIyV,GAASa,YAChBd,GAAS,IA8Bba,EAAc3O,UAAU6O,WAAa,WACnC,IAAgBC,EAAQlV,EAApBmV,EAAQ,GACZ,GAA0B,IAAtB9T,KAAKwT,aACP,OAAOM,EACT,IAAKnV,KAAQkV,EAAS7T,KAAKuT,QACrBX,EAAIpI,KAAKqJ,EAAQlV,IACnBmV,EAAMzU,KAAKwT,EAASlU,EAAKwG,MAAM,GAAKxG,GAExC,OAAImC,OAAO6I,sBACFmK,EAAM7T,OAAOa,OAAO6I,sBAAsBkK,IAE5CC,GAETJ,EAAc3O,UAAUgP,UAAY,SAAmBX,GACrD,IAAIE,EAAMT,EAASA,EAASO,EAAQA,EAAO3N,EAAWzF,KAAKuT,QAAQD,GACnE,IAAK7N,EACH,MAAO,GACT,GAAIA,EAASlF,GACX,MAAO,CAACkF,EAASlF,IACnB,IAAK,IAAIuF,EAAI,EAAGkO,EAAIvO,EAASlH,OAAQ0V,EAAK,IAAIrT,MAAMoT,GAAIlO,EAAIkO,EAAGlO,IAC7DmO,EAAGnO,GAAKL,EAASK,GAAGvF,GAEtB,OAAO0T,GAETP,EAAc3O,UAAUmP,cAAgB,SAAuBd,GAC7D,IAAIE,EAAMT,EAASA,EAASO,EAAQA,EAAOW,EAAY/T,KAAKuT,QAAQD,GACpE,OAAKS,EAEDA,EAAUxT,GACL,EACFwT,EAAUxV,OAHR,GAKXmV,EAAc3O,UAAUoP,KAAO,SAAcf,EAAOgB,EAAIC,EAAIC,EAAIC,EAAIC,GAClE,IAAIlB,EAAMT,EAASA,EAASO,EAAQA,EACpC,IAAKpT,KAAKuT,QAAQD,GAChB,OAAO,EACT,IAA2DmB,EAAM3O,EAA7DiO,EAAY/T,KAAKuT,QAAQD,GAAMvN,EAAM2O,UAAUnW,OACnD,GAAIwV,EAAUxT,GAAI,CAGhB,OAFIwT,EAAUd,MACZjT,KAAK2U,eAAevB,EAAOW,EAAUxT,QAAI,GAAQ,GAC3CwF,GACN,KAAK,EACH,OAAOgO,EAAUxT,GAAGiK,KAAKuJ,EAAUf,UAAU,EAC/C,KAAK,EACH,OAAOe,EAAUxT,GAAGiK,KAAKuJ,EAAUf,QAASoB,IAAK,EACnD,KAAK,EACH,OAAOL,EAAUxT,GAAGiK,KAAKuJ,EAAUf,QAASoB,EAAIC,IAAK,EACvD,KAAK,EACH,OAAON,EAAUxT,GAAGiK,KAAKuJ,EAAUf,QAASoB,EAAIC,EAAIC,IAAK,EAC3D,KAAK,EACH,OAAOP,EAAUxT,GAAGiK,KAAKuJ,EAAUf,QAASoB,EAAIC,EAAIC,EAAIC,IAAK,EAC/D,KAAK,EACH,OAAOR,EAAUxT,GAAGiK,KAAKuJ,EAAUf,QAASoB,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAErE,IAAK1O,EAAI,EAAG2O,EAAO,IAAI7T,MAAMmF,EAAM,GAAID,EAAIC,EAAKD,IAC9C2O,EAAK3O,EAAI,GAAK4O,UAAU5O,GAE1BiO,EAAUxT,GAAG8L,MAAM0H,EAAUf,QAASyB,OACjC,CACL,IAA+BpO,EAA3B9H,EAASwV,EAAUxV,OACvB,IAAKuH,EAAI,EAAGA,EAAIvH,EAAQuH,IAGtB,OAFIiO,EAAUjO,GAAGmN,MACfjT,KAAK2U,eAAevB,EAAOW,EAAUjO,GAAGvF,QAAI,GAAQ,GAC9CwF,GACN,KAAK,EACHgO,EAAUjO,GAAGvF,GAAGiK,KAAKuJ,EAAUjO,GAAGkN,SAClC,MACF,KAAK,EACHe,EAAUjO,GAAGvF,GAAGiK,KAAKuJ,EAAUjO,GAAGkN,QAASoB,GAC3C,MACF,KAAK,EACHL,EAAUjO,GAAGvF,GAAGiK,KAAKuJ,EAAUjO,GAAGkN,QAASoB,EAAIC,GAC/C,MACF,KAAK,EACHN,EAAUjO,GAAGvF,GAAGiK,KAAKuJ,EAAUjO,GAAGkN,QAASoB,EAAIC,EAAIC,GACnD,MACF,QACE,IAAKG,EACH,IAAKpO,EAAI,EAAGoO,EAAO,IAAI7T,MAAMmF,EAAM,GAAIM,EAAIN,EAAKM,IAC9CoO,EAAKpO,EAAI,GAAKqO,UAAUrO,GAE5B0N,EAAUjO,GAAGvF,GAAG8L,MAAM0H,EAAUjO,GAAGkN,QAASyB,IAIpD,OAAO,GAETf,EAAc3O,UAAU6P,GAAK,SAAYxB,EAAO7S,EAAIyS,GAClD,OAAOE,EAAYlT,KAAMoT,EAAO7S,EAAIyS,GAAS,IAE/CU,EAAc3O,UAAUkO,KAAO,SAAcG,EAAO7S,EAAIyS,GACtD,OAAOE,EAAYlT,KAAMoT,EAAO7S,EAAIyS,GAAS,IAE/CU,EAAc3O,UAAU4P,eAAiB,SAAwBvB,EAAO7S,EAAIyS,EAASC,GACnF,IAAIK,EAAMT,EAASA,EAASO,EAAQA,EACpC,IAAKpT,KAAKuT,QAAQD,GAChB,OAAOtT,KACT,IAAKO,EAEH,OADAkT,EAAWzT,KAAMsT,GACVtT,KAET,IAAI+T,EAAY/T,KAAKuT,QAAQD,GAC7B,GAAIS,EAAUxT,GACRwT,EAAUxT,KAAOA,GAAQ0S,IAAQc,EAAUd,MAAWD,GAAWe,EAAUf,UAAYA,GACzFS,EAAWzT,KAAMsT,OAEd,CACL,IAAK,IAAIxN,EAAI,EAAG+N,EAAS,GAAItV,EAASwV,EAAUxV,OAAQuH,EAAIvH,EAAQuH,KAC9DiO,EAAUjO,GAAGvF,KAAOA,GAAM0S,IAASc,EAAUjO,GAAGmN,MAAQD,GAAWe,EAAUjO,GAAGkN,UAAYA,IAC9Fa,EAAOxU,KAAK0U,EAAUjO,IAGtB+N,EAAOtV,OACTyB,KAAKuT,QAAQD,GAAyB,IAAlBO,EAAOtV,OAAesV,EAAO,GAAKA,EAEtDJ,EAAWzT,KAAMsT,GAErB,OAAOtT,MAET0T,EAAc3O,UAAU8P,mBAAqB,SAA4BzB,GACvE,IAAIE,EASJ,OARIF,GACFE,EAAMT,EAASA,EAASO,EAAQA,EAC5BpT,KAAKuT,QAAQD,IACfG,EAAWzT,KAAMsT,KAEnBtT,KAAKuT,QAAU,IAAIT,EACnB9S,KAAKwT,aAAe,GAEfxT,MAET0T,EAAc3O,UAAU+P,IAAMpB,EAAc3O,UAAU4P,eACtDjB,EAAc3O,UAAUmO,YAAcQ,EAAc3O,UAAU6P,GAC9DlB,EAAcqB,SAAWlC,EACzBa,EAAcsB,aAAetB,OACP,IAAXrS,IACTA,EAAOC,QAAUoS,MAMnBuB,EAAapK,EAAQgD,KACrBqH,EAAiB,CACnBC,WAAY,CACV,CAAEC,KAAM,gCACR,CAAEA,KAAM,yBAA0BC,SAAU,SAAUC,WAAY,YAEpEC,aAAc,gBAEZC,EAAQ,IAAI,MACd7Q,cACE3E,KAAKyV,WAAa,eAClBzV,KAAK0V,WAAa,IAClB1V,KAAK2V,WAAa,MAClB3V,KAAK4V,cAAgBV,EACrBlV,KAAKiO,KAAOgH,EAAWhH,KACvBjO,KAAK+N,OAASkH,EAAWlH,OACzB/N,KAAK6V,WAAa,EAEpBC,WAAW5O,GACT,OAAQA,GAAM,uCAAuC5G,KAAK4G,GAE5D6O,MAAMxE,GACJ,MAAMyE,EAAS,GACTpJ,EAAO2E,EAAK3E,KACZqJ,EAAQhG,KAAKiG,KAAKtJ,EAAO4I,EAAMG,YACrC,IAAIvH,EAAQ,EACR+H,EAAQ,EACZ,KAAOA,EAAQvJ,GAAM,CACnB,MAAMwJ,EAAMnG,KAAKoG,IAAIzJ,EAAMuJ,EAAQX,EAAMG,YACnCrL,EAAIiH,EAAKpM,MAAMgR,EAAOC,GACtBL,EAAQ,CACZO,WAAYtW,KAAK6V,WACjBvX,EAAG8P,EACH1F,KAAM4B,EACN2L,SAEFD,EAAO3W,KAAK0W,GACZI,EAAQC,EACRhI,IAGF,OADApO,KAAK6V,aACEG,EAETO,kBAAkBC,EAAejF,EAAM5G,GACrC,MAAM8L,EAAK,IAAID,EAOf,OANAC,EAAGC,OAAS,SAASpD,GACfA,EAAIvI,QACNJ,EAAG2I,EAAIvI,OAAOzF,SAGlBmR,EAAGE,kBAAkBpF,GACdkF,EAETG,0BAA0BC,GACxB,MAAMC,EAAY,IAAInK,WAAWkK,EAAOtY,QACxC,IAAK,IAAIuH,EAAI,EAAGA,EAAI+Q,EAAOtY,OAAQuH,IACjCgR,EAAUhR,GAA4B,IAAvB+Q,EAAOlI,WAAW7I,GAEnC,OAAOgR,EAAUtJ,OAEnBuJ,cACE,OAAO9G,KAAK+G,SAAS1P,SAAS,IAAI2P,OAAO,GAE3CC,WACE,MAA6B,WAAtBC,SAASC,WAKhBC,EAAwBxM,EAAQ8H,KAgDhC2E,EAAiB,IA5CR,MACX3S,cACE3E,KAAKuX,UAAY,EAEfC,eACF,OAAOxX,KAAKuX,UAEVC,aAASA,GACXxX,KAAKuX,UAAYC,EAEnBpF,OAAOqC,GACDzU,KAAKuX,WAAa,GACpBvX,KAAKyX,OAAO,KAAgBhD,GAGhCiD,QAAQjD,GACFzU,KAAKuX,WAAa,GACpBvX,KAAKyX,OAAO,KAAqBhD,GAGrCkD,SAASlD,GACHzU,KAAKuX,WAAa,GACpBvX,KAAKyX,OAAO,KAAmBhD,GAGnCmD,eAAerX,GACbP,KAAKyX,OAASlX,EAEhBkX,OAAOD,KAAaK,GAClB,MAAMC,EAAO,CA9BA,cA8BgBD,GAC7B,IAAK,IAAI/R,KAAKgS,EACRA,EAAKhS,aAAcpB,QACrBoT,EAAKhS,GAAK,IAAMgS,EAAKhS,GAAGnH,KAAO,KAAOmZ,EAAKhS,GAAGiS,SAG9CP,GAAY,EACdQ,QAAQ5F,OAAO0F,GACNN,GAAY,EACrBQ,QAAQN,KAAK,aAAcI,GAClBN,GAAY,GACrBQ,QAAQL,MAAM,WAAYG,KAO5BG,EAAuBpN,EAAQ8H,KAC/BuF,EAAS,cAAcD,EAAqBjD,aAC9CrQ,aAAY,OAAEwT,EAAM,KAAEC,EAAI,KAAEC,EAAI,KAAEC,EAAI,IAAE5S,EAAG,aAAE6S,EAAe,IAAG,UAAEC,IAO/D,IAAIC,EANJ3T,QACA9E,KAAK0Y,eAAgB,EACrB1Y,KAAK2Y,IAAM,KACX3Y,KAAK4Y,eAAiB,GACtB5Y,KAAK6Y,OAAQ,EACb7Y,KAAK8Y,YAAa,EAElB9Y,KAAKuY,aAAeA,EACpB,MAAMQ,EAAaZ,EAAS,SAAW,QACvCnY,KAAKgZ,SAAWD,EAAaX,EAAO,IAAMC,EAAOC,EAAO,cAAgB5S,EACxE1F,KAAKiZ,qBAAkF,OAA1DR,EAAkB,MAAbD,OAAoB,EAASA,EAAUU,WAAqBT,EAAKxL,OAAOiM,UAExGC,oBACF,OAAOnZ,KAAK4Y,eAEVQ,gBACF,OAAOpZ,KAAK8Y,WAEd3C,MAAMjP,EAAImS,GACR,GAAIrZ,KAAK8Y,WACP,MAAM,IAAIpU,MAAM,yBAElB,GADA1E,KAAK2Y,IAAMzR,EACLlH,KAAKsZ,UAAYtZ,KAAK0Y,cAC1B,OAEF,MAAMa,EAAQ,GAAGvZ,KAAKgZ,eAAe9R,WAAYmS,IACjDrZ,KAAKsZ,QAAU,IAAItZ,KAAKiZ,qBAAqBM,GAC7CvZ,KAAK0Y,eAAgB,EACrB1Y,KAAKsZ,QAAQE,UAAapG,IACxB,GAAIpT,KAAK8Y,WACP,OACF,IAAIpQ,EACJ,IACEA,EAAOF,KAAKiR,MAAMrG,EAAM1K,MACxB4O,EAAelF,IAAI,2BAA4B1J,GAC/C,MAAOqD,GAEP,YADAuL,EAAelF,IAAI,yBAA0BgB,EAAM1K,MAGrD1I,KAAKmU,KAAK,UAAyBzL,IAErC1I,KAAKsZ,QAAQI,QAAWtG,IAClBpT,KAAK0Y,eAAiB1Y,KAAK8Y,aAG/BxB,EAAelF,IAAI,iBAAkBgB,GACrCpT,KAAK2Z,WACL3Z,KAAK0Y,eAAgB,EACrB1Y,KAAKmU,KAAK,kBAEZnU,KAAKsZ,QAAQM,OAAS,KAChB5Z,KAAK0Y,eAAiB1Y,KAAK8Y,aAG/BxB,EAAelF,IAAI,eACnBpS,KAAKmU,KAAK,QACVnU,KAAK6Z,sBACL7Z,KAAK8Z,uBAGTA,qBACE9Z,KAAK+Z,aAAeC,YAAW,KAC7Bha,KAAKia,mBACJja,KAAKuY,cAEV0B,iBACE,GAAIja,KAAK8Y,WACP,OACF,IAAK9Y,KAAKka,UAER,YADA5C,EAAelF,IAAI,gDAGrB,MAAM2F,EAAUvP,KAAKC,UAAU,CAAE5J,KAAM,cACvCmB,KAAKsZ,QAAQa,KAAKpC,GAClB/X,KAAK8Z,qBAEPI,UACE,QAASla,KAAKsZ,SAAuC,IAA5BtZ,KAAKsZ,QAAQc,WAExCP,sBACE,MAAMQ,EAAc,IAAIra,KAAK4Y,gBAC7B5Y,KAAK4Y,eAAiB,GACtB,IAAK,MAAMb,KAAWsC,EACpBra,KAAKma,KAAKpC,GAERsC,EAAY9b,OAAS,GACvB+Y,EAAelF,IAAI,GAAGiI,EAAY9b,mCAGtC4b,KAAKzR,GACH,GAAI1I,KAAK8Y,WACP,MAAM,IAAIpU,MAAM,yBAClB,IAAKgE,EAAK7J,KAER,YADAmB,KAAKmU,KAAK,QAAqB,mBAGjC,IAAKnU,KAAK6Y,MACR,OAEF,GAAgB,MAAZ7Y,KAAK2Y,MAAgB3Y,KAAKka,UAE5B,YADAla,KAAK4Y,eAAevZ,KAAKqJ,GAG3B,MAAMqP,EAAUvP,KAAKC,UAAUC,GAC/B1I,KAAKsZ,QAAQa,KAAKpC,GAEpBhZ,QACMiB,KAAK0Y,gBAGT1Y,KAAK2Z,WACL3Z,KAAK2Y,IAAM,KACX3Y,KAAK0Y,eAAgB,GAEvBiB,WACM3Z,KAAKsZ,UACPtZ,KAAKsZ,QAAQM,OAAS5Z,KAAKsZ,QAAQE,UAAYxZ,KAAKsZ,QAAQI,QAAU,KACtE1Z,KAAKsZ,QAAQva,QACbiB,KAAKsZ,aAAU,GAEjBgB,aAAata,KAAK+Z,cAEpBQ,UACMva,KAAK8Y,aAET9Y,KAAKjB,QACLiB,KAAK4Y,eAAera,OAAS,EAC7ByB,KAAK8Y,YAAa,KAKtB,SAAS7X,KAET,IAAIuZ,EAAa,MACf7V,YAAY8V,GACVza,KAAKya,WAAaA,EAEhBC,aACF,IAAIjC,EAAIkC,EACR,OAAgG,OAAxFA,EAA0D,OAApDlC,EAAKzY,KAAKya,WAAWG,SAASC,QAAQrC,gBAAqB,EAASC,EAAGqC,QAAkBH,EAAK1N,OAE9G8N,gBAAgBF,GACd,MAAMG,EAAiBhb,KAAKib,uBAK5B,GAJAjb,KAAKya,WAAWO,eAAiBA,EACJ,UAAzBhb,KAAKya,WAAW5b,MAAgCgc,EAAQK,SAC1Dlb,KAAKmb,uBAAuBN,EAAQK,QAASF,GAE3CH,EAAQO,WAAY,CACtB,GAA6B,SAAzBpb,KAAKya,WAAW5b,KAA4B,CAC9C,MAAMwc,EAAiBrb,KAAKya,WACtBa,EAAS,CAAEC,UAAWV,EAAQW,UAC9BC,EAAcT,EAAeU,kBAAkBL,EAAeM,MAAOL,GAC3ED,EAAeO,WAAWH,GAE5Bzb,KAAK6b,kBAEL7b,KAAK8b,UAAU,QAASjB,EAAQkB,KAGpCd,uBACE3D,EAAelF,IAAI,+BACnB,MACM4I,EAAiB,IAAIgB,EADfhc,KAAK0a,OAAOuB,mBACOjc,KAAKya,WAAWG,SAASC,QAAQS,QAEhE,OADAtb,KAAKkc,gBAAgBlB,GACdA,EAETkB,gBAAgBlB,GACd,MAAMmB,EAASnc,KAAKya,WAAW2B,KACzBC,EAAerc,KAAKya,WAAW4B,aAC/BC,EAAiBtc,KAAKya,WAAW5b,KACjC+b,EAAW5a,KAAKya,WAAWG,SACjCtD,EAAelF,IAAI,mEACnB4I,EAAeuB,eAAkBjJ,IAC1BA,EAAIkJ,WAAclJ,EAAIkJ,UAAUA,YAErClF,EAAelF,IAAI,+BAA+B+J,KAAW7I,EAAIkJ,WACjE5B,EAAS6B,OAAOtC,KAAK,CACnBtb,KAAM,YACN6d,QAAS,CACPF,UAAWlJ,EAAIkJ,UACf3d,KAAMyd,EACND,gBAEFM,IAAKR,MAGTnB,EAAe4B,2BAA6B,KAC1C,OAAQ5B,EAAe6B,oBACrB,IAAK,SACHvF,EAAelF,IAAI,wDAA0D+J,GAC7Enc,KAAKya,WAAWtG,KAAK,QAAqB,IAAIzP,MAAM,gCAAkCyX,EAAS,aAC/Fnc,KAAKya,WAAW1b,QAChB,MACF,IAAK,SACHuY,EAAelF,IAAI,wDAA0D+J,GAC7Enc,KAAKya,WAAWtG,KAAK,QAAqB,IAAIzP,MAAM,iBAAmByX,EAAS,aAChFnc,KAAKya,WAAW1b,QAChB,MACF,IAAK,YACHuY,EAAelF,IAAI,kEAAoE+J,GACvF,MACF,IAAK,eACH7E,EAAelF,IAAI,qEAAuE+J,GAC1F,MACF,IAAK,YACH7E,EAAelF,IAAI,kEAAoE+J,GACvFnB,EAAeuB,eAAiBtb,EAGpCjB,KAAKya,WAAWtG,KAAK,kBAAyC6G,EAAe6B,qBAE/E7B,EAAe8B,cAAiBxJ,IAC9BgE,EAAelF,IAAI,yBACnB,MAAMqJ,EAAcnI,EAAIyJ,QACLnC,EAASoC,cAAcb,EAAQE,GACvCT,WAAWH,IAExBT,EAAeiC,QAAW3J,IACxBgE,EAAelF,IAAI,0BACnB,MAAM8K,EAAS5J,EAAI6J,QAAQ,GACrB1C,EAAaG,EAASoC,cAAcb,EAAQE,GAClD,GAAwB,UAApB5B,EAAW5b,KAA8B,CAC3C,MAAMue,EAAkB3C,EACxBza,KAAKqd,4BAA4BH,EAAQE,KAI/CE,UACEhG,EAAelF,IAAI,iCAAmCpS,KAAKya,WAAW2B,MACtE,MAAMpB,EAAiBhb,KAAKya,WAAWO,eACvC,IAAKA,EACH,OAEFhb,KAAKya,WAAWO,eAAiB,KACjCA,EAAeuB,eAAiBvB,EAAe4B,2BAA6B5B,EAAe8B,cAAgB9B,EAAeiC,QAAU,KACpI,MAAMM,EAA4D,WAAlCvC,EAAewC,eAC/C,IAAIC,GAAuB,EAC3B,GAA6B,SAAzBzd,KAAKya,WAAW5b,KAA4B,CAC9C,MACM4c,EADiBzb,KAAKya,WACOgB,YAC/BA,IACFgC,IAAyBhC,EAAYrB,YAAyC,WAA3BqB,EAAYrB,aAG/DmD,GAA2BE,IAC7BzC,EAAejc,QAGnB8c,aACE,OAAOxQ,EAAQrL,KAAM,MAAM,YACzB,MAAMgb,EAAiBhb,KAAKya,WAAWO,eACjCJ,EAAW5a,KAAKya,WAAWG,SACjC,IACE,MAAM8C,QAAc1C,EAAe2C,YAAY3d,KAAKya,WAAWI,QAAQ+C,aACvE,GAAsC,WAAlC5C,EAAewC,eACjB,OACFlG,EAAelF,IAAI,kBACfpS,KAAKya,WAAWI,QAAQgD,cAAgE,mBAAzC7d,KAAKya,WAAWI,QAAQgD,eACzEH,EAAM3B,IAAM/b,KAAKya,WAAWI,QAAQgD,aAAaH,EAAM3B,MAAQ2B,EAAM3B,KAEvE,UACQf,EAAe8C,oBAAoBJ,GACzCpG,EAAelF,IAAI,wBAAyBsL,EAAO,OAAO1d,KAAKya,WAAW2B,QAC1E,IAAIM,EAAU,CACZX,IAAK2B,EACL7e,KAAMmB,KAAKya,WAAW5b,KACtBwd,aAAcrc,KAAKya,WAAW4B,aAC9B0B,SAAU/d,KAAKya,WAAWsD,UAE5B,GAA6B,SAAzB/d,KAAKya,WAAW5b,KAA4B,CAC9C,MAAMwc,EAAiBrb,KAAKya,WAC5BiC,EAAUjS,EAAcJ,EAAe,GAAIqS,GAAU,CACnDf,MAAON,EAAeM,MACtBH,SAAUH,EAAeG,SACzBwC,cAAe3C,EAAe2C,gBAGlCpD,EAAS6B,OAAOtC,KAAK,CACnBtb,KAAM,QACN6d,UACAC,IAAK3c,KAAKya,WAAW2B,OAEvB,MAAO6B,GACI,0FAAPA,IACFrD,EAASsD,UAAU,SAAuBD,GAC1C3G,EAAelF,IAAI,kCAAmC6L,KAG1D,MAAOE,GACPvD,EAASsD,UAAU,SAAuBC,GAC1C7G,EAAelF,IAAI,0BAA2B+L,OAIpDC,cACE,OAAO/S,EAAQrL,KAAM,MAAM,YACzB,MAAMgb,EAAiBhb,KAAKya,WAAWO,eACjCJ,EAAW5a,KAAKya,WAAWG,SACjC,IACE,MAAMyD,QAAerD,EAAesD,eACpC,GAAsC,WAAlCtD,EAAewC,eACjB,OACFlG,EAAelF,IAAI,mBACfpS,KAAKya,WAAWI,QAAQgD,cAAgE,mBAAzC7d,KAAKya,WAAWI,QAAQgD,eACzEQ,EAAOtC,IAAM/b,KAAKya,WAAWI,QAAQgD,aAAaQ,EAAOtC,MAAQsC,EAAOtC,KAE1E,UACQf,EAAe8C,oBAAoBO,GACzC/G,EAAelF,IAAI,wBAAyBiM,EAAQ,OAAOre,KAAKya,WAAW2B,QAC3ExB,EAAS6B,OAAOtC,KAAK,CACnBtb,KAAM,SACN6d,QAAS,CACPX,IAAKsC,EACLxf,KAAMmB,KAAKya,WAAW5b,KACtBwd,aAAcrc,KAAKya,WAAW4B,cAEhCM,IAAK3c,KAAKya,WAAW2B,OAEvB,MAAO6B,GACPrD,EAASsD,UAAU,SAAuBD,GAC1C3G,EAAelF,IAAI,kCAAmC6L,IAExD,MAAOE,GACPvD,EAASsD,UAAU,SAAuBC,GAC1C7G,EAAelF,IAAI,4BAA6B+L,OAItDrC,UAAUjd,EAAMkd,GACd,OAAO1Q,EAAQrL,KAAM,MAAM,YACzB,MAAMgc,EAAMhc,KAAK0a,OAAO6D,sBACxBxC,EAAM,IAAIC,EAAID,GACd,MAAMf,EAAiBhb,KAAKya,WAAWO,eACjCJ,EAAW5a,KAAKya,WAAWG,SACjCtD,EAAelF,IAAI,6BAA8B2J,GACjD,MAAMyC,EAAOxe,KACb,UACQgb,EAAeyD,qBAAqB1C,GAC1CzE,EAAelF,IAAI,yBAAyBvT,SAAYmB,KAAKya,WAAW2B,QAC3D,UAATvd,UACI2f,EAAKJ,eAEb,MAAOH,GACPrD,EAASsD,UAAU,SAAuBD,GAC1C3G,EAAelF,IAAI,mCAAoC6L,OAI7DS,gBAAgBC,GACd,OAAOtT,EAAQrL,KAAM,MAAM,YACzBsX,EAAelF,IAAI,mBAAoBuM,GACvC,MAAMnC,EAAYmC,EAAInC,UAChBoC,EAAgBD,EAAIC,cACpBC,EAASF,EAAIE,OACb7D,EAAiBhb,KAAKya,WAAWO,eACjCJ,EAAW5a,KAAKya,WAAWG,SACjC,IACE,MAAMoB,EAAMhc,KAAK0a,OAAOoE,sBAClB9D,EAAe+D,gBAAgB,IAAI/C,EAAI,CAC3C6C,SACAD,gBACApC,eAEFlF,EAAelF,IAAI,2BAA2BpS,KAAKya,WAAW2B,QAC9D,MAAO6B,GACPrD,EAASsD,UAAU,SAAuBD,GAC1C3G,EAAelF,IAAI,8BAA+B6L,OAIxD9C,uBAAuB+B,EAAQlC,GAE7B,GADA1D,EAAelF,IAAI,0BAA0B8K,EAAOhW,0BAC/C8T,EAAegE,SAClB,OAAO1H,EAAeK,MAAM,oEAE9BuF,EAAO+B,YAAYC,SAASC,IAC1BnE,EAAegE,SAASG,EAAOjC,MAGnCG,4BAA4BH,EAAQE,GAClC9F,EAAelF,IAAI,cAAc8K,EAAOhW,0BAA0BkW,EAAgBf,gBAClFe,EAAgBgC,UAAUlC,KAK1BmC,EAAwBxU,EAAQ8H,KAChC2M,EAAiB,cAAcD,EAAsBrK,aACvDrQ,YAAYyX,EAAMxB,EAAUC,GAC1B/V,QACA9E,KAAKoc,KAAOA,EACZpc,KAAK4a,SAAWA,EAChB5a,KAAK6a,QAAUA,EACf7a,KAAKuf,OAAQ,EACbvf,KAAK+d,SAAWlD,EAAQkD,SAEtBjf,WACF,OAAOkB,KAAKuf,QAKZC,EAAmB,cAAcF,EAC/BzgB,WACF,MAAO,QAEL4gB,kBACF,OAAOzf,KAAK0f,aAEVC,mBACF,OAAO3f,KAAK4f,cAEdjb,YAAYwX,EAAQvB,EAAUC,GAC5B/V,MAAMqX,EAAQvB,EAAUC,GACxB7a,KAAK0f,aAAe1f,KAAK6a,QAAQK,QACjClb,KAAKqc,aAAerc,KAAK6a,QAAQwB,cAAgBmD,EAAiBK,UAAYrK,EAAMuB,cACpF/W,KAAK8f,YAAc,IAAItF,EAAWxa,MAC9BA,KAAK0f,cACP1f,KAAK8f,YAAY/E,gBAAgB,CAC/BG,QAASlb,KAAK0f,aACdtE,YAAY,IAIlBgE,UAAUO,GACRrI,EAAelF,IAAI,mBAAoBuN,GACvC3f,KAAK4f,cAAgBD,EACrB7a,MAAMqP,KAAK,SAAuBwL,GAEpCI,cAAchI,GACZ,MAAMlZ,EAAOkZ,EAAQlZ,KACf6d,EAAU3E,EAAQ2E,QACxB,OAAQ3E,EAAQlZ,MACd,IAAK,SACHmB,KAAK8f,YAAYhE,UAAUjd,EAAM6d,EAAQX,KACzC/b,KAAKuf,OAAQ,EACb,MACF,IAAK,YACHvf,KAAK8f,YAAYpB,gBAAgBhC,EAAQF,WACzC,MACF,QACElF,EAAeI,KAAK,6BAA6B7Y,eAAkBmB,KAAKoc,SAI9EiC,OAAOnB,EAAQrC,EAAU,IACvB,GAAI7a,KAAK0f,aAEP,YADApI,EAAeI,KAAK,wFAGtB1X,KAAK0f,aAAexC,EAChBrC,GAAWA,EAAQgD,eACrB7d,KAAK6a,QAAQgD,aAAehD,EAAQgD,cAEtC7d,KAAK8f,YAAY/E,gBAAgBtQ,EAAcJ,EAAe,GAAIrK,KAAK6a,QAAQmF,UAAW,CAAE9E,QAASgC,KACrG,MAAM+C,EAAWjgB,KAAK4a,SAASsF,aAAalgB,KAAKqc,cACjD,IAAK,IAAItE,KAAWkI,EAClBjgB,KAAK+f,cAAchI,GAErB/X,KAAKuf,OAAQ,EAEfxgB,QACMiB,KAAK8f,cACP9f,KAAK8f,YAAYxC,UACjBtd,KAAK8f,YAAc,MAErB9f,KAAK0f,aAAe,KACpB1f,KAAK4f,cAAgB,KACjB5f,KAAK4a,WACP5a,KAAK4a,SAASuF,kBAAkBngB,MAChCA,KAAK4a,SAAW,MAEd5a,KAAK6a,SAAW7a,KAAK6a,QAAQK,UAC/Blb,KAAK6a,QAAQK,QAAU,MAEpBlb,KAAKlB,OAGVkB,KAAKuf,OAAQ,EACbza,MAAMqP,KAAK,YAGXiM,EAAkBZ,EACtBY,EAAgBP,UAAY,MAG5B,IAAIQ,EAAwBxV,EAAQ8H,KAChC2N,EAAgB,cAAcD,EAAsBrL,aACtDrQ,YAAY4b,GACVzb,QACA9E,KAAKugB,WAAaA,EAClBvgB,KAAKwgB,OAAS,GACdxgB,KAAKygB,aAAc,EACnBzgB,KAAKugB,WAAW7J,OAAUpD,IACxBtT,KAAKygB,aAAc,EACfnN,EAAIvI,QACN/K,KAAKmU,KAAK,OAAQb,EAAIvI,OAAOzF,QAE/BtF,KAAK0gB,cAEP1gB,KAAKugB,WAAWI,QAAWrN,IACzBgE,EAAeK,MAAM,uBAAwBrE,GAC7CtT,KAAKygB,aAAc,EACnBzgB,KAAKua,UACLva,KAAKmU,KAAK,QAASb,IAGnBsN,YACF,OAAO5gB,KAAKwgB,OAEV5T,WACF,OAAO5M,KAAK4gB,MAAMriB,OAEhBsiB,iBACF,OAAO7gB,KAAKygB,YAEdK,MAAMvP,GACJvR,KAAK4gB,MAAMvhB,KAAKkS,GACZvR,KAAK6gB,YAET7gB,KAAK0gB,aAEPnG,UACEva,KAAKugB,WAAWQ,QAChB/gB,KAAKwgB,OAAS,GAEhBE,aACoB,IAAd1gB,KAAK4M,OAEL5M,KAAK6gB,aAET7gB,KAAKygB,aAAc,EACnBzgB,KAAKugB,WAAW5J,kBAAkB3W,KAAK4gB,MAAMI,aAK7CC,EAAkB,cAAc3B,EAClC3a,YAAYwX,EAAQvB,EAAUC,GAQ5B,IAAIpC,EAAIkC,EAPR7V,MAAMqX,EAAQvB,EAAUC,GACxB7a,KAAKyI,UAAYD,KAAKC,UACtBzI,KAAKyZ,MAAQjR,KAAKiR,MAClBzZ,KAAKkhB,QAAU,GACflhB,KAAKmhB,YAAc,EACnBnhB,KAAKohB,YAAa,EAClBphB,KAAKqhB,aAAe,GAEpBrhB,KAAKqc,aAAerc,KAAK6a,QAAQwB,cAAgB4E,EAAgBpB,UAAYrK,EAAMuB,cACnF/W,KAAK2b,MAAQ3b,KAAK6a,QAAQc,OAAS3b,KAAKqc,aACxCrc,KAAKge,cAAgBhe,KAAK6a,QAAQmD,eAAiB,SACnDhe,KAAKwb,WAAaxb,KAAK6a,QAAQW,SAC/Bxb,KAAKwW,cAA6F,OAA5EmE,EAA0C,OAApClC,EAAKmC,EAASC,QAAQrC,gBAAqB,EAASC,EAAG6I,YAAsB3G,EAAK1N,OAAOqU,WACrHthB,KAAKuhB,eAAiB,IAAIjB,EAAc,IAAItgB,KAAKwW,eACjDxW,KAAKuhB,eAAe3M,GAAG,QAAS4M,IAC9BxhB,KAAKyhB,cAAcD,MAErBxhB,KAAKuhB,eAAe3M,GAAG,SAAS,KAC9B0C,EAAeK,MAAM,MAAM3X,KAAKqc,8EAChCrc,KAAKjB,WAEPiB,KAAK8f,YAAc,IAAItF,EAAWxa,MAClCA,KAAK8f,YAAY/E,gBAAgB/a,KAAK6a,QAAQmF,UAAY,CACxD5E,YAAY,IAGZvc,WACF,MAAO,OAEL4c,kBACF,OAAOzb,KAAK0hB,IAEVC,iBACF,OAAO3hB,KAAKmhB,YAEdvF,WAAWgG,GACT5hB,KAAK0hB,IAAME,EACX5hB,KAAK6hB,wBAEPA,wBACO7hB,KAAK4a,SAASkH,SAASC,aAAc/hB,KAAK4a,SAASkH,SAAStG,WAC/Dxb,KAAKyb,YAAYuG,WAAa,eAEhChiB,KAAKyb,YAAY7B,OAAS,KACxBtC,EAAelF,IAAI,MAAMpS,KAAKqc,sCAC9Brc,KAAKuf,OAAQ,EACbvf,KAAKmU,KAAK,SAEZnU,KAAKyb,YAAYjC,UAAazN,IAC5BuL,EAAelF,IAAI,MAAMpS,KAAKqc,6BAA8BtQ,EAAErD,MAC9D1I,KAAKiiB,mBAAmBlW,IAE1B/L,KAAKyb,YAAY/B,QAAU,KACzBpC,EAAelF,IAAI,MAAMpS,KAAKqc,8BAA+Brc,KAAKoc,MAClEpc,KAAKjB,SAGTkjB,oBAAmB,KAAEvZ,IACnB,MAAMwZ,EAAWxZ,EAAK/D,YAEtB,IAAIwd,EAAmBzZ,EACvB,GAFqD,WAAvB1I,KAAKge,eAAkE,gBAAvBhe,KAAKge,cAExD,CACzB,GAAIkE,IAAazV,KAKf,YAJA+I,EAAMe,kBAAkBvW,KAAKwW,cAAe9N,GAAO8Y,IACjD,MAAMY,EAAe5M,EAAMzH,OAAOyT,GAClCxhB,KAAKmU,KAAK,OAAmBiO,MAG1B,GAAIF,IAAahR,YACtBiR,EAAmB3M,EAAMzH,OAAOrF,QAC3B,GAAIwZ,IAAa9R,OAAQ,CAC9B,MAAMoR,EAAKhM,EAAMoB,0BAA0BlO,GAC3CyZ,EAAmB3M,EAAMzH,OAAOyT,QAEF,SAAvBxhB,KAAKge,gBACdmE,EAAmBniB,KAAKyZ,MAAM/Q,IAE5ByZ,EAAiB7L,WACnBtW,KAAKqiB,aAAaF,GAGpBrd,MAAMqP,KAAK,OAAmBgO,GAEhCE,aAAa3Z,GACX,MAAMxB,EAAKwB,EAAK4N,WACVgM,EAAYtiB,KAAKqhB,aAAana,IAAO,CACzCwB,KAAM,GACN6Z,MAAO,EACPtM,MAAOvN,EAAKuN,OAKd,GAHAqM,EAAU5Z,KAAKA,EAAKpK,GAAKoK,EAAKA,KAC9B4Z,EAAUC,QACVviB,KAAKqhB,aAAana,GAAMob,EACpBA,EAAUrM,QAAUqM,EAAUC,MAAO,QAChCviB,KAAKqhB,aAAana,GACzB,MAAMsb,EAAQ,IAAI/V,KAAK6V,EAAU5Z,MACjC1I,KAAKiiB,mBAAmB,CAAEvZ,KAAM8Z,KAGpCzjB,QACEiB,KAAKkhB,QAAU,GACflhB,KAAKmhB,YAAc,EACnBnhB,KAAKqhB,aAAe,GAChBrhB,KAAK8f,cACP9f,KAAK8f,YAAYxC,UACjBtd,KAAK8f,YAAc,MAEjB9f,KAAK4a,WACP5a,KAAK4a,SAASuF,kBAAkBngB,MAChCA,KAAK4a,SAAW,MAEd5a,KAAKyb,cACPzb,KAAKyb,YAAY7B,OAAS,KAC1B5Z,KAAKyb,YAAYjC,UAAY,KAC7BxZ,KAAKyb,YAAY/B,QAAU,KAC3B1Z,KAAK0hB,IAAM,MAET1hB,KAAKuhB,iBACPvhB,KAAKuhB,eAAehH,UACpBva,KAAKuhB,eAAe1M,qBACpB7U,KAAKuhB,eAAiB,MAEnBvhB,KAAKlB,OAGVkB,KAAKuf,OAAQ,EACbza,MAAMqP,KAAK,UAEbgG,KAAKzR,EAAM+Z,GACT,GAAKziB,KAAKlB,KAIV,GAA2B,SAAvBkB,KAAKge,cACPhe,KAAKyhB,cAAczhB,KAAKyI,UAAUC,SAC7B,GAA2B,WAAvB1I,KAAKge,eAAkE,gBAAvBhe,KAAKge,cAAkD,CAChH,MAAMzM,EAAOiE,EAAMvH,KAAKvF,GACxB,IAAK+Z,GAAWlR,EAAK3E,KAAO4I,EAAMG,WAEhC,YADA3V,KAAK0iB,YAAYnR,GAGdvR,KAAK4a,SAASkH,SAASC,WAG1B/hB,KAAKyhB,cAAclQ,GAFnBvR,KAAKuhB,eAAeT,MAAMvP,QAK5BvR,KAAKyhB,cAAc/Y,QAjBnB5D,MAAMqP,KAAK,QAAqB,IAAIzP,MAAM,4FAoB9C+c,cAAc7c,IACR5E,KAAKohB,YAAephB,KAAK2iB,SAAS/d,KACpC5E,KAAKkhB,QAAQ7hB,KAAKuF,GAClB5E,KAAKmhB,YAAcnhB,KAAKkhB,QAAQ3iB,QAGpCokB,SAAS/d,GACP,IAAK5E,KAAKlB,KACR,OAAO,EAET,GAAIkB,KAAKyb,YAAYmH,eAAiB3B,EAAgB4B,oBAMpD,OALA7iB,KAAKohB,YAAa,EAClBpH,YAAW,KACTha,KAAKohB,YAAa,EAClBphB,KAAK8iB,eACJ,KACI,EAET,IACE9iB,KAAKyb,YAAYtB,KAAKvV,GACtB,MAAOmH,GAIP,OAHAuL,EAAeK,MAAM,OAAO3X,KAAKqc,mCAAoCtQ,GACrE/L,KAAKohB,YAAa,EAClBphB,KAAKjB,SACE,EAET,OAAO,EAET+jB,aACE,IAAK9iB,KAAKlB,KACR,OAEF,GAA4B,IAAxBkB,KAAKkhB,QAAQ3iB,OACf,OAEF,MAAMqG,EAAM5E,KAAKkhB,QAAQ,GACrBlhB,KAAK2iB,SAAS/d,KAChB5E,KAAKkhB,QAAQF,QACbhhB,KAAKmhB,YAAcnhB,KAAKkhB,QAAQ3iB,OAChCyB,KAAK8iB,cAGTJ,YAAYnR,GACV,MAAMwR,EAAQvN,EAAMO,MAAMxE,GAC1B+F,EAAelF,IAAI,MAAMpS,KAAKqc,4BAA4B0G,EAAMxkB,oBAChE,IAAK,IAAIykB,KAASD,EAChB/iB,KAAKma,KAAK6I,GAAO,GAGrBjD,cAAchI,GACZ,MAAM2E,EAAU3E,EAAQ2E,QACxB,OAAQ3E,EAAQlZ,MACd,IAAK,SACHmB,KAAK8f,YAAYhE,UAAU/D,EAAQlZ,KAAM6d,EAAQX,KACjD,MACF,IAAK,YACH/b,KAAK8f,YAAYpB,gBAAgBhC,EAAQF,WACzC,MACF,QACElF,EAAeI,KAAK,6BAA8BK,EAAQlZ,KAAM,aAAcmB,KAAKoc,SAKvF6G,EAAiBhC,EACrBgC,EAAepD,UAAY,MAC3BoD,EAAeJ,oBAAsB,QAGrC,IA6DIK,EAAW,CACbC,uBAAuBzI,GAIrB,GAHKA,GAA4B,oBAAXzN,SACpByN,EAASzN,aAE6B,IAA7ByN,EAAO0I,qBAAuC,qBAAsB1I,EAAO0I,kBAAkBre,WACtG,OAAO,EAET,IAAIse,EACAC,GAAY,EAChB,IACED,EAAS,IAAI3I,EAAOuB,kBACpBoH,EAAOE,eAAe,SACtBD,GAAY,EACZ,MAAOvX,IACP,QACIsX,GACFA,EAAOtkB,QAGX,OAAOukB,IAKPE,EAAQ,cAAcnM,EAAsBrC,aAC9CrQ,YAAYuC,EAAI2T,GASd,IAAIpC,EACJ,IAAIgL,EATJ3e,QACA9E,KAAK2Y,IAAM,KACX3Y,KAAK0jB,cAAgB,KACrB1jB,KAAK8Y,YAAa,EAClB9Y,KAAK0Y,eAAgB,EACrB1Y,KAAKuf,OAAQ,EACbvf,KAAK2jB,aAA+B,IAAIC,IACxC5jB,KAAK6jB,cAAgC,IAAID,IAGrC1c,GAAMA,EAAGvC,aAAe7D,OAC1B+Z,EAAU3T,EACDA,IACTuc,EAASvc,EAAGI,YAEduT,EAAUxQ,EAAe,CACvByZ,MAAO,EACP1L,KAAM5C,EAAMC,WACZ4C,KAAM7C,EAAME,WACZ4C,KAAM,IACN5S,IAAK8d,EAAMO,YACX1K,MAAO7D,EAAMuB,cACbuE,OAAQ9F,EAAMI,eACbiF,GACH7a,KAAKgkB,SAAWnJ,EACM,oBAAX5N,QAAiD,MAAvBjN,KAAKgkB,SAAS5L,OACjDpY,KAAKgkB,SAAS5L,KAAOnL,OAAOkK,SAAS8M,UAEnCjkB,KAAKgkB,SAAS1L,OACc,MAA1BtY,KAAKgkB,SAAS1L,KAAK,KACrBtY,KAAKgkB,SAAS1L,KAAO,IAAMtY,KAAKgkB,SAAS1L,MAEe,MAAtDtY,KAAKgkB,SAAS1L,KAAKtY,KAAKgkB,SAAS1L,KAAK/Z,OAAS,KACjDyB,KAAKgkB,SAAS1L,MAAQ,WAGG,IAAzBtY,KAAKgkB,SAAS7L,QAAqBnY,KAAKgkB,SAAS5L,OAAS5C,EAAMC,WAClEzV,KAAKgkB,SAAS7L,OAAS3C,EAAM0B,WACpBlX,KAAKgkB,SAAS5L,MAAQ5C,EAAMC,aACrCzV,KAAKgkB,SAAS7L,QAAS,GAErBnY,KAAKgkB,SAASE,aAChB5M,EAAeM,eAAe5X,KAAKgkB,SAASE,aAE9C5M,EAAeE,SAAWxX,KAAKgkB,SAASF,OAAS,EACjD9jB,KAAKmkB,KAAO,IArIN,MACRxf,YAAYqf,GACVhkB,KAAKgkB,SAAWA,EAElBI,SAASC,GACP,IAAI5L,EAAIkC,EACR,OAA6E,OAApEA,EAAuC,OAAjClC,EAAKzY,KAAKgkB,SAASxL,gBAAqB,EAASC,EAAG6L,OAAiB3J,EAAK1N,OAAOqX,OAAOD,GAEzGE,UAAUC,GAER,IAAIH,GADarkB,KAAKgkB,SAAS7L,OAAS,WAAa,WAChCnY,KAAKgkB,SAAS5L,KAAO,IAAMpY,KAAKgkB,SAAS3L,KAAOrY,KAAKgkB,SAAS1L,KAAOtY,KAAKgkB,SAASte,IAAM,IAAM8e,EAGpH,OADAH,GADoB,QAAS,IAAIhT,MAAOoT,UAAYxU,KAAK+G,SAElDqN,EAETK,aACE,OAAOrZ,EAAQrL,KAAM,MAAM,YACzB,MAAMqkB,EAAMrkB,KAAKukB,UAAU,MAC3B,IACE,MAAMI,QAAiB3kB,KAAKokB,SAASC,GACrC,GAAwB,MAApBM,EAASC,OACX,MAAM,IAAIlgB,MAAM,iBAAiBigB,EAASC,UAE5C,OAAOD,EAASE,OAChB,MAAOlN,GACPL,EAAeK,MAAM,sBAAuBA,GAC5C,IAAImN,EAAY,GAIhB,KAH2B,MAAvB9kB,KAAKgkB,SAAS1L,MAAgBtY,KAAKgkB,SAAS5L,OAAS5C,EAAMC,aAC7DqP,EAAY,mIAER,IAAIpgB,MAAM,uCAAyCogB,OAI/DC,eACE,OAAO1Z,EAAQrL,KAAM,MAAM,YACzB,MAAMqkB,EAAMrkB,KAAKukB,UAAU,SAC3B,IACE,MAAMI,QAAiB3kB,KAAKokB,SAASC,GACrC,GAAwB,MAApBM,EAASC,OAAgB,CAC3B,GAAwB,MAApBD,EAASC,OAAgB,CAC3B,IAAII,EAAe,GAMnB,MAJEA,EADEhlB,KAAKgkB,SAAS5L,OAAS5C,EAAMC,WAChB,sHAEA,2FAEX,IAAI/Q,MAAM,+DAAiEsgB,GAEnF,MAAM,IAAItgB,MAAM,iBAAiBigB,EAASC,UAE5C,OAAOD,EAASM,OAChB,MAAOtN,GAEP,MADAL,EAAeK,MAAM,8BAA+BA,GAC9C,IAAIjT,MAAM,4CAA8CiT,SA+E9CkD,GACpB7a,KAAKsZ,QAAUtZ,KAAKklB,0BACpBllB,KAAK8hB,SAAW0B,EAAM2B,YAA8C,OAAjC1M,EAAKzY,KAAKgkB,SAASxL,gBAAqB,EAASC,EAAGqC,QAClF9a,KAAK8hB,SAASsD,YAAeplB,KAAK8hB,SAASpZ,MAI1C+a,GAAWjO,EAAMM,WAAW2N,IAIlCzjB,KAAKyc,OAAO5D,OAAQ,EAChB4K,EACFzjB,KAAKqlB,YAAY5B,GAEjBzjB,KAAKmkB,KAAKO,aAAatY,MAAMkZ,GAAQtlB,KAAKqlB,YAAYC,KAAMC,OAAO5N,GAAU3X,KAAKwlB,OAAO,eAAkC7N,MAP3H3X,KAAKylB,cAAc,aAA8B,OAAOhC,iBAJxDzjB,KAAKylB,cAAc,uBAAkD,+CAcrEve,SACF,OAAOlH,KAAK2Y,IAEVkC,cACF,OAAO7a,KAAKgkB,SAEVllB,WACF,OAAOkB,KAAKuf,MAEV9C,aACF,OAAOzc,KAAKsZ,QAEVoM,kBACF,MAAMC,EAAmC7kB,OAAOzD,OAAO,MACvD,IAAK,IAAK4K,EAAGlB,KAAM/G,KAAK2jB,aACtBgC,EAAiB1d,GAAKlB,EAExB,OAAO4e,EAELvM,gBACF,OAAOpZ,KAAK8Y,WAEV8M,mBACF,OAAO5lB,KAAK0Y,cAEdwM,0BACE,MAAMzI,EAAS,IAAIvE,EAAOlY,KAAKgkB,UAoB/B,OAnBAvH,EAAO7H,GAAG,WAA0BlM,IAClC1I,KAAK6lB,eAAend,MAEtB+T,EAAO7H,GAAG,SAAsB+C,IAC9B3X,KAAKwlB,OAAO,eAAkC7N,MAEhD8E,EAAO7H,GAAG,gBAAmC,KACvC5U,KAAK4lB,eAGT5lB,KAAKke,UAAU,UAAyB,8BACxCle,KAAK8lB,iBAEPrJ,EAAO7H,GAAG,SAAqB,KACzB5U,KAAK4lB,cAGT5lB,KAAKwlB,OAAO,gBAAoC,2CAE3C/I,EAET4I,YAAYne,GACNlH,KAAKoZ,YAETpZ,KAAK2Y,IAAMzR,EACXlH,KAAKyc,OAAOtG,MAAMjP,EAAIlH,KAAKgkB,SAAS3K,QAEtCwM,eAAe9N,GACb,MAAMlZ,EAAOkZ,EAAQlZ,KACf6d,EAAU3E,EAAQ2E,QAClBP,EAASpE,EAAQgO,IACvB,OAAQlnB,GACN,IAAK,OACHmB,KAAK0jB,cAAgB1jB,KAAKkH,GAC1BlH,KAAKuf,OAAQ,EACbvf,KAAKmU,KAAK,OAAmBnU,KAAKkH,IAClC,MACF,IAAK,QACHlH,KAAKwlB,OAAO,eAAkC9I,EAAQ9X,KACtD,MACF,IAAK,WACH5E,KAAKwlB,OAAO,iBAAsC,OAAOxlB,KAAKkH,gBAC9D,MACF,IAAK,cACHlH,KAAKwlB,OAAO,cAAgC,YAAYxlB,KAAKgkB,SAASte,mBACtE,MACF,IAAK,QACH4R,EAAelF,IAAI,+BAA+B+J,KAClDnc,KAAKgmB,aAAa7J,GAClBnc,KAAK2jB,aAAasC,OAAO9J,GACzB,MACF,IAAK,SACHnc,KAAKke,UAAU,mBAA0C,6BAA6B/B,KACtF,MACF,IAAK,QAAqB,CACxB,MAAME,EAAeK,EAAQL,aAC7B,IAAI5B,EAAaza,KAAKgd,cAAcb,EAAQE,GAK5C,GAJI5B,IACFA,EAAW1b,QACXuY,EAAeI,KAAK,6CAA6C2E,MAE9C,UAAjBK,EAAQ7d,KACV4b,EAAa,IAAI2F,EAAgBjE,EAAQnc,KAAM,CAC7Cqc,eACA2D,SAAUtD,EACVqB,SAAUrB,EAAQqB,WAEpB/d,KAAKkmB,eAAe/J,EAAQ1B,GAC5Bza,KAAKmU,KAAK,OAAmBsG,OACxB,IAAqB,SAAjBiC,EAAQ7d,KAajB,YADAyY,EAAeI,KAAK,sCAAsCgF,EAAQ7d,QAXlE4b,EAAa,IAAIwI,EAAe9G,EAAQnc,KAAM,CAC5Cqc,eACA2D,SAAUtD,EACVqB,SAAUrB,EAAQqB,SAClBpC,MAAOe,EAAQf,MACfqC,cAAetB,EAAQsB,cACvBxC,SAAUkB,EAAQlB,WAEpBxb,KAAKkmB,eAAe/J,EAAQ1B,GAC5Bza,KAAKmU,KAAK,aAA+BsG,GAK3C,MAAMwF,EAAWjgB,KAAKkgB,aAAa7D,GACnC,IAAK,IAAI8J,KAAYlG,EACnBxF,EAAWsF,cAAcoG,GAE3B,MAEF,QAAS,CACP,IAAKzJ,EAEH,YADApF,EAAeI,KAAK,yCAAyCyE,aAAkBtd,KAGjF,MAAMwd,EAAeK,EAAQL,aACvB5B,EAAaza,KAAKgd,cAAcb,EAAQE,GAC1C5B,GAAcA,EAAWO,eAC3BP,EAAWsF,cAAchI,GAChBsE,EACTrc,KAAKomB,cAAc/J,EAActE,GAEjCT,EAAeI,KAAK,wCAAyCK,GAE/D,QAINqO,cAAc/J,EAActE,GACrB/X,KAAK6jB,cAAcjR,IAAIyJ,IAC1Brc,KAAK6jB,cAAcnkB,IAAI2c,EAAc,IAEvCrc,KAAK6jB,cAAchkB,IAAIwc,GAAchd,KAAK0Y,GAE5CmI,aAAa7D,GACX,MAAM4D,EAAWjgB,KAAK6jB,cAAchkB,IAAIwc,GACxC,OAAI4D,GACFjgB,KAAK6jB,cAAcoC,OAAO5J,GACnB4D,GAEF,GAEToG,QAAQjK,EAAMvB,EAAU,IACtB,GAAI7a,KAAK4lB,aAGP,OAFAtO,EAAeI,KAAK,sPACpB1X,KAAKke,UAAU,eAAmC,+DAGpD,MAAM7C,EAAiB,IAAI4H,EAAe7G,EAAMpc,KAAM6a,GAEtD,OADA7a,KAAKkmB,eAAe9J,EAAMf,GACnBA,EAET7Q,KAAK4R,EAAMc,EAAQrC,EAAU,IAC3B,GAAI7a,KAAK4lB,aAGP,OAFAtO,EAAeI,KAAK,0KACpB1X,KAAKke,UAAU,eAAmC,+DAGpD,IAAKhB,EAEH,YADA5F,EAAeK,MAAM,iFAGvBkD,EAAQK,QAAUgC,EAClB,MAAME,EAAkB,IAAIgD,EAAgBhE,EAAMpc,KAAM6a,GAExD,OADA7a,KAAKkmB,eAAe9J,EAAMgB,GACnBA,EAET8I,eAAe/J,EAAQ1B,GACrBnD,EAAelF,IAAI,kBAAkBqI,EAAW5b,QAAQ4b,EAAW4B,0BAA0BF,KACxFnc,KAAK2jB,aAAa/Q,IAAIuJ,IACzBnc,KAAK2jB,aAAajkB,IAAIyc,EAAQ,IAEhCnc,KAAK2jB,aAAa9jB,IAAIsc,GAAQ9c,KAAKob,GAErC0F,kBAAkB1F,GAChB,MAAMiL,EAAc1lB,KAAK2jB,aAAa9jB,IAAI4a,EAAW2B,MACrD,GAAIsJ,EAAa,CACf,MAAMtX,EAAQsX,EAAYY,QAAQ7L,IACnB,IAAXrM,IACFsX,EAAYa,OAAOnY,EAAO,GACC,IAAvBsX,EAAYnnB,QACdyB,KAAK2jB,aAAasC,OAAOxL,EAAW2B,OAI1Cpc,KAAK6jB,cAAcoC,OAAOxL,EAAW4B,cAEvCW,cAAcb,EAAQE,GACpB,MAAMqJ,EAAc1lB,KAAK2jB,aAAa9jB,IAAIsc,GAC1C,IAAKuJ,EACH,OAAO,KAET,IAAK,IAAIjL,KAAciL,EACrB,GAAIjL,EAAW4B,eAAiBA,EAC9B,OAAO5B,EAGX,OAAO,KAETgL,cAAc5mB,EAAMkZ,GAClBiC,YAAW,KACTha,KAAKwlB,OAAO3mB,EAAMkZ,KACjB,GAELyN,OAAO3mB,EAAMkZ,GACXT,EAAeK,MAAM,aACrB3X,KAAKke,UAAUrf,EAAMkZ,GAChB/X,KAAK0jB,cAGR1jB,KAAK8lB,aAFL9lB,KAAKua,UAKT2D,UAAUrf,EAAMof,GAEd,IAAItG,EADJL,EAAeK,MAAM,SAAUsG,GAG7BtG,EADiB,iBAARsG,EACD,IAAIvZ,MAAMuZ,GAEVA,EAEVtG,EAAM9Y,KAAOA,EACbmB,KAAKmU,KAAK,QAAqBwD,GAEjC4C,UACMva,KAAKoZ,YAGT9B,EAAelF,IAAI,wBAAwBpS,KAAKkH,MAChDlH,KAAK8lB,aACL9lB,KAAK2Z,WACL3Z,KAAKyc,OAAOlC,UACZva,KAAK8Y,YAAa,EAClB9Y,KAAKmU,KAAK,UAEZwF,WACE,IAAK,IAAIwC,KAAUnc,KAAK2jB,aAAa9lB,OACnCmC,KAAKgmB,aAAa7J,GAClBnc,KAAK2jB,aAAasC,OAAO9J,GAE3Bnc,KAAKyc,OAAO5H,qBAEdmR,aAAa7J,GACX,MAAMuJ,EAAc1lB,KAAK2jB,aAAa9jB,IAAIsc,GAC1C,GAAKuJ,EAEL,IAAK,IAAIjL,KAAciL,EACrBjL,EAAW1b,QAGf+mB,aACE,GAAI9lB,KAAK4lB,aACP,OAEF,MAAMY,EAAYxmB,KAAKkH,GACvBoQ,EAAelF,IAAI,2BAA2BoU,KAC9CxmB,KAAK0Y,eAAgB,EACrB1Y,KAAKuf,OAAQ,EACbvf,KAAKyc,OAAO5D,OAAQ,EACpB7Y,KAAKyc,OAAO1d,QACZiB,KAAK0jB,cAAgB8C,EACrBxmB,KAAK2Y,IAAM,KACX3Y,KAAKmU,KAAK,eAAmCqS,GAE/CC,YACE,GAAIzmB,KAAK4lB,eAAiB5lB,KAAKoZ,UAC7B9B,EAAelF,IAAI,6CAA6CpS,KAAK0jB,iBACrE1jB,KAAK0Y,eAAgB,EACrB1Y,KAAKyc,OAAO5D,OAAQ,EACpB7Y,KAAKqlB,YAAYrlB,KAAK0jB,mBACjB,IAAI1jB,KAAKoZ,UACd,MAAM,IAAI1U,MAAM,4EACX,GAAK1E,KAAK4lB,cAAiB5lB,KAAKlB,KAGrC,MAAM,IAAI4F,MAAM,QAAQ1E,KAAKkH,uEAF7BoQ,EAAeK,MAAM,mEAKzBoN,aAAapa,EAAK,CAACpF,QAEjBvF,KAAKmkB,KAAKY,eAAe3Y,MAAMsa,GAAU/b,EAAG+b,KAAQnB,OAAO5N,GAAU3X,KAAKwlB,OAAO,eAAkC7N,KAErHgP,mBAAmBjM,GAOjB,OANKA,GAA4B,oBAAXzN,SACpByN,EAASzN,QAENuW,EAAMoD,YACTpD,EAAMoD,UAAYpD,EAAMqD,cAAcnM,IAEjC8I,EAAMoD,UAEfD,qBAAqBjM,GACdA,GAA4B,oBAAXzN,SACpByN,EAASzN,QAEX,MAAMqW,EAAY,CAChBwD,YAA4C,IAA7BpM,EAAOuB,kBACtBmJ,YAAY,EACZ1c,MAAM,EACNqZ,YAAY,EACZvG,UAAU,EACVuL,aAAa,GAEf,IAAKzD,EAAUwD,OACb,OAAOxD,EACT,IAAI0D,EACJ,IAEE,IAAIpF,EADJoF,EAAK,IAAItM,EAAOuB,kBAAkBzG,EAAMI,eAExC,IACEgM,EAAKoF,EAAGtL,kBAAkB,cAAe,CAAEH,SAAS,IACpD+H,EAAU5a,MAAO,EACjB4a,EAAU9H,WAAaoG,EAAGrG,QAC1B,IACEqG,EAAGI,WAAa,OAChBsB,EAAUvB,YAAa,EACvB,MAAOhW,KAET,MAAOA,IACP,QACI6V,GACFA,EAAG7iB,SAGP,MAAOgN,IACP,QACIib,GACFA,EAAGjoB,QAIP,OADAukB,EAAUyD,YAAc7D,EAASC,uBAAuBzI,GACjD4I,IAGP2D,EAAOzD,EACXyD,EAAKlD,YAAc,SAIG,oBAAX9W,SACTA,OAAOga,KAAOA,I,UClmEhB,IAOIC,EACAC,EARA3pB,EAAU6D,EAAOC,QAAU,GAU/B,SAAS8lB,IACL,MAAM,IAAI1iB,MAAM,mCAEpB,SAAS2iB,IACL,MAAM,IAAI3iB,MAAM,qCAsBpB,SAAS4iB,EAAWC,GAChB,GAAIL,IAAqBlN,WAErB,OAAOA,WAAWuN,EAAK,GAG3B,IAAKL,IAAqBE,IAAqBF,IAAqBlN,WAEhE,OADAkN,EAAmBlN,WACZA,WAAWuN,EAAK,GAE3B,IAEI,OAAOL,EAAiBK,EAAK,GAC/B,MAAMxb,GACJ,IAEI,OAAOmb,EAAiB1c,KAAK,KAAM+c,EAAK,GAC1C,MAAMxb,GAEJ,OAAOmb,EAAiB1c,KAAKxK,KAAMunB,EAAK,MAvCnD,WACG,IAEQL,EADsB,mBAAflN,WACYA,WAEAoN,EAEzB,MAAOrb,GACLmb,EAAmBE,EAEvB,IAEQD,EADwB,mBAAjB7M,aACcA,aAEA+M,EAE3B,MAAOtb,GACLob,EAAqBE,GAjB7B,GAwEA,IAEIG,EAFA5G,EAAQ,GACR6G,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaD,IAGlBC,GAAW,EACPD,EAAajpB,OACbqiB,EAAQ4G,EAAavnB,OAAO2gB,GAE5B8G,GAAc,EAEd9G,EAAMriB,QACNqpB,KAIR,SAASA,IACL,IAAIH,EAAJ,CAGA,IAAII,EAAUP,EAAWK,GACzBF,GAAW,EAGX,IADA,IAAI1hB,EAAM6a,EAAMriB,OACVwH,GAAK,CAGP,IAFAyhB,EAAe5G,EACfA,EAAQ,KACC8G,EAAa3hB,GACdyhB,GACAA,EAAaE,GAAYI,MAGjCJ,GAAc,EACd3hB,EAAM6a,EAAMriB,OAEhBipB,EAAe,KACfC,GAAW,EAnEf,SAAyBM,GACrB,GAAIZ,IAAuB7M,aAEvB,OAAOA,aAAayN,GAGxB,IAAKZ,IAAuBE,IAAwBF,IAAuB7M,aAEvE,OADA6M,EAAqB7M,aACdA,aAAayN,GAExB,IAEWZ,EAAmBY,GAC5B,MAAOhc,GACL,IAEI,OAAOob,EAAmB3c,KAAK,KAAMud,GACvC,MAAOhc,GAGL,OAAOob,EAAmB3c,KAAKxK,KAAM+nB,KAgD7CC,CAAgBH,IAiBpB,SAASI,EAAKV,EAAKW,GACfloB,KAAKunB,IAAMA,EACXvnB,KAAKkoB,MAAQA,EAYjB,SAASjnB,KA5BTzD,EAAQ2qB,SAAW,SAAUZ,GACzB,IAAI9S,EAAO,IAAI7T,MAAM8T,UAAUnW,OAAS,GACxC,GAAImW,UAAUnW,OAAS,EACnB,IAAK,IAAIuH,EAAI,EAAGA,EAAI4O,UAAUnW,OAAQuH,IAClC2O,EAAK3O,EAAI,GAAK4O,UAAU5O,GAGhC8a,EAAMvhB,KAAK,IAAI4oB,EAAKV,EAAK9S,IACJ,IAAjBmM,EAAMriB,QAAiBkpB,GACvBH,EAAWM,IASnBK,EAAKljB,UAAU+iB,IAAM,WACjB9nB,KAAKunB,IAAIlb,MAAM,KAAMrM,KAAKkoB,QAE9B1qB,EAAQ4qB,MAAQ,UAChB5qB,EAAQ6qB,SAAU,EAClB7qB,EAAQC,IAAM,GACdD,EAAQ0H,KAAO,GACf1H,EAAQ8qB,QAAU,GAClB9qB,EAAQ+qB,SAAW,GAInB/qB,EAAQoX,GAAK3T,EACbzD,EAAQ0V,YAAcjS,EACtBzD,EAAQyV,KAAOhS,EACfzD,EAAQsX,IAAM7T,EACdzD,EAAQmX,eAAiB1T,EACzBzD,EAAQqX,mBAAqB5T,EAC7BzD,EAAQ2W,KAAOlT,EACfzD,EAAQgrB,gBAAkBvnB,EAC1BzD,EAAQirB,oBAAsBxnB,EAE9BzD,EAAQuW,UAAY,SAAUpV,GAAQ,MAAO,IAE7CnB,EAAQkrB,QAAU,SAAU/pB,GACxB,MAAM,IAAI+F,MAAM,qCAGpBlH,EAAQmrB,IAAM,WAAc,MAAO,KACnCnrB,EAAQorB,MAAQ,SAAUC,GACtB,MAAM,IAAInkB,MAAM,mCAEpBlH,EAAQsrB,MAAQ,WAAa,OAAO,I,cCpKd,CAClB,SAAU,SAAU,KAAM,SAAU,SAAU,KAAM,OAAQ,aAC9DphB,KAAK,KAOP,IATA,IASS5B,EAAI,EAAGA,EAAI,EAAGA,KACTmK,KAAKC,IAAI,GAAG,GAAGD,KAAK+G,UAAU1P,SAAS,K,oKClBjDuT,EAAU,GAEdA,EAAQkO,kBAAoB,IAC5BlO,EAAQmO,cAAgB,IAElBnO,EAAQoO,OAAS,SAAc,KAAM,QAE3CpO,EAAQqO,OAAS,IACjBrO,EAAQsO,mBAAqB,IAEhB,IAAI,IAAStO,GAKJ,KAAW,YAAiB,Y,uBCxBlD,IAAIuO,EAAc,GAElB,SAASC,EAAqBC,GAG5B,IAFA,IAAIhkB,GAAU,EAELQ,EAAI,EAAGA,EAAIsjB,EAAY7qB,OAAQuH,IACtC,GAAIsjB,EAAYtjB,GAAGwjB,aAAeA,EAAY,CAC5ChkB,EAASQ,EACT,MAIJ,OAAOR,EAGT,SAASikB,EAAaliB,EAAMwT,GAI1B,IAHA,IAAI2O,EAAa,GACbC,EAAc,GAET3jB,EAAI,EAAGA,EAAIuB,EAAK9I,OAAQuH,IAAK,CACpC,IAAIyB,EAAOF,EAAKvB,GACZoB,EAAK2T,EAAQ6O,KAAOniB,EAAK,GAAKsT,EAAQ6O,KAAOniB,EAAK,GAClDgb,EAAQiH,EAAWtiB,IAAO,EAC1BoiB,EAAa,GAAGrpB,OAAOiH,EAAI,KAAKjH,OAAOsiB,GAC3CiH,EAAWtiB,GAAMqb,EAAQ,EACzB,IAAIoH,EAAoBN,EAAqBC,GACzCnf,EAAM,CACRyf,IAAKriB,EAAK,GACVK,MAAOL,EAAK,GACZsiB,UAAWtiB,EAAK,GAChBO,SAAUP,EAAK,GACfQ,MAAOR,EAAK,IAGd,IAA2B,IAAvBoiB,EACFP,EAAYO,GAAmBG,aAC/BV,EAAYO,GAAmBI,QAAQ5f,OAClC,CACL,IAAI4f,EAAUC,EAAgB7f,EAAK0Q,GACnCA,EAAQoP,QAAUnkB,EAClBsjB,EAAY7C,OAAOzgB,EAAG,EAAG,CACvBwjB,WAAYA,EACZS,QAASA,EACTD,WAAY,IAIhBL,EAAYpqB,KAAKiqB,GAGnB,OAAOG,EAGT,SAASO,EAAgB7f,EAAK0Q,GAC5B,IAAIqP,EAAMrP,EAAQqO,OAAOrO,GAezB,OAdAqP,EAAIC,OAAOhgB,GAEG,SAAiBigB,GAC7B,GAAIA,EAAQ,CACV,GAAIA,EAAOR,MAAQzf,EAAIyf,KAAOQ,EAAOxiB,QAAUuC,EAAIvC,OAASwiB,EAAOP,YAAc1f,EAAI0f,WAAaO,EAAOtiB,WAAaqC,EAAIrC,UAAYsiB,EAAOriB,QAAUoC,EAAIpC,MACzJ,OAGFmiB,EAAIC,OAAOhgB,EAAMigB,QAEjBF,EAAIG,UAOVhpB,EAAOC,QAAU,SAAU+F,EAAMwT,GAG/B,IAAIyP,EAAkBf,EADtBliB,EAAOA,GAAQ,GADfwT,EAAUA,GAAW,IAGrB,OAAO,SAAgB0P,GACrBA,EAAUA,GAAW,GAErB,IAAK,IAAIzkB,EAAI,EAAGA,EAAIwkB,EAAgB/rB,OAAQuH,IAAK,CAC/C,IACIsI,EAAQib,EADKiB,EAAgBxkB,IAEjCsjB,EAAYhb,GAAO0b,aAKrB,IAFA,IAAIU,EAAqBjB,EAAagB,EAAS1P,GAEtC4P,EAAK,EAAGA,EAAKH,EAAgB/rB,OAAQksB,IAAM,CAClD,IAEIC,EAASrB,EAFKiB,EAAgBG,IAIK,IAAnCrB,EAAYsB,GAAQZ,aACtBV,EAAYsB,GAAQX,UAEpBX,EAAY7C,OAAOmE,EAAQ,IAI/BJ,EAAkBE,K,uBCnGtB,IAAIG,EAAO,GAoCXtpB,EAAOC,QAVP,SAA0B2nB,EAAQlrB,GAChC,IAAIgN,EAxBN,SAAmBA,GACjB,QAA4B,IAAjB4f,EAAK5f,GAAyB,CACvC,IAAI6f,EAAcC,SAASC,cAAc/f,GAEzC,GAAIkC,OAAO8d,mBAAqBH,aAAuB3d,OAAO8d,kBAC5D,IAGEH,EAAcA,EAAYI,gBAAgBC,KAC1C,MAAOlf,GAEP6e,EAAc,KAIlBD,EAAK5f,GAAU6f,EAGjB,OAAOD,EAAK5f,GAMCmgB,CAAUjC,GAEvB,IAAKle,EACH,MAAM,IAAIrG,MAAM,2GAGlBqG,EAAOogB,YAAYptB,K,uBCzBrBsD,EAAOC,QAPP,SAA4BuZ,GAC1B,IAAIuQ,EAAUP,SAASQ,cAAc,SAGrC,OAFAxQ,EAAQmO,cAAcoC,EAASvQ,EAAQyQ,YACvCzQ,EAAQoO,OAAOmC,EAASvQ,EAAQA,SACzBuQ,I,6BCIT/pB,EAAOC,QARP,SAAwCiqB,GACtC,IAAIC,EAAmD,KAEnDA,GACFD,EAAaE,aAAa,QAASD,K,uBC8DvCnqB,EAAOC,QAZP,SAAgBuZ,GACd,IAAI0Q,EAAe1Q,EAAQsO,mBAAmBtO,GAC9C,MAAO,CACLsP,OAAQ,SAAgBhgB,IAzD5B,SAAeohB,EAAc1Q,EAAS1Q,GACpC,IAAIyf,EAAM,GAENzf,EAAIrC,WACN8hB,GAAO,cAAc3pB,OAAOkK,EAAIrC,SAAU,QAGxCqC,EAAIvC,QACNgiB,GAAO,UAAU3pB,OAAOkK,EAAIvC,MAAO,OAGrC,IAAIH,OAAiC,IAAd0C,EAAIpC,MAEvBN,IACFmiB,GAAO,SAAS3pB,OAAOkK,EAAIpC,MAAMxJ,OAAS,EAAI,IAAI0B,OAAOkK,EAAIpC,OAAS,GAAI,OAG5E6hB,GAAOzf,EAAIyf,IAEPniB,IACFmiB,GAAO,KAGLzf,EAAIvC,QACNgiB,GAAO,KAGLzf,EAAIrC,WACN8hB,GAAO,KAGT,IAAIC,EAAY1f,EAAI0f,UAEhBA,GAA6B,oBAATzhB,OACtBwhB,GAAO,uDAAuD3pB,OAAOmI,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUohB,MAAe,QAMtIhP,EAAQkO,kBAAkBa,EAAK2B,EAAc1Q,EAAQA,SAkBjDxO,CAAMkf,EAAc1Q,EAAS1Q,IAE/BkgB,OAAQ,YAjBZ,SAA4BkB,GAE1B,GAAgC,OAA5BA,EAAaG,WACf,OAAO,EAGTH,EAAaG,WAAWC,YAAYJ,GAYhCK,CAAmBL,O,uBCjDzBlqB,EAAOC,QAZP,SAA2BsoB,EAAK2B,GAC9B,GAAIA,EAAaM,WACfN,EAAaM,WAAWC,QAAUlC,MAC7B,CACL,KAAO2B,EAAaQ,YAClBR,EAAaI,YAAYJ,EAAaQ,YAGxCR,EAAaJ,YAAYN,SAASmB,eAAepC,QCVjDqC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB3lB,IAAjB4lB,EACH,OAAOA,EAAa9qB,QAGrB,IAAID,EAAS4qB,EAAyBE,GAAY,CACjDjlB,GAAIilB,EAEJ7qB,QAAS,IAOV,OAHA+qB,EAAoBF,GAAU9qB,EAAQA,EAAOC,QAAS4qB,GAG/C7qB,EAAOC,QCpBf4qB,EAAoB5tB,EAAK+C,IACxB,IAAIirB,EAASjrB,GAAUA,EAAO8J,WAC7B,IAAO9J,EAAiB,QACxB,IAAM,EAEP,OADA6qB,EAAoBK,EAAED,EAAQ,CAAElmB,EAAGkmB,IAC5BA,GCLRJ,EAAoBK,EAAI,CAACjrB,EAASkrB,KACjC,IAAI,IAAI9mB,KAAO8mB,EACXN,EAAoBO,EAAED,EAAY9mB,KAASwmB,EAAoBO,EAAEnrB,EAASoE,IAC5E5E,OAAOvB,eAAe+B,EAASoE,EAAK,CAAEjG,YAAY,EAAMI,IAAK2sB,EAAW9mB,MCJ3EwmB,EAAoBO,EAAI,CAACtiB,EAAKI,IAAUzJ,OAAOiE,UAAUgF,eAAeS,KAAKL,EAAKI,GCAlF2hB,EAAoBQ,QAAKlmB,E,+EC8DL,OAAH,OACblJ,IAAAA,QAAAA,KAAoB,kBADP,yKAUXA,IAAAA,KAAY,uCAVD,uBAUsDA,IAAAA,KAAY,gBAVlE,wnEAuCJuI,QAIDA,QAOSA,QAINA,QACFA,QAGA8mB,WAAWC,OAEHC,KAAbC,G","sources":["webpack://@web3os-core/kernel/./node_modules/.pnpm/ansi-colors@4.1.3/node_modules/ansi-colors/index.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/ansi-colors@4.1.3/node_modules/ansi-colors/symbols.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/arg@5.0.2/node_modules/arg/index.js","webpack://@web3os-core/kernel/./src/modules/peer/peer.module.css","webpack://@web3os-core/kernel/./node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/runtime/api.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/peerjs@2.0.0-beta.3/node_modules/peerjs/dist/peerjs.esm.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/shell-quote@1.7.3/node_modules/shell-quote/index.js","webpack://@web3os-core/kernel/./src/modules/peer/peer.module.css?8964","webpack://@web3os-core/kernel/./node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@web3os-core/kernel/./node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://@web3os-core/kernel/webpack/bootstrap","webpack://@web3os-core/kernel/webpack/runtime/compat get default export","webpack://@web3os-core/kernel/webpack/runtime/define property getters","webpack://@web3os-core/kernel/webpack/runtime/hasOwnProperty shorthand","webpack://@web3os-core/kernel/webpack/runtime/nonce","webpack://@web3os-core/kernel/./src/modules/peer/index.js"],"sourcesContent":["'use strict';\n\nconst isObject = val => val !== null && typeof val === 'object' && !Array.isArray(val);\n\n/* eslint-disable no-control-regex */\n// this is a modified version of https://github.com/chalk/ansi-regex (MIT License)\nconst ANSI_REGEX = /[\\u001b\\u009b][[\\]#;?()]*(?:(?:(?:[^\\W_]*;?[^\\W_]*)\\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g;\n\nconst hasColor = () => {\n  if (typeof process !== 'undefined') {\n    return process.env.FORCE_COLOR !== '0';\n  }\n  return false;\n};\n\nconst create = () => {\n  const colors = {\n    enabled: hasColor(),\n    visible: true,\n    styles: {},\n    keys: {}\n  };\n\n  const ansi = style => {\n    let open = style.open = `\\u001b[${style.codes[0]}m`;\n    let close = style.close = `\\u001b[${style.codes[1]}m`;\n    let regex = style.regex = new RegExp(`\\\\u001b\\\\[${style.codes[1]}m`, 'g');\n    style.wrap = (input, newline) => {\n      if (input.includes(close)) input = input.replace(regex, close + open);\n      let output = open + input + close;\n      // see https://github.com/chalk/chalk/pull/92, thanks to the\n      // chalk contributors for this fix. However, we've confirmed that\n      // this issue is also present in Windows terminals\n      return newline ? output.replace(/\\r*\\n/g, `${close}$&${open}`) : output;\n    };\n    return style;\n  };\n\n  const wrap = (style, input, newline) => {\n    return typeof style === 'function' ? style(input) : style.wrap(input, newline);\n  };\n\n  const style = (input, stack) => {\n    if (input === '' || input == null) return '';\n    if (colors.enabled === false) return input;\n    if (colors.visible === false) return '';\n    let str = '' + input;\n    let nl = str.includes('\\n');\n    let n = stack.length;\n    if (n > 0 && stack.includes('unstyle')) {\n      stack = [...new Set(['unstyle', ...stack])].reverse();\n    }\n    while (n-- > 0) str = wrap(colors.styles[stack[n]], str, nl);\n    return str;\n  };\n\n  const define = (name, codes, type) => {\n    colors.styles[name] = ansi({ name, codes });\n    let keys = colors.keys[type] || (colors.keys[type] = []);\n    keys.push(name);\n\n    Reflect.defineProperty(colors, name, {\n      configurable: true,\n      enumerable: true,\n      set(value) {\n        colors.alias(name, value);\n      },\n      get() {\n        let color = input => style(input, color.stack);\n        Reflect.setPrototypeOf(color, colors);\n        color.stack = this.stack ? this.stack.concat(name) : [name];\n        return color;\n      }\n    });\n  };\n\n  define('reset', [0, 0], 'modifier');\n  define('bold', [1, 22], 'modifier');\n  define('dim', [2, 22], 'modifier');\n  define('italic', [3, 23], 'modifier');\n  define('underline', [4, 24], 'modifier');\n  define('inverse', [7, 27], 'modifier');\n  define('hidden', [8, 28], 'modifier');\n  define('strikethrough', [9, 29], 'modifier');\n\n  define('black', [30, 39], 'color');\n  define('red', [31, 39], 'color');\n  define('green', [32, 39], 'color');\n  define('yellow', [33, 39], 'color');\n  define('blue', [34, 39], 'color');\n  define('magenta', [35, 39], 'color');\n  define('cyan', [36, 39], 'color');\n  define('white', [37, 39], 'color');\n  define('gray', [90, 39], 'color');\n  define('grey', [90, 39], 'color');\n\n  define('bgBlack', [40, 49], 'bg');\n  define('bgRed', [41, 49], 'bg');\n  define('bgGreen', [42, 49], 'bg');\n  define('bgYellow', [43, 49], 'bg');\n  define('bgBlue', [44, 49], 'bg');\n  define('bgMagenta', [45, 49], 'bg');\n  define('bgCyan', [46, 49], 'bg');\n  define('bgWhite', [47, 49], 'bg');\n\n  define('blackBright', [90, 39], 'bright');\n  define('redBright', [91, 39], 'bright');\n  define('greenBright', [92, 39], 'bright');\n  define('yellowBright', [93, 39], 'bright');\n  define('blueBright', [94, 39], 'bright');\n  define('magentaBright', [95, 39], 'bright');\n  define('cyanBright', [96, 39], 'bright');\n  define('whiteBright', [97, 39], 'bright');\n\n  define('bgBlackBright', [100, 49], 'bgBright');\n  define('bgRedBright', [101, 49], 'bgBright');\n  define('bgGreenBright', [102, 49], 'bgBright');\n  define('bgYellowBright', [103, 49], 'bgBright');\n  define('bgBlueBright', [104, 49], 'bgBright');\n  define('bgMagentaBright', [105, 49], 'bgBright');\n  define('bgCyanBright', [106, 49], 'bgBright');\n  define('bgWhiteBright', [107, 49], 'bgBright');\n\n  colors.ansiRegex = ANSI_REGEX;\n  colors.hasColor = colors.hasAnsi = str => {\n    colors.ansiRegex.lastIndex = 0;\n    return typeof str === 'string' && str !== '' && colors.ansiRegex.test(str);\n  };\n\n  colors.alias = (name, color) => {\n    let fn = typeof color === 'string' ? colors[color] : color;\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('Expected alias to be the name of an existing color (string) or a function');\n    }\n\n    if (!fn.stack) {\n      Reflect.defineProperty(fn, 'name', { value: name });\n      colors.styles[name] = fn;\n      fn.stack = [name];\n    }\n\n    Reflect.defineProperty(colors, name, {\n      configurable: true,\n      enumerable: true,\n      set(value) {\n        colors.alias(name, value);\n      },\n      get() {\n        let color = input => style(input, color.stack);\n        Reflect.setPrototypeOf(color, colors);\n        color.stack = this.stack ? this.stack.concat(fn.stack) : fn.stack;\n        return color;\n      }\n    });\n  };\n\n  colors.theme = custom => {\n    if (!isObject(custom)) throw new TypeError('Expected theme to be an object');\n    for (let name of Object.keys(custom)) {\n      colors.alias(name, custom[name]);\n    }\n    return colors;\n  };\n\n  colors.alias('unstyle', str => {\n    if (typeof str === 'string' && str !== '') {\n      colors.ansiRegex.lastIndex = 0;\n      return str.replace(colors.ansiRegex, '');\n    }\n    return '';\n  });\n\n  colors.alias('noop', str => str);\n  colors.none = colors.clear = colors.noop;\n\n  colors.stripColor = colors.unstyle;\n  colors.symbols = require('./symbols');\n  colors.define = define;\n  return colors;\n};\n\nmodule.exports = create();\nmodule.exports.create = create;\n","'use strict';\n\nconst isHyper = typeof process !== 'undefined' && process.env.TERM_PROGRAM === 'Hyper';\nconst isWindows = typeof process !== 'undefined' && process.platform === 'win32';\nconst isLinux = typeof process !== 'undefined' && process.platform === 'linux';\n\nconst common = {\n  ballotDisabled: '☒',\n  ballotOff: '☐',\n  ballotOn: '☑',\n  bullet: '•',\n  bulletWhite: '◦',\n  fullBlock: '█',\n  heart: '❤',\n  identicalTo: '≡',\n  line: '─',\n  mark: '※',\n  middot: '·',\n  minus: '－',\n  multiplication: '×',\n  obelus: '÷',\n  pencilDownRight: '✎',\n  pencilRight: '✏',\n  pencilUpRight: '✐',\n  percent: '%',\n  pilcrow2: '❡',\n  pilcrow: '¶',\n  plusMinus: '±',\n  question: '?',\n  section: '§',\n  starsOff: '☆',\n  starsOn: '★',\n  upDownArrow: '↕'\n};\n\nconst windows = Object.assign({}, common, {\n  check: '√',\n  cross: '×',\n  ellipsisLarge: '...',\n  ellipsis: '...',\n  info: 'i',\n  questionSmall: '?',\n  pointer: '>',\n  pointerSmall: '»',\n  radioOff: '( )',\n  radioOn: '(*)',\n  warning: '‼'\n});\n\nconst other = Object.assign({}, common, {\n  ballotCross: '✘',\n  check: '✔',\n  cross: '✖',\n  ellipsisLarge: '⋯',\n  ellipsis: '…',\n  info: 'ℹ',\n  questionFull: '？',\n  questionSmall: '﹖',\n  pointer: isLinux ? '▸' : '❯',\n  pointerSmall: isLinux ? '‣' : '›',\n  radioOff: '◯',\n  radioOn: '◉',\n  warning: '⚠'\n});\n\nmodule.exports = (isWindows && !isHyper) ? windows : other;\nReflect.defineProperty(module.exports, 'common', { enumerable: false, value: common });\nReflect.defineProperty(module.exports, 'windows', { enumerable: false, value: windows });\nReflect.defineProperty(module.exports, 'other', { enumerable: false, value: other });\n","const flagSymbol = Symbol('arg flag');\n\nclass ArgError extends Error {\n\tconstructor(msg, code) {\n\t\tsuper(msg);\n\t\tthis.name = 'ArgError';\n\t\tthis.code = code;\n\n\t\tObject.setPrototypeOf(this, ArgError.prototype);\n\t}\n}\n\nfunction arg(\n\topts,\n\t{\n\t\targv = process.argv.slice(2),\n\t\tpermissive = false,\n\t\tstopAtPositional = false\n\t} = {}\n) {\n\tif (!opts) {\n\t\tthrow new ArgError(\n\t\t\t'argument specification object is required',\n\t\t\t'ARG_CONFIG_NO_SPEC'\n\t\t);\n\t}\n\n\tconst result = { _: [] };\n\n\tconst aliases = {};\n\tconst handlers = {};\n\n\tfor (const key of Object.keys(opts)) {\n\t\tif (!key) {\n\t\t\tthrow new ArgError(\n\t\t\t\t'argument key cannot be an empty string',\n\t\t\t\t'ARG_CONFIG_EMPTY_KEY'\n\t\t\t);\n\t\t}\n\n\t\tif (key[0] !== '-') {\n\t\t\tthrow new ArgError(\n\t\t\t\t`argument key must start with '-' but found: '${key}'`,\n\t\t\t\t'ARG_CONFIG_NONOPT_KEY'\n\t\t\t);\n\t\t}\n\n\t\tif (key.length === 1) {\n\t\t\tthrow new ArgError(\n\t\t\t\t`argument key must have a name; singular '-' keys are not allowed: ${key}`,\n\t\t\t\t'ARG_CONFIG_NONAME_KEY'\n\t\t\t);\n\t\t}\n\n\t\tif (typeof opts[key] === 'string') {\n\t\t\taliases[key] = opts[key];\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet type = opts[key];\n\t\tlet isFlag = false;\n\n\t\tif (\n\t\t\tArray.isArray(type) &&\n\t\t\ttype.length === 1 &&\n\t\t\ttypeof type[0] === 'function'\n\t\t) {\n\t\t\tconst [fn] = type;\n\t\t\ttype = (value, name, prev = []) => {\n\t\t\t\tprev.push(fn(value, name, prev[prev.length - 1]));\n\t\t\t\treturn prev;\n\t\t\t};\n\t\t\tisFlag = fn === Boolean || fn[flagSymbol] === true;\n\t\t} else if (typeof type === 'function') {\n\t\t\tisFlag = type === Boolean || type[flagSymbol] === true;\n\t\t} else {\n\t\t\tthrow new ArgError(\n\t\t\t\t`type missing or not a function or valid array type: ${key}`,\n\t\t\t\t'ARG_CONFIG_VAD_TYPE'\n\t\t\t);\n\t\t}\n\n\t\tif (key[1] !== '-' && key.length > 2) {\n\t\t\tthrow new ArgError(\n\t\t\t\t`short argument keys (with a single hyphen) must have only one character: ${key}`,\n\t\t\t\t'ARG_CONFIG_SHORTOPT_TOOLONG'\n\t\t\t);\n\t\t}\n\n\t\thandlers[key] = [type, isFlag];\n\t}\n\n\tfor (let i = 0, len = argv.length; i < len; i++) {\n\t\tconst wholeArg = argv[i];\n\n\t\tif (stopAtPositional && result._.length > 0) {\n\t\t\tresult._ = result._.concat(argv.slice(i));\n\t\t\tbreak;\n\t\t}\n\n\t\tif (wholeArg === '--') {\n\t\t\tresult._ = result._.concat(argv.slice(i + 1));\n\t\t\tbreak;\n\t\t}\n\n\t\tif (wholeArg.length > 1 && wholeArg[0] === '-') {\n\t\t\t/* eslint-disable operator-linebreak */\n\t\t\tconst separatedArguments =\n\t\t\t\twholeArg[1] === '-' || wholeArg.length === 2\n\t\t\t\t\t? [wholeArg]\n\t\t\t\t\t: wholeArg\n\t\t\t\t\t\t\t.slice(1)\n\t\t\t\t\t\t\t.split('')\n\t\t\t\t\t\t\t.map((a) => `-${a}`);\n\t\t\t/* eslint-enable operator-linebreak */\n\n\t\t\tfor (let j = 0; j < separatedArguments.length; j++) {\n\t\t\t\tconst arg = separatedArguments[j];\n\t\t\t\tconst [originalArgName, argStr] =\n\t\t\t\t\targ[1] === '-' ? arg.split(/=(.*)/, 2) : [arg, undefined];\n\n\t\t\t\tlet argName = originalArgName;\n\t\t\t\twhile (argName in aliases) {\n\t\t\t\t\targName = aliases[argName];\n\t\t\t\t}\n\n\t\t\t\tif (!(argName in handlers)) {\n\t\t\t\t\tif (permissive) {\n\t\t\t\t\t\tresult._.push(arg);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new ArgError(\n\t\t\t\t\t\t\t`unknown or unexpected option: ${originalArgName}`,\n\t\t\t\t\t\t\t'ARG_UNKNOWN_OPTION'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst [type, isFlag] = handlers[argName];\n\n\t\t\t\tif (!isFlag && j + 1 < separatedArguments.length) {\n\t\t\t\t\tthrow new ArgError(\n\t\t\t\t\t\t`option requires argument (but was followed by another short argument): ${originalArgName}`,\n\t\t\t\t\t\t'ARG_MISSING_REQUIRED_SHORTARG'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (isFlag) {\n\t\t\t\t\tresult[argName] = type(true, argName, result[argName]);\n\t\t\t\t} else if (argStr === undefined) {\n\t\t\t\t\tif (\n\t\t\t\t\t\targv.length < i + 2 ||\n\t\t\t\t\t\t(argv[i + 1].length > 1 &&\n\t\t\t\t\t\t\targv[i + 1][0] === '-' &&\n\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\targv[i + 1].match(/^-?\\d*(\\.(?=\\d))?\\d*$/) &&\n\t\t\t\t\t\t\t\t(type === Number ||\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t\t\t\t(typeof BigInt !== 'undefined' && type === BigInt))\n\t\t\t\t\t\t\t))\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst extended =\n\t\t\t\t\t\t\toriginalArgName === argName ? '' : ` (alias for ${argName})`;\n\t\t\t\t\t\tthrow new ArgError(\n\t\t\t\t\t\t\t`option requires argument: ${originalArgName}${extended}`,\n\t\t\t\t\t\t\t'ARG_MISSING_REQUIRED_LONGARG'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[argName] = type(argv[i + 1], argName, result[argName]);\n\t\t\t\t\t++i;\n\t\t\t\t} else {\n\t\t\t\t\tresult[argName] = type(argStr, argName, result[argName]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tresult._.push(wholeArg);\n\t\t}\n\t}\n\n\treturn result;\n}\n\narg.flag = (fn) => {\n\tfn[flagSymbol] = true;\n\treturn fn;\n};\n\n// Utility types\narg.COUNT = arg.flag((v, name, existingCount) => (existingCount || 0) + 1);\n\n// Expose error class\narg.ArgError = ArgError;\n\nmodule.exports = arg;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".IXur10FyYhrkjdvL3YJP {\\r\\n  margin: 0;\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.Nxb7VY3RhqzBAaj_3s8J {\\r\\n  height: 90%;\\r\\n  overflow: auto;\\r\\n  background-color: #121212;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.MhcT1i3sp9dBktHySC03 {\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.qrJhI8vNNSz0qaxx22_Q {\\r\\n  font-size: 2rem;\\r\\n  width: 90%;\\r\\n  color: initial;\\r\\n}\\r\\n\\r\\n.aabZYBE305DiKzB6h3IU {\\r\\n  font-weight: bolder;\\r\\n  width: 10%;\\r\\n  background-color: #121212;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n.nL1fGx34jqk7g144uRHx, .MMWAN9tEXWurIiikyhFR {\\r\\n  position: relative;\\r\\n  padding: 1rem;\\r\\n  border-radius: 20px;\\r\\n  max-width: 30%;\\r\\n  min-width: 10ch;\\r\\n  margin: 1rem;\\r\\n  word-wrap: break-word;\\r\\n}\\r\\n\\r\\n.nL1fGx34jqk7g144uRHx {\\r\\n  background-color: #00aabb;\\r\\n  align-self: flex-start;\\r\\n}\\r\\n\\r\\n.MMWAN9tEXWurIiikyhFR {\\r\\n  background-color: #00bd26;\\r\\n  align-self: flex-end;\\r\\n}\\r\\n\\r\\n.nL1fGx34jqk7g144uRHx:after, .MMWAN9tEXWurIiikyhFR:after {\\r\\n  content: '';\\r\\n\\tposition: absolute;\\r\\n\\tbottom: 0;\\r\\n\\tleft: 50%;\\r\\n\\twidth: 0;\\r\\n\\theight: 0;\\r\\n\\tborder: 20px solid transparent;\\r\\n  border-bottom: 0;\\r\\n\\tmargin-left: -10px;\\r\\n\\tmargin-bottom: -20px;\\r\\n}\\r\\n\\r\\n.nL1fGx34jqk7g144uRHx:after {\\r\\n\\tborder-top-color: #00aabb;\\r\\n  border-left: 0;\\r\\n}\\r\\n\\r\\n.MMWAN9tEXWurIiikyhFR:after {\\r\\n\\tborder-top-color: #00bd26;\\r\\n  border-right: 0;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/modules/peer/peer.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,SAAS;EACT,YAAY;EACZ,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,WAAW;EACX,cAAc;EACd,yBAAyB;EACzB,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,eAAe;EACf,UAAU;EACV,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,UAAU;EACV,yBAAyB;EACzB,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,YAAY;EACZ,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,sBAAsB;AACxB;;AAEA;EACE,yBAAyB;EACzB,oBAAoB;AACtB;;AAEA;EACE,WAAW;CACZ,kBAAkB;CAClB,SAAS;CACT,SAAS;CACT,QAAQ;CACR,SAAS;CACT,8BAA8B;EAC7B,gBAAgB;CACjB,kBAAkB;CAClB,oBAAoB;AACrB;;AAEA;CACC,yBAAyB;EACxB,cAAc;AAChB;;AAEA;CACC,yBAAyB;EACxB,eAAe;AACjB\",\"sourcesContent\":[\".container {\\r\\n  margin: 0;\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.chat {\\r\\n  height: 90%;\\r\\n  overflow: auto;\\r\\n  background-color: #121212;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.form {\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.input {\\r\\n  font-size: 2rem;\\r\\n  width: 90%;\\r\\n  color: initial;\\r\\n}\\r\\n\\r\\n.button {\\r\\n  font-weight: bolder;\\r\\n  width: 10%;\\r\\n  background-color: #121212;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\n.toMe, .fromMe {\\r\\n  position: relative;\\r\\n  padding: 1rem;\\r\\n  border-radius: 20px;\\r\\n  max-width: 30%;\\r\\n  min-width: 10ch;\\r\\n  margin: 1rem;\\r\\n  word-wrap: break-word;\\r\\n}\\r\\n\\r\\n.toMe {\\r\\n  background-color: #00aabb;\\r\\n  align-self: flex-start;\\r\\n}\\r\\n\\r\\n.fromMe {\\r\\n  background-color: #00bd26;\\r\\n  align-self: flex-end;\\r\\n}\\r\\n\\r\\n.toMe:after, .fromMe:after {\\r\\n  content: '';\\r\\n\\tposition: absolute;\\r\\n\\tbottom: 0;\\r\\n\\tleft: 50%;\\r\\n\\twidth: 0;\\r\\n\\theight: 0;\\r\\n\\tborder: 20px solid transparent;\\r\\n  border-bottom: 0;\\r\\n\\tmargin-left: -10px;\\r\\n\\tmargin-bottom: -20px;\\r\\n}\\r\\n\\r\\n.toMe:after {\\r\\n\\tborder-top-color: #00aabb;\\r\\n  border-left: 0;\\r\\n}\\r\\n\\r\\n.fromMe:after {\\r\\n\\tborder-top-color: #00bd26;\\r\\n  border-right: 0;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"container\": \"IXur10FyYhrkjdvL3YJP\",\n\t\"chat\": \"Nxb7VY3RhqzBAaj_3s8J\",\n\t\"form\": \"MhcT1i3sp9dBktHySC03\",\n\t\"input\": \"qrJhI8vNNSz0qaxx22_Q\",\n\t\"button\": \"aabZYBE305DiKzB6h3IU\",\n\t\"toMe\": \"nL1fGx34jqk7g144uRHx\",\n\t\"fromMe\": \"MMWAN9tEXWurIiikyhFR\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toESM = (module, isNodeMode) => {\n  return __reExport(__markAsModule(__defProp(module != null ? __create(__getProtoOf(module)) : {}, \"default\", !isNodeMode && module && module.__esModule ? { get: () => module.default, enumerable: true } : { value: module, enumerable: true })), module);\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// node_modules/peerjs-js-binarypack/lib/bufferbuilder.js\nvar require_bufferbuilder = __commonJS({\n  \"node_modules/peerjs-js-binarypack/lib/bufferbuilder.js\"(exports, module) {\n    var binaryFeatures = {};\n    binaryFeatures.useBlobBuilder = function() {\n      try {\n        new Blob([]);\n        return false;\n      } catch (e) {\n        return true;\n      }\n    }();\n    binaryFeatures.useArrayBufferView = !binaryFeatures.useBlobBuilder && function() {\n      try {\n        return new Blob([new Uint8Array([])]).size === 0;\n      } catch (e) {\n        return true;\n      }\n    }();\n    module.exports.binaryFeatures = binaryFeatures;\n    var BlobBuilder = module.exports.BlobBuilder;\n    if (typeof window !== \"undefined\") {\n      BlobBuilder = module.exports.BlobBuilder = window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder || window.BlobBuilder;\n    }\n    function BufferBuilder() {\n      this._pieces = [];\n      this._parts = [];\n    }\n    BufferBuilder.prototype.append = function(data) {\n      if (typeof data === \"number\") {\n        this._pieces.push(data);\n      } else {\n        this.flush();\n        this._parts.push(data);\n      }\n    };\n    BufferBuilder.prototype.flush = function() {\n      if (this._pieces.length > 0) {\n        var buf = new Uint8Array(this._pieces);\n        if (!binaryFeatures.useArrayBufferView) {\n          buf = buf.buffer;\n        }\n        this._parts.push(buf);\n        this._pieces = [];\n      }\n    };\n    BufferBuilder.prototype.getBuffer = function() {\n      this.flush();\n      if (binaryFeatures.useBlobBuilder) {\n        var builder = new BlobBuilder();\n        for (var i = 0, ii = this._parts.length; i < ii; i++) {\n          builder.append(this._parts[i]);\n        }\n        return builder.getBlob();\n      } else {\n        return new Blob(this._parts);\n      }\n    };\n    module.exports.BufferBuilder = BufferBuilder;\n  }\n});\n\n// node_modules/peerjs-js-binarypack/lib/binarypack.js\nvar require_binarypack = __commonJS({\n  \"node_modules/peerjs-js-binarypack/lib/binarypack.js\"(exports, module) {\n    var BufferBuilder = require_bufferbuilder().BufferBuilder;\n    var binaryFeatures = require_bufferbuilder().binaryFeatures;\n    var BinaryPack2 = {\n      unpack: function(data) {\n        var unpacker = new Unpacker(data);\n        return unpacker.unpack();\n      },\n      pack: function(data) {\n        var packer = new Packer();\n        packer.pack(data);\n        var buffer = packer.getBuffer();\n        return buffer;\n      }\n    };\n    module.exports = BinaryPack2;\n    function Unpacker(data) {\n      this.index = 0;\n      this.dataBuffer = data;\n      this.dataView = new Uint8Array(this.dataBuffer);\n      this.length = this.dataBuffer.byteLength;\n    }\n    Unpacker.prototype.unpack = function() {\n      var type = this.unpack_uint8();\n      if (type < 128) {\n        return type;\n      } else if ((type ^ 224) < 32) {\n        return (type ^ 224) - 32;\n      }\n      var size;\n      if ((size = type ^ 160) <= 15) {\n        return this.unpack_raw(size);\n      } else if ((size = type ^ 176) <= 15) {\n        return this.unpack_string(size);\n      } else if ((size = type ^ 144) <= 15) {\n        return this.unpack_array(size);\n      } else if ((size = type ^ 128) <= 15) {\n        return this.unpack_map(size);\n      }\n      switch (type) {\n        case 192:\n          return null;\n        case 193:\n          return void 0;\n        case 194:\n          return false;\n        case 195:\n          return true;\n        case 202:\n          return this.unpack_float();\n        case 203:\n          return this.unpack_double();\n        case 204:\n          return this.unpack_uint8();\n        case 205:\n          return this.unpack_uint16();\n        case 206:\n          return this.unpack_uint32();\n        case 207:\n          return this.unpack_uint64();\n        case 208:\n          return this.unpack_int8();\n        case 209:\n          return this.unpack_int16();\n        case 210:\n          return this.unpack_int32();\n        case 211:\n          return this.unpack_int64();\n        case 212:\n          return void 0;\n        case 213:\n          return void 0;\n        case 214:\n          return void 0;\n        case 215:\n          return void 0;\n        case 216:\n          size = this.unpack_uint16();\n          return this.unpack_string(size);\n        case 217:\n          size = this.unpack_uint32();\n          return this.unpack_string(size);\n        case 218:\n          size = this.unpack_uint16();\n          return this.unpack_raw(size);\n        case 219:\n          size = this.unpack_uint32();\n          return this.unpack_raw(size);\n        case 220:\n          size = this.unpack_uint16();\n          return this.unpack_array(size);\n        case 221:\n          size = this.unpack_uint32();\n          return this.unpack_array(size);\n        case 222:\n          size = this.unpack_uint16();\n          return this.unpack_map(size);\n        case 223:\n          size = this.unpack_uint32();\n          return this.unpack_map(size);\n      }\n    };\n    Unpacker.prototype.unpack_uint8 = function() {\n      var byte = this.dataView[this.index] & 255;\n      this.index++;\n      return byte;\n    };\n    Unpacker.prototype.unpack_uint16 = function() {\n      var bytes = this.read(2);\n      var uint16 = (bytes[0] & 255) * 256 + (bytes[1] & 255);\n      this.index += 2;\n      return uint16;\n    };\n    Unpacker.prototype.unpack_uint32 = function() {\n      var bytes = this.read(4);\n      var uint32 = ((bytes[0] * 256 + bytes[1]) * 256 + bytes[2]) * 256 + bytes[3];\n      this.index += 4;\n      return uint32;\n    };\n    Unpacker.prototype.unpack_uint64 = function() {\n      var bytes = this.read(8);\n      var uint64 = ((((((bytes[0] * 256 + bytes[1]) * 256 + bytes[2]) * 256 + bytes[3]) * 256 + bytes[4]) * 256 + bytes[5]) * 256 + bytes[6]) * 256 + bytes[7];\n      this.index += 8;\n      return uint64;\n    };\n    Unpacker.prototype.unpack_int8 = function() {\n      var uint8 = this.unpack_uint8();\n      return uint8 < 128 ? uint8 : uint8 - (1 << 8);\n    };\n    Unpacker.prototype.unpack_int16 = function() {\n      var uint16 = this.unpack_uint16();\n      return uint16 < 32768 ? uint16 : uint16 - (1 << 16);\n    };\n    Unpacker.prototype.unpack_int32 = function() {\n      var uint32 = this.unpack_uint32();\n      return uint32 < Math.pow(2, 31) ? uint32 : uint32 - Math.pow(2, 32);\n    };\n    Unpacker.prototype.unpack_int64 = function() {\n      var uint64 = this.unpack_uint64();\n      return uint64 < Math.pow(2, 63) ? uint64 : uint64 - Math.pow(2, 64);\n    };\n    Unpacker.prototype.unpack_raw = function(size) {\n      if (this.length < this.index + size) {\n        throw new Error(\"BinaryPackFailure: index is out of range \" + this.index + \" \" + size + \" \" + this.length);\n      }\n      var buf = this.dataBuffer.slice(this.index, this.index + size);\n      this.index += size;\n      return buf;\n    };\n    Unpacker.prototype.unpack_string = function(size) {\n      var bytes = this.read(size);\n      var i = 0;\n      var str = \"\";\n      var c;\n      var code;\n      while (i < size) {\n        c = bytes[i];\n        if (c < 128) {\n          str += String.fromCharCode(c);\n          i++;\n        } else if ((c ^ 192) < 32) {\n          code = (c ^ 192) << 6 | bytes[i + 1] & 63;\n          str += String.fromCharCode(code);\n          i += 2;\n        } else {\n          code = (c & 15) << 12 | (bytes[i + 1] & 63) << 6 | bytes[i + 2] & 63;\n          str += String.fromCharCode(code);\n          i += 3;\n        }\n      }\n      this.index += size;\n      return str;\n    };\n    Unpacker.prototype.unpack_array = function(size) {\n      var objects = new Array(size);\n      for (var i = 0; i < size; i++) {\n        objects[i] = this.unpack();\n      }\n      return objects;\n    };\n    Unpacker.prototype.unpack_map = function(size) {\n      var map = {};\n      for (var i = 0; i < size; i++) {\n        var key = this.unpack();\n        var value = this.unpack();\n        map[key] = value;\n      }\n      return map;\n    };\n    Unpacker.prototype.unpack_float = function() {\n      var uint32 = this.unpack_uint32();\n      var sign = uint32 >> 31;\n      var exp = (uint32 >> 23 & 255) - 127;\n      var fraction = uint32 & 8388607 | 8388608;\n      return (sign === 0 ? 1 : -1) * fraction * Math.pow(2, exp - 23);\n    };\n    Unpacker.prototype.unpack_double = function() {\n      var h32 = this.unpack_uint32();\n      var l32 = this.unpack_uint32();\n      var sign = h32 >> 31;\n      var exp = (h32 >> 20 & 2047) - 1023;\n      var hfrac = h32 & 1048575 | 1048576;\n      var frac = hfrac * Math.pow(2, exp - 20) + l32 * Math.pow(2, exp - 52);\n      return (sign === 0 ? 1 : -1) * frac;\n    };\n    Unpacker.prototype.read = function(length) {\n      var j = this.index;\n      if (j + length <= this.length) {\n        return this.dataView.subarray(j, j + length);\n      } else {\n        throw new Error(\"BinaryPackFailure: read index out of range\");\n      }\n    };\n    function Packer() {\n      this.bufferBuilder = new BufferBuilder();\n    }\n    Packer.prototype.getBuffer = function() {\n      return this.bufferBuilder.getBuffer();\n    };\n    Packer.prototype.pack = function(value) {\n      var type = typeof value;\n      if (type === \"string\") {\n        this.pack_string(value);\n      } else if (type === \"number\") {\n        if (Math.floor(value) === value) {\n          this.pack_integer(value);\n        } else {\n          this.pack_double(value);\n        }\n      } else if (type === \"boolean\") {\n        if (value === true) {\n          this.bufferBuilder.append(195);\n        } else if (value === false) {\n          this.bufferBuilder.append(194);\n        }\n      } else if (type === \"undefined\") {\n        this.bufferBuilder.append(192);\n      } else if (type === \"object\") {\n        if (value === null) {\n          this.bufferBuilder.append(192);\n        } else {\n          var constructor = value.constructor;\n          if (constructor == Array) {\n            this.pack_array(value);\n          } else if (constructor == Blob || constructor == File || value instanceof Blob || value instanceof File) {\n            this.pack_bin(value);\n          } else if (constructor == ArrayBuffer) {\n            if (binaryFeatures.useArrayBufferView) {\n              this.pack_bin(new Uint8Array(value));\n            } else {\n              this.pack_bin(value);\n            }\n          } else if (\"BYTES_PER_ELEMENT\" in value) {\n            if (binaryFeatures.useArrayBufferView) {\n              this.pack_bin(new Uint8Array(value.buffer));\n            } else {\n              this.pack_bin(value.buffer);\n            }\n          } else if (constructor == Object || constructor.toString().startsWith(\"class\")) {\n            this.pack_object(value);\n          } else if (constructor == Date) {\n            this.pack_string(value.toString());\n          } else if (typeof value.toBinaryPack === \"function\") {\n            this.bufferBuilder.append(value.toBinaryPack());\n          } else {\n            throw new Error('Type \"' + constructor.toString() + '\" not yet supported');\n          }\n        }\n      } else {\n        throw new Error('Type \"' + type + '\" not yet supported');\n      }\n      this.bufferBuilder.flush();\n    };\n    Packer.prototype.pack_bin = function(blob) {\n      var length = blob.length || blob.byteLength || blob.size;\n      if (length <= 15) {\n        this.pack_uint8(160 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(218);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(219);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      this.bufferBuilder.append(blob);\n    };\n    Packer.prototype.pack_string = function(str) {\n      var length = utf8Length(str);\n      if (length <= 15) {\n        this.pack_uint8(176 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(216);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(217);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      this.bufferBuilder.append(str);\n    };\n    Packer.prototype.pack_array = function(ary) {\n      var length = ary.length;\n      if (length <= 15) {\n        this.pack_uint8(144 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(220);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(221);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      for (var i = 0; i < length; i++) {\n        this.pack(ary[i]);\n      }\n    };\n    Packer.prototype.pack_integer = function(num) {\n      if (num >= -32 && num <= 127) {\n        this.bufferBuilder.append(num & 255);\n      } else if (num >= 0 && num <= 255) {\n        this.bufferBuilder.append(204);\n        this.pack_uint8(num);\n      } else if (num >= -128 && num <= 127) {\n        this.bufferBuilder.append(208);\n        this.pack_int8(num);\n      } else if (num >= 0 && num <= 65535) {\n        this.bufferBuilder.append(205);\n        this.pack_uint16(num);\n      } else if (num >= -32768 && num <= 32767) {\n        this.bufferBuilder.append(209);\n        this.pack_int16(num);\n      } else if (num >= 0 && num <= 4294967295) {\n        this.bufferBuilder.append(206);\n        this.pack_uint32(num);\n      } else if (num >= -2147483648 && num <= 2147483647) {\n        this.bufferBuilder.append(210);\n        this.pack_int32(num);\n      } else if (num >= -9223372036854776e3 && num <= 9223372036854776e3) {\n        this.bufferBuilder.append(211);\n        this.pack_int64(num);\n      } else if (num >= 0 && num <= 18446744073709552e3) {\n        this.bufferBuilder.append(207);\n        this.pack_uint64(num);\n      } else {\n        throw new Error(\"Invalid integer\");\n      }\n    };\n    Packer.prototype.pack_double = function(num) {\n      var sign = 0;\n      if (num < 0) {\n        sign = 1;\n        num = -num;\n      }\n      var exp = Math.floor(Math.log(num) / Math.LN2);\n      var frac0 = num / Math.pow(2, exp) - 1;\n      var frac1 = Math.floor(frac0 * Math.pow(2, 52));\n      var b32 = Math.pow(2, 32);\n      var h32 = sign << 31 | exp + 1023 << 20 | frac1 / b32 & 1048575;\n      var l32 = frac1 % b32;\n      this.bufferBuilder.append(203);\n      this.pack_int32(h32);\n      this.pack_int32(l32);\n    };\n    Packer.prototype.pack_object = function(obj) {\n      var keys = Object.keys(obj);\n      var length = keys.length;\n      if (length <= 15) {\n        this.pack_uint8(128 + length);\n      } else if (length <= 65535) {\n        this.bufferBuilder.append(222);\n        this.pack_uint16(length);\n      } else if (length <= 4294967295) {\n        this.bufferBuilder.append(223);\n        this.pack_uint32(length);\n      } else {\n        throw new Error(\"Invalid length\");\n      }\n      for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          this.pack(prop);\n          this.pack(obj[prop]);\n        }\n      }\n    };\n    Packer.prototype.pack_uint8 = function(num) {\n      this.bufferBuilder.append(num);\n    };\n    Packer.prototype.pack_uint16 = function(num) {\n      this.bufferBuilder.append(num >> 8);\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_uint32 = function(num) {\n      var n = num & 4294967295;\n      this.bufferBuilder.append((n & 4278190080) >>> 24);\n      this.bufferBuilder.append((n & 16711680) >>> 16);\n      this.bufferBuilder.append((n & 65280) >>> 8);\n      this.bufferBuilder.append(n & 255);\n    };\n    Packer.prototype.pack_uint64 = function(num) {\n      var high = num / Math.pow(2, 32);\n      var low = num % Math.pow(2, 32);\n      this.bufferBuilder.append((high & 4278190080) >>> 24);\n      this.bufferBuilder.append((high & 16711680) >>> 16);\n      this.bufferBuilder.append((high & 65280) >>> 8);\n      this.bufferBuilder.append(high & 255);\n      this.bufferBuilder.append((low & 4278190080) >>> 24);\n      this.bufferBuilder.append((low & 16711680) >>> 16);\n      this.bufferBuilder.append((low & 65280) >>> 8);\n      this.bufferBuilder.append(low & 255);\n    };\n    Packer.prototype.pack_int8 = function(num) {\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_int16 = function(num) {\n      this.bufferBuilder.append((num & 65280) >> 8);\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_int32 = function(num) {\n      this.bufferBuilder.append(num >>> 24 & 255);\n      this.bufferBuilder.append((num & 16711680) >>> 16);\n      this.bufferBuilder.append((num & 65280) >>> 8);\n      this.bufferBuilder.append(num & 255);\n    };\n    Packer.prototype.pack_int64 = function(num) {\n      var high = Math.floor(num / Math.pow(2, 32));\n      var low = num % Math.pow(2, 32);\n      this.bufferBuilder.append((high & 4278190080) >>> 24);\n      this.bufferBuilder.append((high & 16711680) >>> 16);\n      this.bufferBuilder.append((high & 65280) >>> 8);\n      this.bufferBuilder.append(high & 255);\n      this.bufferBuilder.append((low & 4278190080) >>> 24);\n      this.bufferBuilder.append((low & 16711680) >>> 16);\n      this.bufferBuilder.append((low & 65280) >>> 8);\n      this.bufferBuilder.append(low & 255);\n    };\n    function _utf8Replace(m) {\n      var code = m.charCodeAt(0);\n      if (code <= 2047)\n        return \"00\";\n      if (code <= 65535)\n        return \"000\";\n      if (code <= 2097151)\n        return \"0000\";\n      if (code <= 67108863)\n        return \"00000\";\n      return \"000000\";\n    }\n    function utf8Length(str) {\n      if (str.length > 600) {\n        return new Blob([str]).size;\n      } else {\n        return str.replace(/[^\\u0000-\\u007F]/g, _utf8Replace).length;\n      }\n    }\n  }\n});\n\n// node_modules/eventemitter3/index.js\nvar require_eventemitter3 = __commonJS({\n  \"node_modules/eventemitter3/index.js\"(exports, module) {\n    \"use strict\";\n    var has = Object.prototype.hasOwnProperty;\n    var prefix = \"~\";\n    function Events() {\n    }\n    if (Object.create) {\n      Events.prototype = /* @__PURE__ */ Object.create(null);\n      if (!new Events().__proto__)\n        prefix = false;\n    }\n    function EE(fn, context, once) {\n      this.fn = fn;\n      this.context = context;\n      this.once = once || false;\n    }\n    function addListener(emitter, event, fn, context, once) {\n      if (typeof fn !== \"function\") {\n        throw new TypeError(\"The listener must be a function\");\n      }\n      var listener = new EE(fn, context || emitter, once), evt = prefix ? prefix + event : event;\n      if (!emitter._events[evt])\n        emitter._events[evt] = listener, emitter._eventsCount++;\n      else if (!emitter._events[evt].fn)\n        emitter._events[evt].push(listener);\n      else\n        emitter._events[evt] = [emitter._events[evt], listener];\n      return emitter;\n    }\n    function clearEvent(emitter, evt) {\n      if (--emitter._eventsCount === 0)\n        emitter._events = new Events();\n      else\n        delete emitter._events[evt];\n    }\n    function EventEmitter5() {\n      this._events = new Events();\n      this._eventsCount = 0;\n    }\n    EventEmitter5.prototype.eventNames = function eventNames() {\n      var names = [], events, name;\n      if (this._eventsCount === 0)\n        return names;\n      for (name in events = this._events) {\n        if (has.call(events, name))\n          names.push(prefix ? name.slice(1) : name);\n      }\n      if (Object.getOwnPropertySymbols) {\n        return names.concat(Object.getOwnPropertySymbols(events));\n      }\n      return names;\n    };\n    EventEmitter5.prototype.listeners = function listeners(event) {\n      var evt = prefix ? prefix + event : event, handlers = this._events[evt];\n      if (!handlers)\n        return [];\n      if (handlers.fn)\n        return [handlers.fn];\n      for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n        ee[i] = handlers[i].fn;\n      }\n      return ee;\n    };\n    EventEmitter5.prototype.listenerCount = function listenerCount(event) {\n      var evt = prefix ? prefix + event : event, listeners = this._events[evt];\n      if (!listeners)\n        return 0;\n      if (listeners.fn)\n        return 1;\n      return listeners.length;\n    };\n    EventEmitter5.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n      var evt = prefix ? prefix + event : event;\n      if (!this._events[evt])\n        return false;\n      var listeners = this._events[evt], len = arguments.length, args, i;\n      if (listeners.fn) {\n        if (listeners.once)\n          this.removeListener(event, listeners.fn, void 0, true);\n        switch (len) {\n          case 1:\n            return listeners.fn.call(listeners.context), true;\n          case 2:\n            return listeners.fn.call(listeners.context, a1), true;\n          case 3:\n            return listeners.fn.call(listeners.context, a1, a2), true;\n          case 4:\n            return listeners.fn.call(listeners.context, a1, a2, a3), true;\n          case 5:\n            return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n          case 6:\n            return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n        for (i = 1, args = new Array(len - 1); i < len; i++) {\n          args[i - 1] = arguments[i];\n        }\n        listeners.fn.apply(listeners.context, args);\n      } else {\n        var length = listeners.length, j;\n        for (i = 0; i < length; i++) {\n          if (listeners[i].once)\n            this.removeListener(event, listeners[i].fn, void 0, true);\n          switch (len) {\n            case 1:\n              listeners[i].fn.call(listeners[i].context);\n              break;\n            case 2:\n              listeners[i].fn.call(listeners[i].context, a1);\n              break;\n            case 3:\n              listeners[i].fn.call(listeners[i].context, a1, a2);\n              break;\n            case 4:\n              listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n              break;\n            default:\n              if (!args)\n                for (j = 1, args = new Array(len - 1); j < len; j++) {\n                  args[j - 1] = arguments[j];\n                }\n              listeners[i].fn.apply(listeners[i].context, args);\n          }\n        }\n      }\n      return true;\n    };\n    EventEmitter5.prototype.on = function on(event, fn, context) {\n      return addListener(this, event, fn, context, false);\n    };\n    EventEmitter5.prototype.once = function once(event, fn, context) {\n      return addListener(this, event, fn, context, true);\n    };\n    EventEmitter5.prototype.removeListener = function removeListener(event, fn, context, once) {\n      var evt = prefix ? prefix + event : event;\n      if (!this._events[evt])\n        return this;\n      if (!fn) {\n        clearEvent(this, evt);\n        return this;\n      }\n      var listeners = this._events[evt];\n      if (listeners.fn) {\n        if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {\n          clearEvent(this, evt);\n        }\n      } else {\n        for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n          if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {\n            events.push(listeners[i]);\n          }\n        }\n        if (events.length)\n          this._events[evt] = events.length === 1 ? events[0] : events;\n        else\n          clearEvent(this, evt);\n      }\n      return this;\n    };\n    EventEmitter5.prototype.removeAllListeners = function removeAllListeners(event) {\n      var evt;\n      if (event) {\n        evt = prefix ? prefix + event : event;\n        if (this._events[evt])\n          clearEvent(this, evt);\n      } else {\n        this._events = new Events();\n        this._eventsCount = 0;\n      }\n      return this;\n    };\n    EventEmitter5.prototype.off = EventEmitter5.prototype.removeListener;\n    EventEmitter5.prototype.addListener = EventEmitter5.prototype.on;\n    EventEmitter5.prefixed = prefix;\n    EventEmitter5.EventEmitter = EventEmitter5;\n    if (typeof module !== \"undefined\") {\n      module.exports = EventEmitter5;\n    }\n  }\n});\n\n// lib/utils.ts\nvar BinaryPack = __toESM(require_binarypack());\nvar DEFAULT_CONFIG = {\n  iceServers: [\n    { urls: \"stun:stun.l.google.com:19302\" },\n    { urls: \"turn:0.peerjs.com:3478\", username: \"peerjs\", credential: \"peerjsp\" }\n  ],\n  sdpSemantics: \"unified-plan\"\n};\nvar Utils = new class {\n  constructor() {\n    this.CLOUD_HOST = \"0.peerjs.com\";\n    this.CLOUD_PORT = 443;\n    this.chunkedMTU = 16300;\n    this.defaultConfig = DEFAULT_CONFIG;\n    this.pack = BinaryPack.pack;\n    this.unpack = BinaryPack.unpack;\n    this._dataCount = 1;\n  }\n  validateId(id) {\n    return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n  }\n  chunk(blob) {\n    const chunks = [];\n    const size = blob.size;\n    const total = Math.ceil(size / Utils.chunkedMTU);\n    let index = 0;\n    let start = 0;\n    while (start < size) {\n      const end = Math.min(size, start + Utils.chunkedMTU);\n      const b = blob.slice(start, end);\n      const chunk = {\n        __peerData: this._dataCount,\n        n: index,\n        data: b,\n        total\n      };\n      chunks.push(chunk);\n      start = end;\n      index++;\n    }\n    this._dataCount++;\n    return chunks;\n  }\n  blobToArrayBuffer(FileReaderCtr, blob, cb) {\n    const fr = new FileReaderCtr();\n    fr.onload = function(evt) {\n      if (evt.target) {\n        cb(evt.target.result);\n      }\n    };\n    fr.readAsArrayBuffer(blob);\n    return fr;\n  }\n  binaryStringToArrayBuffer(binary) {\n    const byteArray = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      byteArray[i] = binary.charCodeAt(i) & 255;\n    }\n    return byteArray.buffer;\n  }\n  randomToken() {\n    return Math.random().toString(36).substr(2);\n  }\n  isSecure() {\n    return location.protocol === \"https:\";\n  }\n}();\n\n// lib/peer.ts\nvar import_eventemitter34 = __toESM(require_eventemitter3());\n\n// lib/logger.ts\nvar LOG_PREFIX = \"PeerJS: \";\nvar Logger = class {\n  constructor() {\n    this._logLevel = 0 /* Disabled */;\n  }\n  get logLevel() {\n    return this._logLevel;\n  }\n  set logLevel(logLevel) {\n    this._logLevel = logLevel;\n  }\n  log(...args) {\n    if (this._logLevel >= 3 /* All */) {\n      this._print(3 /* All */, ...args);\n    }\n  }\n  warn(...args) {\n    if (this._logLevel >= 2 /* Warnings */) {\n      this._print(2 /* Warnings */, ...args);\n    }\n  }\n  error(...args) {\n    if (this._logLevel >= 1 /* Errors */) {\n      this._print(1 /* Errors */, ...args);\n    }\n  }\n  setLogFunction(fn) {\n    this._print = fn;\n  }\n  _print(logLevel, ...rest) {\n    const copy = [LOG_PREFIX, ...rest];\n    for (let i in copy) {\n      if (copy[i] instanceof Error) {\n        copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n      }\n    }\n    if (logLevel >= 3 /* All */) {\n      console.log(...copy);\n    } else if (logLevel >= 2 /* Warnings */) {\n      console.warn(\"WARNING\", ...copy);\n    } else if (logLevel >= 1 /* Errors */) {\n      console.error(\"ERROR\", ...copy);\n    }\n  }\n};\nvar logger_default = new Logger();\n\n// lib/socket.ts\nvar import_eventemitter3 = __toESM(require_eventemitter3());\nvar Socket = class extends import_eventemitter3.EventEmitter {\n  constructor({ secure, host, port, path, key, pingInterval = 5e3, polyfills }) {\n    super();\n    this._disconnected = true;\n    this._id = null;\n    this._messagesQueue = [];\n    this.alive = false;\n    this._destroyed = false;\n    var _a;\n    this.pingInterval = pingInterval;\n    const wsProtocol = secure ? \"wss://\" : \"ws://\";\n    this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n    this.WebSocketConstructor = (_a = polyfills == null ? void 0 : polyfills.WebSocket) != null ? _a : window.WebSocket;\n  }\n  get messagesQueue() {\n    return this._messagesQueue;\n  }\n  get destroyed() {\n    return this._destroyed;\n  }\n  start(id, token) {\n    if (this._destroyed)\n      throw new Error(\"Socket was destroyed!\");\n    this._id = id;\n    if (!!this._socket || !this._disconnected) {\n      return;\n    }\n    const wsUrl = `${this._baseUrl}&id=${id}&token=${token}`;\n    this._socket = new this.WebSocketConstructor(wsUrl);\n    this._disconnected = false;\n    this._socket.onmessage = (event) => {\n      if (this._destroyed)\n        return;\n      let data;\n      try {\n        data = JSON.parse(event.data);\n        logger_default.log(\"Server message received:\", data);\n      } catch (e) {\n        logger_default.log(\"Invalid server message\", event.data);\n        return;\n      }\n      this.emit(\"message\" /* Message */, data);\n    };\n    this._socket.onclose = (event) => {\n      if (this._disconnected || this._destroyed) {\n        return;\n      }\n      logger_default.log(\"Socket closed.\", event);\n      this._cleanup();\n      this._disconnected = true;\n      this.emit(\"disconnected\" /* Disconnected */);\n    };\n    this._socket.onopen = () => {\n      if (this._disconnected || this._destroyed) {\n        return;\n      }\n      logger_default.log(\"Socket open\");\n      this.emit(\"open\" /* Open */);\n      this._sendQueuedMessages();\n      this._scheduleHeartbeat();\n    };\n  }\n  _scheduleHeartbeat() {\n    this._wsPingTimer = setTimeout(() => {\n      this._sendHeartbeat();\n    }, this.pingInterval);\n  }\n  _sendHeartbeat() {\n    if (this._destroyed)\n      return;\n    if (!this._wsOpen()) {\n      logger_default.log(`Cannot send heartbeat, because socket closed`);\n      return;\n    }\n    const message = JSON.stringify({ type: \"HEARTBEAT\" /* Heartbeat */ });\n    this._socket.send(message);\n    this._scheduleHeartbeat();\n  }\n  _wsOpen() {\n    return !!this._socket && this._socket.readyState === 1;\n  }\n  _sendQueuedMessages() {\n    const copiedQueue = [...this._messagesQueue];\n    this._messagesQueue = [];\n    for (const message of copiedQueue) {\n      this.send(message);\n    }\n    if (copiedQueue.length > 0) {\n      logger_default.log(`${copiedQueue.length} queued messages was sent`);\n    }\n  }\n  send(data) {\n    if (this._destroyed)\n      throw new Error(\"Socket was destroyed!\");\n    if (!data.type) {\n      this.emit(\"error\" /* Error */, \"Invalid message\");\n      return;\n    }\n    if (!this.alive) {\n      return;\n    }\n    if (this._id == null || !this._wsOpen()) {\n      this._messagesQueue.push(data);\n      return;\n    }\n    const message = JSON.stringify(data);\n    this._socket.send(message);\n  }\n  close() {\n    if (this._disconnected) {\n      return;\n    }\n    this._cleanup();\n    this._id = null;\n    this._disconnected = true;\n  }\n  _cleanup() {\n    if (this._socket) {\n      this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n      this._socket.close();\n      this._socket = void 0;\n    }\n    clearTimeout(this._wsPingTimer);\n  }\n  destroy() {\n    if (this._destroyed)\n      return;\n    this.close();\n    this._messagesQueue.length = 0;\n    this._destroyed = true;\n  }\n};\n\n// lib/negotiator.ts\nfunction noop() {\n}\nvar Negotiator = class {\n  constructor(connection) {\n    this.connection = connection;\n  }\n  get webRtc() {\n    var _a, _b;\n    return (_b = (_a = this.connection.provider.options.polyfills) == null ? void 0 : _a.WebRTC) != null ? _b : window;\n  }\n  startConnection(options) {\n    const peerConnection = this._startPeerConnection();\n    this.connection.peerConnection = peerConnection;\n    if (this.connection.type === \"media\" /* Media */ && options._stream) {\n      this._addTracksToConnection(options._stream, peerConnection);\n    }\n    if (options.originator) {\n      if (this.connection.type === \"data\" /* Data */) {\n        const dataConnection = this.connection;\n        const config = { ordered: !!options.reliable };\n        const dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n        dataConnection.initialize(dataChannel);\n      }\n      this._makeOffer();\n    } else {\n      this.handleSDP(\"OFFER\", options.sdp);\n    }\n  }\n  _startPeerConnection() {\n    logger_default.log(\"Creating RTCPeerConnection.\");\n    const ctr = this.webRtc.RTCPeerConnection;\n    const peerConnection = new ctr(this.connection.provider.options.config);\n    this._setupListeners(peerConnection);\n    return peerConnection;\n  }\n  _setupListeners(peerConnection) {\n    const peerId = this.connection.peer;\n    const connectionId = this.connection.connectionId;\n    const connectionType = this.connection.type;\n    const provider = this.connection.provider;\n    logger_default.log(\"Listening for ICE candidates, remote streams and data channels.\");\n    peerConnection.onicecandidate = (evt) => {\n      if (!evt.candidate || !evt.candidate.candidate)\n        return;\n      logger_default.log(`Received ICE candidates for ${peerId}:`, evt.candidate);\n      provider.socket.send({\n        type: \"CANDIDATE\" /* Candidate */,\n        payload: {\n          candidate: evt.candidate,\n          type: connectionType,\n          connectionId\n        },\n        dst: peerId\n      });\n    };\n    peerConnection.oniceconnectionstatechange = () => {\n      switch (peerConnection.iceConnectionState) {\n        case \"failed\":\n          logger_default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n          this.connection.emit(\"error\" /* Error */, new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n          this.connection.close();\n          break;\n        case \"closed\":\n          logger_default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n          this.connection.emit(\"error\" /* Error */, new Error(\"Connection to \" + peerId + \" closed.\"));\n          this.connection.close();\n          break;\n        case \"connected\":\n          logger_default.log(\"iceConnectionState changed to connected on the connection with \" + peerId);\n          break;\n        case \"disconnected\":\n          logger_default.log(\"iceConnectionState changed to disconnected on the connection with \" + peerId);\n          break;\n        case \"completed\":\n          logger_default.log(\"iceConnectionState changed to completed on the connection with \" + peerId);\n          peerConnection.onicecandidate = noop;\n          break;\n      }\n      this.connection.emit(\"iceStateChanged\" /* IceStateChanged */, peerConnection.iceConnectionState);\n    };\n    peerConnection.ondatachannel = (evt) => {\n      logger_default.log(\"Received data channel\");\n      const dataChannel = evt.channel;\n      const connection = provider.getConnection(peerId, connectionId);\n      connection.initialize(dataChannel);\n    };\n    peerConnection.ontrack = (evt) => {\n      logger_default.log(\"Received remote stream\");\n      const stream = evt.streams[0];\n      const connection = provider.getConnection(peerId, connectionId);\n      if (connection.type === \"media\" /* Media */) {\n        const mediaConnection = connection;\n        this._addStreamToMediaConnection(stream, mediaConnection);\n      }\n    };\n  }\n  cleanup() {\n    logger_default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n    const peerConnection = this.connection.peerConnection;\n    if (!peerConnection) {\n      return;\n    }\n    this.connection.peerConnection = null;\n    peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = null;\n    const peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n    let dataChannelNotClosed = false;\n    if (this.connection.type === \"data\" /* Data */) {\n      const dataConnection = this.connection;\n      const dataChannel = dataConnection.dataChannel;\n      if (dataChannel) {\n        dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n      }\n    }\n    if (peerConnectionNotClosed || dataChannelNotClosed) {\n      peerConnection.close();\n    }\n  }\n  _makeOffer() {\n    return __async(this, null, function* () {\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      try {\n        const offer = yield peerConnection.createOffer(this.connection.options.constraints);\n        if (peerConnection.signalingState === \"closed\")\n          return;\n        logger_default.log(\"Created offer.\");\n        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") {\n          offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n        }\n        try {\n          yield peerConnection.setLocalDescription(offer);\n          logger_default.log(\"Set localDescription:\", offer, `for:${this.connection.peer}`);\n          let payload = {\n            sdp: offer,\n            type: this.connection.type,\n            connectionId: this.connection.connectionId,\n            metadata: this.connection.metadata\n          };\n          if (this.connection.type === \"data\" /* Data */) {\n            const dataConnection = this.connection;\n            payload = __spreadProps(__spreadValues({}, payload), {\n              label: dataConnection.label,\n              reliable: dataConnection.reliable,\n              serialization: dataConnection.serialization\n            });\n          }\n          provider.socket.send({\n            type: \"OFFER\" /* Offer */,\n            payload,\n            dst: this.connection.peer\n          });\n        } catch (err) {\n          if (err != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n            provider.emitError(\"webrtc\" /* WebRTC */, err);\n            logger_default.log(\"Failed to setLocalDescription, \", err);\n          }\n        }\n      } catch (err_1) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err_1);\n        logger_default.log(\"Failed to createOffer, \", err_1);\n      }\n    });\n  }\n  _makeAnswer() {\n    return __async(this, null, function* () {\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      try {\n        const answer = yield peerConnection.createAnswer();\n        if (peerConnection.signalingState === \"closed\")\n          return;\n        logger_default.log(\"Created answer.\");\n        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") {\n          answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n        }\n        try {\n          yield peerConnection.setLocalDescription(answer);\n          logger_default.log(`Set localDescription:`, answer, `for:${this.connection.peer}`);\n          provider.socket.send({\n            type: \"ANSWER\" /* Answer */,\n            payload: {\n              sdp: answer,\n              type: this.connection.type,\n              connectionId: this.connection.connectionId\n            },\n            dst: this.connection.peer\n          });\n        } catch (err) {\n          provider.emitError(\"webrtc\" /* WebRTC */, err);\n          logger_default.log(\"Failed to setLocalDescription, \", err);\n        }\n      } catch (err_1) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err_1);\n        logger_default.log(\"Failed to create answer, \", err_1);\n      }\n    });\n  }\n  handleSDP(type, sdp) {\n    return __async(this, null, function* () {\n      const ctr = this.webRtc.RTCSessionDescription;\n      sdp = new ctr(sdp);\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      logger_default.log(\"Setting remote description\", sdp);\n      const self = this;\n      try {\n        yield peerConnection.setRemoteDescription(sdp);\n        logger_default.log(`Set remoteDescription:${type} for:${this.connection.peer}`);\n        if (type === \"OFFER\") {\n          yield self._makeAnswer();\n        }\n      } catch (err) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err);\n        logger_default.log(\"Failed to setRemoteDescription, \", err);\n      }\n    });\n  }\n  handleCandidate(ice) {\n    return __async(this, null, function* () {\n      logger_default.log(`handleCandidate:`, ice);\n      const candidate = ice.candidate;\n      const sdpMLineIndex = ice.sdpMLineIndex;\n      const sdpMid = ice.sdpMid;\n      const peerConnection = this.connection.peerConnection;\n      const provider = this.connection.provider;\n      try {\n        const ctr = this.webRtc.RTCIceCandidate;\n        yield peerConnection.addIceCandidate(new ctr({\n          sdpMid,\n          sdpMLineIndex,\n          candidate\n        }));\n        logger_default.log(`Added ICE candidate for:${this.connection.peer}`);\n      } catch (err) {\n        provider.emitError(\"webrtc\" /* WebRTC */, err);\n        logger_default.log(\"Failed to handleCandidate, \", err);\n      }\n    });\n  }\n  _addTracksToConnection(stream, peerConnection) {\n    logger_default.log(`add tracks from stream ${stream.id} to peer connection`);\n    if (!peerConnection.addTrack) {\n      return logger_default.error(`Your browser does't support RTCPeerConnection#addTrack. Ignored.`);\n    }\n    stream.getTracks().forEach((track) => {\n      peerConnection.addTrack(track, stream);\n    });\n  }\n  _addStreamToMediaConnection(stream, mediaConnection) {\n    logger_default.log(`add stream ${stream.id} to media connection ${mediaConnection.connectionId}`);\n    mediaConnection.addStream(stream);\n  }\n};\n\n// lib/baseconnection.ts\nvar import_eventemitter32 = __toESM(require_eventemitter3());\nvar BaseConnection = class extends import_eventemitter32.EventEmitter {\n  constructor(peer, provider, options) {\n    super();\n    this.peer = peer;\n    this.provider = provider;\n    this.options = options;\n    this._open = false;\n    this.metadata = options.metadata;\n  }\n  get open() {\n    return this._open;\n  }\n};\n\n// lib/mediaconnection.ts\nvar _MediaConnection = class extends BaseConnection {\n  get type() {\n    return \"media\" /* Media */;\n  }\n  get localStream() {\n    return this._localStream;\n  }\n  get remoteStream() {\n    return this._remoteStream;\n  }\n  constructor(peerId, provider, options) {\n    super(peerId, provider, options);\n    this._localStream = this.options._stream;\n    this.connectionId = this.options.connectionId || _MediaConnection.ID_PREFIX + Utils.randomToken();\n    this._negotiator = new Negotiator(this);\n    if (this._localStream) {\n      this._negotiator.startConnection({\n        _stream: this._localStream,\n        originator: true\n      });\n    }\n  }\n  addStream(remoteStream) {\n    logger_default.log(\"Receiving stream\", remoteStream);\n    this._remoteStream = remoteStream;\n    super.emit(\"stream\" /* Stream */, remoteStream);\n  }\n  handleMessage(message) {\n    const type = message.type;\n    const payload = message.payload;\n    switch (message.type) {\n      case \"ANSWER\" /* Answer */:\n        this._negotiator.handleSDP(type, payload.sdp);\n        this._open = true;\n        break;\n      case \"CANDIDATE\" /* Candidate */:\n        this._negotiator.handleCandidate(payload.candidate);\n        break;\n      default:\n        logger_default.warn(`Unrecognized message type:${type} from peer:${this.peer}`);\n        break;\n    }\n  }\n  answer(stream, options = {}) {\n    if (this._localStream) {\n      logger_default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n      return;\n    }\n    this._localStream = stream;\n    if (options && options.sdpTransform) {\n      this.options.sdpTransform = options.sdpTransform;\n    }\n    this._negotiator.startConnection(__spreadProps(__spreadValues({}, this.options._payload), { _stream: stream }));\n    const messages = this.provider._getMessages(this.connectionId);\n    for (let message of messages) {\n      this.handleMessage(message);\n    }\n    this._open = true;\n  }\n  close() {\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n      this._negotiator = null;\n    }\n    this._localStream = null;\n    this._remoteStream = null;\n    if (this.provider) {\n      this.provider._removeConnection(this);\n      this.provider = null;\n    }\n    if (this.options && this.options._stream) {\n      this.options._stream = null;\n    }\n    if (!this.open) {\n      return;\n    }\n    this._open = false;\n    super.emit(\"close\" /* Close */);\n  }\n};\nvar MediaConnection = _MediaConnection;\nMediaConnection.ID_PREFIX = \"mc_\";\n\n// lib/encodingQueue.ts\nvar import_eventemitter33 = __toESM(require_eventemitter3());\nvar EncodingQueue = class extends import_eventemitter33.EventEmitter {\n  constructor(fileReader) {\n    super();\n    this.fileReader = fileReader;\n    this._queue = [];\n    this._processing = false;\n    this.fileReader.onload = (evt) => {\n      this._processing = false;\n      if (evt.target) {\n        this.emit(\"done\", evt.target.result);\n      }\n      this.doNextTask();\n    };\n    this.fileReader.onerror = (evt) => {\n      logger_default.error(`EncodingQueue error:`, evt);\n      this._processing = false;\n      this.destroy();\n      this.emit(\"error\", evt);\n    };\n  }\n  get queue() {\n    return this._queue;\n  }\n  get size() {\n    return this.queue.length;\n  }\n  get processing() {\n    return this._processing;\n  }\n  enque(blob) {\n    this.queue.push(blob);\n    if (this.processing)\n      return;\n    this.doNextTask();\n  }\n  destroy() {\n    this.fileReader.abort();\n    this._queue = [];\n  }\n  doNextTask() {\n    if (this.size === 0)\n      return;\n    if (this.processing)\n      return;\n    this._processing = true;\n    this.fileReader.readAsArrayBuffer(this.queue.shift());\n  }\n};\n\n// lib/dataconnection.ts\nvar _DataConnection = class extends BaseConnection {\n  constructor(peerId, provider, options) {\n    super(peerId, provider, options);\n    this.stringify = JSON.stringify;\n    this.parse = JSON.parse;\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._buffering = false;\n    this._chunkedData = {};\n    var _a, _b;\n    this.connectionId = this.options.connectionId || _DataConnection.ID_PREFIX + Utils.randomToken();\n    this.label = this.options.label || this.connectionId;\n    this.serialization = this.options.serialization || \"binary\" /* Binary */;\n    this.reliable = !!this.options.reliable;\n    this.FileReaderCtr = (_b = (_a = provider.options.polyfills) == null ? void 0 : _a.FileReader) != null ? _b : window.FileReader;\n    this._encodingQueue = new EncodingQueue(new this.FileReaderCtr());\n    this._encodingQueue.on(\"done\", (ab) => {\n      this._bufferedSend(ab);\n    });\n    this._encodingQueue.on(\"error\", () => {\n      logger_default.error(`DC#${this.connectionId}: Error occured in encoding from blob to arraybuffer, close DC`);\n      this.close();\n    });\n    this._negotiator = new Negotiator(this);\n    this._negotiator.startConnection(this.options._payload || {\n      originator: true\n    });\n  }\n  get type() {\n    return \"data\" /* Data */;\n  }\n  get dataChannel() {\n    return this._dc;\n  }\n  get bufferSize() {\n    return this._bufferSize;\n  }\n  initialize(dc) {\n    this._dc = dc;\n    this._configureDataChannel();\n  }\n  _configureDataChannel() {\n    if (!this.provider.features.binaryBlob || this.provider.features.reliable) {\n      this.dataChannel.binaryType = \"arraybuffer\";\n    }\n    this.dataChannel.onopen = () => {\n      logger_default.log(`DC#${this.connectionId} dc connection success`);\n      this._open = true;\n      this.emit(\"open\" /* Open */);\n    };\n    this.dataChannel.onmessage = (e) => {\n      logger_default.log(`DC#${this.connectionId} dc onmessage:`, e.data);\n      this._handleDataMessage(e);\n    };\n    this.dataChannel.onclose = () => {\n      logger_default.log(`DC#${this.connectionId} dc closed for:`, this.peer);\n      this.close();\n    };\n  }\n  _handleDataMessage({ data }) {\n    const datatype = data.constructor;\n    const isBinarySerialization = this.serialization === \"binary\" /* Binary */ || this.serialization === \"binary-utf8\" /* BinaryUTF8 */;\n    let deserializedData = data;\n    if (isBinarySerialization) {\n      if (datatype === Blob) {\n        Utils.blobToArrayBuffer(this.FileReaderCtr, data, (ab) => {\n          const unpackedData = Utils.unpack(ab);\n          this.emit(\"data\" /* Data */, unpackedData);\n        });\n        return;\n      } else if (datatype === ArrayBuffer) {\n        deserializedData = Utils.unpack(data);\n      } else if (datatype === String) {\n        const ab = Utils.binaryStringToArrayBuffer(data);\n        deserializedData = Utils.unpack(ab);\n      }\n    } else if (this.serialization === \"json\" /* JSON */) {\n      deserializedData = this.parse(data);\n    }\n    if (deserializedData.__peerData) {\n      this._handleChunk(deserializedData);\n      return;\n    }\n    super.emit(\"data\" /* Data */, deserializedData);\n  }\n  _handleChunk(data) {\n    const id = data.__peerData;\n    const chunkInfo = this._chunkedData[id] || {\n      data: [],\n      count: 0,\n      total: data.total\n    };\n    chunkInfo.data[data.n] = data.data;\n    chunkInfo.count++;\n    this._chunkedData[id] = chunkInfo;\n    if (chunkInfo.total === chunkInfo.count) {\n      delete this._chunkedData[id];\n      const data2 = new Blob(chunkInfo.data);\n      this._handleDataMessage({ data: data2 });\n    }\n  }\n  close() {\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._chunkedData = {};\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n      this._negotiator = null;\n    }\n    if (this.provider) {\n      this.provider._removeConnection(this);\n      this.provider = null;\n    }\n    if (this.dataChannel) {\n      this.dataChannel.onopen = null;\n      this.dataChannel.onmessage = null;\n      this.dataChannel.onclose = null;\n      this._dc = null;\n    }\n    if (this._encodingQueue) {\n      this._encodingQueue.destroy();\n      this._encodingQueue.removeAllListeners();\n      this._encodingQueue = null;\n    }\n    if (!this.open) {\n      return;\n    }\n    this._open = false;\n    super.emit(\"close\" /* Close */);\n  }\n  send(data, chunked) {\n    if (!this.open) {\n      super.emit(\"error\" /* Error */, new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n      return;\n    }\n    if (this.serialization === \"json\" /* JSON */) {\n      this._bufferedSend(this.stringify(data));\n    } else if (this.serialization === \"binary\" /* Binary */ || this.serialization === \"binary-utf8\" /* BinaryUTF8 */) {\n      const blob = Utils.pack(data);\n      if (!chunked && blob.size > Utils.chunkedMTU) {\n        this._sendChunks(blob);\n        return;\n      }\n      if (!this.provider.features.binaryBlob) {\n        this._encodingQueue.enque(blob);\n      } else {\n        this._bufferedSend(blob);\n      }\n    } else {\n      this._bufferedSend(data);\n    }\n  }\n  _bufferedSend(msg) {\n    if (this._buffering || !this._trySend(msg)) {\n      this._buffer.push(msg);\n      this._bufferSize = this._buffer.length;\n    }\n  }\n  _trySend(msg) {\n    if (!this.open) {\n      return false;\n    }\n    if (this.dataChannel.bufferedAmount > _DataConnection.MAX_BUFFERED_AMOUNT) {\n      this._buffering = true;\n      setTimeout(() => {\n        this._buffering = false;\n        this._tryBuffer();\n      }, 50);\n      return false;\n    }\n    try {\n      this.dataChannel.send(msg);\n    } catch (e) {\n      logger_default.error(`DC#:${this.connectionId} Error when sending:`, e);\n      this._buffering = true;\n      this.close();\n      return false;\n    }\n    return true;\n  }\n  _tryBuffer() {\n    if (!this.open) {\n      return;\n    }\n    if (this._buffer.length === 0) {\n      return;\n    }\n    const msg = this._buffer[0];\n    if (this._trySend(msg)) {\n      this._buffer.shift();\n      this._bufferSize = this._buffer.length;\n      this._tryBuffer();\n    }\n  }\n  _sendChunks(blob) {\n    const blobs = Utils.chunk(blob);\n    logger_default.log(`DC#${this.connectionId} Try to send ${blobs.length} chunks...`);\n    for (let blob2 of blobs) {\n      this.send(blob2, true);\n    }\n  }\n  handleMessage(message) {\n    const payload = message.payload;\n    switch (message.type) {\n      case \"ANSWER\" /* Answer */:\n        this._negotiator.handleSDP(message.type, payload.sdp);\n        break;\n      case \"CANDIDATE\" /* Candidate */:\n        this._negotiator.handleCandidate(payload.candidate);\n        break;\n      default:\n        logger_default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n        break;\n    }\n  }\n};\nvar DataConnection = _DataConnection;\nDataConnection.ID_PREFIX = \"dc_\";\nDataConnection.MAX_BUFFERED_AMOUNT = 8 * 1024 * 1024;\n\n// lib/api.ts\nvar API = class {\n  constructor(_options) {\n    this._options = _options;\n  }\n  _request(url) {\n    var _a, _b;\n    return ((_b = (_a = this._options.polyfills) == null ? void 0 : _a.fetch) != null ? _b : window.fetch)(url);\n  }\n  _buildUrl(method) {\n    const protocol = this._options.secure ? \"https://\" : \"http://\";\n    let url = protocol + this._options.host + \":\" + this._options.port + this._options.path + this._options.key + \"/\" + method;\n    const queryString = \"?ts=\" + new Date().getTime() + Math.random();\n    url += queryString;\n    return url;\n  }\n  retrieveId() {\n    return __async(this, null, function* () {\n      const url = this._buildUrl(\"id\");\n      try {\n        const response = yield this._request(url);\n        if (response.status !== 200) {\n          throw new Error(`Error. Status:${response.status}`);\n        }\n        return response.text();\n      } catch (error) {\n        logger_default.error(\"Error retrieving ID\", error);\n        let pathError = \"\";\n        if (this._options.path === \"/\" && this._options.host !== Utils.CLOUD_HOST) {\n          pathError = \" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer.\";\n        }\n        throw new Error(\"Could not get an ID from the server.\" + pathError);\n      }\n    });\n  }\n  listAllPeers() {\n    return __async(this, null, function* () {\n      const url = this._buildUrl(\"peers\");\n      try {\n        const response = yield this._request(url);\n        if (response.status !== 200) {\n          if (response.status === 401) {\n            let helpfulError = \"\";\n            if (this._options.host === Utils.CLOUD_HOST) {\n              helpfulError = \"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.\";\n            } else {\n              helpfulError = \"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.\";\n            }\n            throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n          }\n          throw new Error(`Error. Status:${response.status}`);\n        }\n        return response.json();\n      } catch (error) {\n        logger_default.error(\"Error retrieving list peers\", error);\n        throw new Error(\"Could not get list peers from the server.\" + error);\n      }\n    });\n  }\n};\n\n// lib/supports.ts\nvar Supports = {\n  isUnifiedPlanSupported(webRtc) {\n    if (!webRtc && typeof window !== \"undefined\") {\n      webRtc = window;\n    }\n    if (typeof webRtc.RTCRtpTransceiver === \"undefined\" || !(\"currentDirection\" in webRtc.RTCRtpTransceiver.prototype)) {\n      return false;\n    }\n    let tempPc;\n    let supported = false;\n    try {\n      tempPc = new webRtc.RTCPeerConnection();\n      tempPc.addTransceiver(\"audio\");\n      supported = true;\n    } catch (e) {\n    } finally {\n      if (tempPc) {\n        tempPc.close();\n      }\n    }\n    return supported;\n  }\n};\n\n// lib/peer.ts\nvar _Peer = class extends import_eventemitter34.EventEmitter {\n  constructor(id, options) {\n    super();\n    this._id = null;\n    this._lastServerId = null;\n    this._destroyed = false;\n    this._disconnected = false;\n    this._open = false;\n    this._connections = /* @__PURE__ */ new Map();\n    this._lostMessages = /* @__PURE__ */ new Map();\n    var _a;\n    let userId;\n    if (id && id.constructor == Object) {\n      options = id;\n    } else if (id) {\n      userId = id.toString();\n    }\n    options = __spreadValues({\n      debug: 0,\n      host: Utils.CLOUD_HOST,\n      port: Utils.CLOUD_PORT,\n      path: \"/\",\n      key: _Peer.DEFAULT_KEY,\n      token: Utils.randomToken(),\n      config: Utils.defaultConfig\n    }, options);\n    this._options = options;\n    if (typeof window !== \"undefined\" && this._options.host === \"/\") {\n      this._options.host = window.location.hostname;\n    }\n    if (this._options.path) {\n      if (this._options.path[0] !== \"/\") {\n        this._options.path = \"/\" + this._options.path;\n      }\n      if (this._options.path[this._options.path.length - 1] !== \"/\") {\n        this._options.path += \"/\";\n      }\n    }\n    if (this._options.secure === void 0 && this._options.host !== Utils.CLOUD_HOST) {\n      this._options.secure = Utils.isSecure();\n    } else if (this._options.host == Utils.CLOUD_HOST) {\n      this._options.secure = true;\n    }\n    if (this._options.logFunction) {\n      logger_default.setLogFunction(this._options.logFunction);\n    }\n    logger_default.logLevel = this._options.debug || 0;\n    this._api = new API(options);\n    this._socket = this._createServerConnection();\n    this.features = _Peer.getFeatures((_a = this._options.polyfills) == null ? void 0 : _a.WebRTC);\n    if (!this.features.audioVideo && !this.features.data) {\n      this._delayedAbort(\"browser-incompatible\" /* BrowserIncompatible */, \"The current browser does not support WebRTC\");\n      return;\n    }\n    if (!!userId && !Utils.validateId(userId)) {\n      this._delayedAbort(\"invalid-id\" /* InvalidID */, `ID \"${userId}\" is invalid`);\n      return;\n    }\n    this.socket.alive = true;\n    if (userId) {\n      this._initialize(userId);\n    } else {\n      this._api.retrieveId().then((id2) => this._initialize(id2)).catch((error) => this._abort(\"server-error\" /* ServerError */, error));\n    }\n  }\n  get id() {\n    return this._id;\n  }\n  get options() {\n    return this._options;\n  }\n  get open() {\n    return this._open;\n  }\n  get socket() {\n    return this._socket;\n  }\n  get connections() {\n    const plainConnections = /* @__PURE__ */ Object.create(null);\n    for (let [k, v] of this._connections) {\n      plainConnections[k] = v;\n    }\n    return plainConnections;\n  }\n  get destroyed() {\n    return this._destroyed;\n  }\n  get disconnected() {\n    return this._disconnected;\n  }\n  _createServerConnection() {\n    const socket = new Socket(this._options);\n    socket.on(\"message\" /* Message */, (data) => {\n      this._handleMessage(data);\n    });\n    socket.on(\"error\" /* Error */, (error) => {\n      this._abort(\"socket-error\" /* SocketError */, error);\n    });\n    socket.on(\"disconnected\" /* Disconnected */, () => {\n      if (this.disconnected) {\n        return;\n      }\n      this.emitError(\"network\" /* Network */, \"Lost connection to server.\");\n      this.disconnect();\n    });\n    socket.on(\"close\" /* Close */, () => {\n      if (this.disconnected) {\n        return;\n      }\n      this._abort(\"socket-closed\" /* SocketClosed */, \"Underlying socket is already closed.\");\n    });\n    return socket;\n  }\n  _initialize(id) {\n    if (this.destroyed)\n      return;\n    this._id = id;\n    this.socket.start(id, this._options.token);\n  }\n  _handleMessage(message) {\n    const type = message.type;\n    const payload = message.payload;\n    const peerId = message.src;\n    switch (type) {\n      case \"OPEN\" /* Open */:\n        this._lastServerId = this.id;\n        this._open = true;\n        this.emit(\"open\" /* Open */, this.id);\n        break;\n      case \"ERROR\" /* Error */:\n        this._abort(\"server-error\" /* ServerError */, payload.msg);\n        break;\n      case \"ID-TAKEN\" /* IdTaken */:\n        this._abort(\"unavailable-id\" /* UnavailableID */, `ID \"${this.id}\" is taken`);\n        break;\n      case \"INVALID-KEY\" /* InvalidKey */:\n        this._abort(\"invalid-key\" /* InvalidKey */, `API KEY \"${this._options.key}\" is invalid`);\n        break;\n      case \"LEAVE\" /* Leave */:\n        logger_default.log(`Received leave message from ${peerId}`);\n        this._cleanupPeer(peerId);\n        this._connections.delete(peerId);\n        break;\n      case \"EXPIRE\" /* Expire */:\n        this.emitError(\"peer-unavailable\" /* PeerUnavailable */, `Could not connect to peer ${peerId}`);\n        break;\n      case \"OFFER\" /* Offer */: {\n        const connectionId = payload.connectionId;\n        let connection = this.getConnection(peerId, connectionId);\n        if (connection) {\n          connection.close();\n          logger_default.warn(`Offer received for existing Connection ID:${connectionId}`);\n        }\n        if (payload.type === \"media\" /* Media */) {\n          connection = new MediaConnection(peerId, this, {\n            connectionId,\n            _payload: payload,\n            metadata: payload.metadata\n          });\n          this._addConnection(peerId, connection);\n          this.emit(\"call\" /* Call */, connection);\n        } else if (payload.type === \"data\" /* Data */) {\n          connection = new DataConnection(peerId, this, {\n            connectionId,\n            _payload: payload,\n            metadata: payload.metadata,\n            label: payload.label,\n            serialization: payload.serialization,\n            reliable: payload.reliable\n          });\n          this._addConnection(peerId, connection);\n          this.emit(\"connection\" /* Connection */, connection);\n        } else {\n          logger_default.warn(`Received malformed connection type:${payload.type}`);\n          return;\n        }\n        const messages = this._getMessages(connectionId);\n        for (let message2 of messages) {\n          connection.handleMessage(message2);\n        }\n        break;\n      }\n      default: {\n        if (!payload) {\n          logger_default.warn(`You received a malformed message from ${peerId} of type ${type}`);\n          return;\n        }\n        const connectionId = payload.connectionId;\n        const connection = this.getConnection(peerId, connectionId);\n        if (connection && connection.peerConnection) {\n          connection.handleMessage(message);\n        } else if (connectionId) {\n          this._storeMessage(connectionId, message);\n        } else {\n          logger_default.warn(\"You received an unrecognized message:\", message);\n        }\n        break;\n      }\n    }\n  }\n  _storeMessage(connectionId, message) {\n    if (!this._lostMessages.has(connectionId)) {\n      this._lostMessages.set(connectionId, []);\n    }\n    this._lostMessages.get(connectionId).push(message);\n  }\n  _getMessages(connectionId) {\n    const messages = this._lostMessages.get(connectionId);\n    if (messages) {\n      this._lostMessages.delete(connectionId);\n      return messages;\n    }\n    return [];\n  }\n  connect(peer, options = {}) {\n    if (this.disconnected) {\n      logger_default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available.\");\n      this.emitError(\"disconnected\" /* Disconnected */, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n    const dataConnection = new DataConnection(peer, this, options);\n    this._addConnection(peer, dataConnection);\n    return dataConnection;\n  }\n  call(peer, stream, options = {}) {\n    if (this.disconnected) {\n      logger_default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect.\");\n      this.emitError(\"disconnected\" /* Disconnected */, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n    if (!stream) {\n      logger_default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n      return;\n    }\n    options._stream = stream;\n    const mediaConnection = new MediaConnection(peer, this, options);\n    this._addConnection(peer, mediaConnection);\n    return mediaConnection;\n  }\n  _addConnection(peerId, connection) {\n    logger_default.log(`add connection ${connection.type}:${connection.connectionId} to peerId:${peerId}`);\n    if (!this._connections.has(peerId)) {\n      this._connections.set(peerId, []);\n    }\n    this._connections.get(peerId).push(connection);\n  }\n  _removeConnection(connection) {\n    const connections = this._connections.get(connection.peer);\n    if (connections) {\n      const index = connections.indexOf(connection);\n      if (index !== -1) {\n        connections.splice(index, 1);\n        if (connections.length === 0) {\n          this._connections.delete(connection.peer);\n        }\n      }\n    }\n    this._lostMessages.delete(connection.connectionId);\n  }\n  getConnection(peerId, connectionId) {\n    const connections = this._connections.get(peerId);\n    if (!connections) {\n      return null;\n    }\n    for (let connection of connections) {\n      if (connection.connectionId === connectionId) {\n        return connection;\n      }\n    }\n    return null;\n  }\n  _delayedAbort(type, message) {\n    setTimeout(() => {\n      this._abort(type, message);\n    }, 0);\n  }\n  _abort(type, message) {\n    logger_default.error(\"Aborting!\");\n    this.emitError(type, message);\n    if (!this._lastServerId) {\n      this.destroy();\n    } else {\n      this.disconnect();\n    }\n  }\n  emitError(type, err) {\n    logger_default.error(\"Error:\", err);\n    let error;\n    if (typeof err === \"string\") {\n      error = new Error(err);\n    } else {\n      error = err;\n    }\n    error.type = type;\n    this.emit(\"error\" /* Error */, error);\n  }\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n    logger_default.log(`Destroy peer with ID:${this.id}`);\n    this.disconnect();\n    this._cleanup();\n    this.socket.destroy();\n    this._destroyed = true;\n    this.emit(\"close\" /* Close */);\n  }\n  _cleanup() {\n    for (let peerId of this._connections.keys()) {\n      this._cleanupPeer(peerId);\n      this._connections.delete(peerId);\n    }\n    this.socket.removeAllListeners();\n  }\n  _cleanupPeer(peerId) {\n    const connections = this._connections.get(peerId);\n    if (!connections)\n      return;\n    for (let connection of connections) {\n      connection.close();\n    }\n  }\n  disconnect() {\n    if (this.disconnected) {\n      return;\n    }\n    const currentId = this.id;\n    logger_default.log(`Disconnect peer with ID:${currentId}`);\n    this._disconnected = true;\n    this._open = false;\n    this.socket.alive = false;\n    this.socket.close();\n    this._lastServerId = currentId;\n    this._id = null;\n    this.emit(\"disconnected\" /* Disconnected */, currentId);\n  }\n  reconnect() {\n    if (this.disconnected && !this.destroyed) {\n      logger_default.log(`Attempting reconnection to server with ID ${this._lastServerId}`);\n      this._disconnected = false;\n      this.socket.alive = true;\n      this._initialize(this._lastServerId);\n    } else if (this.destroyed) {\n      throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n    } else if (!this.disconnected && !this.open) {\n      logger_default.error(\"In a hurry? We're still trying to make the initial connection!\");\n    } else {\n      throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);\n    }\n  }\n  listAllPeers(cb = (_) => {\n  }) {\n    this._api.listAllPeers().then((peers) => cb(peers)).catch((error) => this._abort(\"server-error\" /* ServerError */, error));\n  }\n  static getFeatures(webRtc) {\n    if (!webRtc && typeof window !== \"undefined\") {\n      webRtc = window;\n    }\n    if (!_Peer._features) {\n      _Peer._features = _Peer.checkFeatures(webRtc);\n    }\n    return _Peer._features;\n  }\n  static checkFeatures(webRtc) {\n    if (!webRtc && typeof window !== \"undefined\") {\n      webRtc = window;\n    }\n    const supported = {\n      webRTC: typeof webRtc.RTCPeerConnection !== \"undefined\",\n      audioVideo: true,\n      data: false,\n      binaryBlob: false,\n      reliable: false,\n      unifiedPlan: false\n    };\n    if (!supported.webRTC)\n      return supported;\n    let pc;\n    try {\n      pc = new webRtc.RTCPeerConnection(Utils.defaultConfig);\n      let dc;\n      try {\n        dc = pc.createDataChannel(\"_PEERJSTEST\", { ordered: true });\n        supported.data = true;\n        supported.reliable = !!dc.ordered;\n        try {\n          dc.binaryType = \"blob\";\n          supported.binaryBlob = true;\n        } catch (e) {\n        }\n      } catch (e) {\n      } finally {\n        if (dc) {\n          dc.close();\n        }\n      }\n    } catch (e) {\n    } finally {\n      if (pc) {\n        pc.close();\n      }\n    }\n    supported.unifiedPlan = Supports.isUnifiedPlanSupported(webRtc);\n    return supported;\n  }\n};\nvar Peer = _Peer;\nPeer.DEFAULT_KEY = \"peerjs\";\n\n// lib/index.ts\nvar lib_default = Peer;\nif (typeof window !== \"undefined\") {\n  window.Peer = Peer;\n}\nexport {\n  Peer,\n  Utils,\n  lib_default as default\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","exports.quote = function (xs) {\n    return xs.map(function (s) {\n        if (s && typeof s === 'object') {\n            return s.op.replace(/(.)/g, '\\\\$1');\n        }\n        else if (/[\"\\s]/.test(s) && !/'/.test(s)) {\n            return \"'\" + s.replace(/(['\\\\])/g, '\\\\$1') + \"'\";\n        }\n        else if (/[\"'\\s]/.test(s)) {\n            return '\"' + s.replace(/([\"\\\\$`!])/g, '\\\\$1') + '\"';\n        }\n        else {\n            return String(s).replace(/([A-Za-z]:)?([#!\"$&'()*,:;<=>?@\\[\\\\\\]^`{|}])/g, '$1\\\\$2');\n        }\n    }).join(' ');\n};\n\n// '<(' is process substitution operator and\n// can be parsed the same as control operator\nvar CONTROL = '(?:' + [\n    '\\\\|\\\\|', '\\\\&\\\\&', ';;', '\\\\|\\\\&', '\\\\<\\\\(', '>>', '>\\\\&', '[&;()|<>]'\n].join('|') + ')';\nvar META = '|&;()<> \\\\t';\nvar BAREWORD = '(\\\\\\\\[\\'\"' + META + ']|[^\\\\s\\'\"' + META + '])+';\nvar SINGLE_QUOTE = '\"((\\\\\\\\\"|[^\"])*?)\"';\nvar DOUBLE_QUOTE = '\\'((\\\\\\\\\\'|[^\\'])*?)\\'';\n\nvar TOKEN = '';\nfor (var i = 0; i < 4; i++) {\n    TOKEN += (Math.pow(16,8)*Math.random()).toString(16);\n}\n\nexports.parse = function (s, env, opts) {\n    var mapped = parse(s, env, opts);\n    if (typeof env !== 'function') return mapped;\n    return mapped.reduce(function (acc, s) {\n        if (typeof s === 'object') return acc.concat(s);\n        var xs = s.split(RegExp('(' + TOKEN + '.*?' + TOKEN + ')', 'g'));\n        if (xs.length === 1) return acc.concat(xs[0]);\n        return acc.concat(xs.filter(Boolean).map(function (x) {\n            if (RegExp('^' + TOKEN).test(x)) {\n                return JSON.parse(x.split(TOKEN)[1]);\n            }\n            else return x;\n        }));\n    }, []);\n};\n\nfunction parse (s, env, opts) {\n    var chunker = new RegExp([\n        '(' + CONTROL + ')', // control chars\n        '(' + BAREWORD + '|' + SINGLE_QUOTE + '|' + DOUBLE_QUOTE + ')*'\n    ].join('|'), 'g');\n    var match = s.match(chunker).filter(Boolean);\n    var commented = false;\n\n    if (!match) return [];\n    if (!env) env = {};\n    if (!opts) opts = {};\n    return match.map(function (s, j) {\n        if (commented) {\n            return;\n        }\n        if (RegExp('^' + CONTROL + '$').test(s)) {\n            return { op: s };\n        }\n\n        // Hand-written scanner/parser for Bash quoting rules:\n        //\n        //  1. inside single quotes, all characters are printed literally.\n        //  2. inside double quotes, all characters are printed literally\n        //     except variables prefixed by '$' and backslashes followed by\n        //     either a double quote or another backslash.\n        //  3. outside of any quotes, backslashes are treated as escape\n        //     characters and not printed (unless they are themselves escaped)\n        //  4. quote context can switch mid-token if there is no whitespace\n        //     between the two quote contexts (e.g. all'one'\"token\" parses as\n        //     \"allonetoken\")\n        var SQ = \"'\";\n        var DQ = '\"';\n        var DS = '$';\n        var BS = opts.escape || '\\\\';\n        var quote = false;\n        var esc = false;\n        var out = '';\n        var isGlob = false;\n\n        for (var i = 0, len = s.length; i < len; i++) {\n            var c = s.charAt(i);\n            isGlob = isGlob || (!quote && (c === '*' || c === '?'));\n            if (esc) {\n                out += c;\n                esc = false;\n            }\n            else if (quote) {\n                if (c === quote) {\n                    quote = false;\n                }\n                else if (quote == SQ) {\n                    out += c;\n                }\n                else { // Double quote\n                    if (c === BS) {\n                        i += 1;\n                        c = s.charAt(i);\n                        if (c === DQ || c === BS || c === DS) {\n                            out += c;\n                        } else {\n                            out += BS + c;\n                        }\n                    }\n                    else if (c === DS) {\n                        out += parseEnvVar();\n                    }\n                    else {\n                        out += c;\n                    }\n                }\n            }\n            else if (c === DQ || c === SQ) {\n                quote = c;\n            }\n            else if (RegExp('^' + CONTROL + '$').test(c)) {\n                return { op: s };\n            }\n            else if (RegExp('^#$').test(c)) {\n                commented = true;\n                if (out.length){\n                    return [out, { comment: s.slice(i+1) + match.slice(j+1).join(' ') }];\n                }\n                return [{ comment: s.slice(i+1) + match.slice(j+1).join(' ') }];\n            }\n            else if (c === BS) {\n                esc = true;\n            }\n            else if (c === DS) {\n                out += parseEnvVar();\n            }\n            else out += c;\n        }\n\n        if (isGlob) return {op: 'glob', pattern: out};\n\n        return out;\n\n        function parseEnvVar() {\n            i += 1;\n            var varend, varname;\n            //debugger\n            if (s.charAt(i) === '{') {\n                i += 1;\n                if (s.charAt(i) === '}') {\n                    throw new Error(\"Bad substitution: \" + s.substr(i - 2, 3));\n                }\n                varend = s.indexOf('}', i);\n                if (varend < 0) {\n                    throw new Error(\"Bad substitution: \" + s.substr(i));\n                }\n                varname = s.substr(i, varend - i);\n                i = varend;\n            }\n            else if (/[*@#?$!_\\-]/.test(s.charAt(i))) {\n                varname = s.charAt(i);\n                i += 1;\n            }\n            else {\n                varend = s.substr(i).match(/[^\\w\\d_]/);\n                if (!varend) {\n                    varname = s.substr(i);\n                    i = s.length;\n                } else {\n                    varname = s.substr(i, varend.index);\n                    i += varend.index - 1;\n                }\n            }\n            return getVar(null, '', varname);\n        }\n    })\n    // finalize parsed aruments\n    .reduce(function(prev, arg){\n        if (arg === undefined){\n            return prev;\n        }\n        return prev.concat(arg);\n    },[]);\n\n    function getVar (_, pre, key) {\n        var r = typeof env === 'function' ? env(key) : env[key];\n        if (r === undefined && key != '')\n            r = '';\n        else if (r === undefined)\n            r = '$';\n\n        if (typeof r === 'object') {\n            return pre + TOKEN + JSON.stringify(r) + TOKEN;\n        }\n        else return pre + r;\n    }\n}\n","\n      import API from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/cjs.js!./peer.module.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/cjs.js!./peer.module.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","/**\r\n * @module @web3os-core/peer\r\n * @author Jay Mathis <code@mathis.network>\r\n * @license MIT\r\n * @see https://peerjs.com\r\n * @see https://github.com/web3os-org/kernel\r\n * \r\n * @todo Fix receiving emojis causing BinaryPackFailure\r\n * \r\n * @description\r\n * PeerJS Utility\r\n * \r\n * <pre>\r\n * \r\n * \r\n * \r\n    Usage:\r\n      peer <command> <args> [options]\r\n\r\n    To set your ID (default is UUID):\r\n      peer id --id myfirstdevice\r\n\r\n    Default Connection Broker:\r\n      Kernel.get('peerjs', 'server-host') if set, or 0.peerjs.com\r\n\r\n    Commands:\r\n      call <peer-id> [--video] [--audio]                                     Call a peer with media streams\r\n      chat <peer-id>                                                         Open a text chat with a peer\r\n      connect <peer-id>                                                      Connect to a peer\r\n      id                                                                     Display your peer ID\r\n      list                                                                   List available peers\r\n      send <peer-id> [--text] [--text-file] [--json] [--json-file]           Send a raw message\r\n      screen <peer-id>                                                       Share your screen with a peer\r\n      upload <peer-id> [--file]                                              Upload a file to a peer\r\n\r\n    Options:\r\n      --debug                                                                Debug level ({0},1,2,3)\r\n      --file                                                                 Path of the file to upload\r\n      --help                                                                 Print this help message\r\n      --id                                                                   Set your peer ID\r\n      --json                                                                 JSON string to send\r\n      --json-file                                                            Path to JSON file to send\r\n      --server-host                                                          Set the peerjs broker host\r\n      --server-key                                                           Server API key (for 0.peerjs.com)\r\n      --server-path                                                          Set the peerjs broker path {/}\r\n      --server-port                                                          Set the peerjs broker port {443}\r\n      --text                                                                 Text message to send\r\n      --text-file                                                            Path to the text file to send\r\n      --version                                                              Print the version information\r\n * </pre>\r\n */\r\n\r\nimport arg from 'arg'\r\nimport Peer from 'peerjs/dist/peerjs.esm'\r\nimport colors from 'ansi-colors'\r\nimport { parse as cliParse } from 'shell-quote'\r\n\r\nimport styles from './peer.module.css'\r\n\r\nexport const name = 'peer'\r\nexport const version = '0.1.0'\r\nexport const description = 'PeerJS Utility'\r\nexport const help = `\r\n  ${colors.magenta.bold('PeerJS Utility')}\r\n\r\n  Usage:\r\n    peer <command> <args> [options]\r\n\r\n  To set your ID (default is UUID):\r\n    peer id --id myfirstdevice\r\n\r\n  Default Connection Broker:\r\n    ${colors.bold(\"Kernel.get('peerjs', 'server-host')\")} if set, or ${colors.bold('0.peerjs.com')}\r\n\r\n  Commands:\r\n    call <peer-id> [--video] [--audio]                                     Call a peer with media streams\r\n    chat <peer-id>                                                         Open a text chat with a peer\r\n    connect <peer-id>                                                      Connect to a peer\r\n    id                                                                     Display your peer ID\r\n    list                                                                   List available peers\r\n    send <peer-id> [--text] [--text-file] [--json] [--json-file]           Send a raw message\r\n    screen <peer-id>                                                       Share your screen with a peer\r\n    upload <peer-id> [--file]                                              Upload a file to a peer\r\n\r\n  Options:\r\n    --debug                                                                Debug level ({0},1,2,3)\r\n    --file                                                                 Path of the file to upload\r\n    --help                                                                 Print this help message\r\n    --id                                                                   Set your peer ID\r\n    --json                                                                 JSON string to send\r\n    --json-file                                                            Path to JSON file to send\r\n    --server-host                                                          Set the peerjs broker host\r\n    --server-key                                                           Server API key (for 0.peerjs.com)\r\n    --server-path                                                          Set the peerjs broker path {/}\r\n    --server-port                                                          Set the peerjs broker port {443}\r\n    --text                                                                 Text message to send\r\n    --text-file                                                            Path to the text file to send\r\n    --version                                                              Print the version information\r\n`\r\n\r\nexport const spec = {\r\n  '--audio': Boolean,\r\n  '--debug': Number,\r\n  '--file': String,\r\n  '--id': String,\r\n  '--help': Boolean,\r\n  '--json': String,\r\n  '--json-file': String,\r\n  '--server-key': String,\r\n  '--server-host': String,\r\n  '--server-port': Number,\r\n  '--server-path': String,\r\n  '--server-secure': Boolean,\r\n  '--server-ping-interval': Number,\r\n  '--text': String,\r\n  '--text-file': String,\r\n  '--version': Boolean,\r\n  '--video': Boolean\r\n}\r\n\r\nlet kernel = globalThis.Kernel\r\nlet terminal\r\nconst { t } = kernel.i18n\r\n\r\nexport let id = ''\r\nexport let instance\r\nexport const connections = {}\r\n\r\nexport function setupInstance () {\r\n  return new Promise((resolve, reject) => {\r\n    instance.on('open', myId => { id = myId; resolve(id) })\r\n    instance.on('error', err => { console.error(err); reject(err) })\r\n    instance.on('connection', connection => {\r\n      connection.on('open', () => {\r\n        console.log('Incoming connection from', connection.peer)\r\n        kernel.execute(`snackbar Incoming connection from ${connection.peer}`)\r\n        connections[connection.peer] = { connection }\r\n        connection.on('data', data => processIncomingData(data, connection))\r\n      })\r\n    })\r\n\r\n    instance.on('call', async call => {\r\n      let avState = ''\r\n      if (call.metadata.video && call.metadata.audio) avState = 'Audio & Video'\r\n      if (call.metadata.video && !call.metadata.audio) avState = 'Video Only'\r\n      if (!call.metadata.video && call.metadata.audio) avState = 'Audio Only'\r\n      if (call.metadata.screen) avState = 'Screenshare'\r\n\r\n      const container = document.createElement('div')\r\n      container.innerHTML = `\r\n        <p>\r\n          You have an incoming call (${avState}) from:\r\n          <br />\r\n          <strong style='font-family: monospace'>${call.peer}</strong>\r\n        </p>\r\n      `\r\n    \r\n      const result = await kernel.dialog({\r\n        icon: 'info',\r\n        title: `Incoming ${call.metadata.screen ? 'Screenshare' : 'Call'}`,\r\n        html: container.outerHTML,\r\n        reverseButtons: true,\r\n        showDenyButton: true,\r\n        denyButtonText: 'Decline',\r\n        confirmButtonText: call.metadata.screen ? 'Accept' : 'Answer'\r\n      })\r\n\r\n      if (result.isConfirmed) {\r\n        if (call.metadata.screen) {\r\n          call.answer()\r\n        } else {\r\n          const stream = await navigator.mediaDevices.getUserMedia({ audio: call.metadata?.audio, video: call.metadata?.video })\r\n          call.answer(stream)\r\n        }\r\n\r\n        call.on('stream', peerStream => {\r\n          const video = document.createElement('video')\r\n          video.style.width = '100%'\r\n          video.style.height = '100%'\r\n\r\n          if ('srcObject' in video) {\r\n            video.srcObject = peerStream\r\n          } else {\r\n            video.src = URL.createObjectURL(peerStream)\r\n          }\r\n\r\n          video.onloadedmetadata = () => video.play()\r\n\r\n          const title = call.metadata.screen ? t('Screen') : `${t('Call')} ${call.metadata.audio ? `(${t('Audio')})` : ''}${call.metadata.video ? `(${t('Video')})` : ''}`\r\n\r\n          kernel.windows.create({\r\n            title: `${title}: ${call.peer}`,\r\n            mount: video,\r\n            max: true,\r\n            onclose: () => {\r\n\r\n              call.close()\r\n            }\r\n          })\r\n        })\r\n\r\n        call.on('close', () => {\r\n          console.log('call closed')\r\n        })\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nasync function processIncomingData (data, connection) {\r\n  console.debug({ data, connection })\r\n  if (typeof data === 'object' && data.cmd) {\r\n    let result\r\n    switch (data.cmd) {\r\n      case 'chat':\r\n        result = await kernel.dialog({\r\n          title: 'Incoming Chat',\r\n          html: `<p>Peer ID:<br />${connection.peer}</p><h3>Accept?</h3>`,\r\n          showDenyButton: true,\r\n          confirmButtonText: 'Yes'\r\n        })\r\n\r\n        if (result.isConfirmed) openChatWindow(connections[connection.peer])\r\n        break\r\n      case 'upload':\r\n        result = await kernel.dialog({\r\n          title: t('Incoming Upload'),\r\n          html: `<p>${t('Peer ID')}:<br />${connection.peer}</p><p>${t('Filename')}:<br />${data.filename}</p>`,\r\n          inputLabel: t('Where would you like to save this file?'),\r\n          inputValue: kernel.get('peer', 'defaultReceivePath') || '/tmp',\r\n          reverseButtons: true,\r\n          showDenyButton: true,\r\n          denyButtonText: t('Cancel'),\r\n          confirmButtonText: t('Save'),\r\n          input: 'text'\r\n        })\r\n\r\n        if (result.isConfirmed) return kernel.fs.writeFileSync(data.filename, data.content)\r\n        break\r\n      default:\r\n        throw new Error(`Invalid command ${JSON.stringify(data)} received from peer ${connection.peer}`)\r\n    }\r\n  }\r\n}\r\n\r\nexport function connect (peerId, args) {\r\n  return new Promise((resolve, reject) => {\r\n    if (!peerId || peerId === '') return reject(new Error('Invalid peer'))\r\n    connections[peerId] = { connection: instance.connect(peerId) }\r\n    connections[peerId].connection.on('open', () => resolve(peerId))\r\n    connections[peerId].connection.on('error', err => {\r\n      console.error(err)\r\n      reject(err)\r\n    })\r\n  })\r\n}\r\n\r\nexport async function call (peerId, args) {\r\n  const peer = connections[peerId]\r\n  if (!peer) throw new Error('Not connected to that peer')\r\n  if (!navigator.mediaDevices) throw new Error('Media devices not available')\r\n\r\n  const metadata =\r\n    args.screen\r\n    ? { screen: true }\r\n    : { audio: args['--audio'], video: args['--video'] }\r\n\r\n  const stream = args.screen ? await navigator.mediaDevices.getDisplayMedia() : await navigator.mediaDevices.getUserMedia(metadata)\r\n  const call = instance.call(peerId, stream, { metadata })\r\n\r\n  call.on('stream', peerStream => {\r\n    const video = document.createElement('video')\r\n    video.style.width = '100%'\r\n    video.style.height = '100%'\r\n\r\n    if ('srcObject' in video) {\r\n      video.srcObject = peerStream\r\n    } else {\r\n      video.src = URL.createObjectURL(peerStream)\r\n    }\r\n\r\n    video.onloadedmetadata = () => video.play()\r\n\r\n    const title = metadata.screen ? t('Screen') : `${t('Call')} ${metadata.audio ? `(${t('Audio')})` : ''}${metadata.video ? `(${t('Video')})` : ''}`\r\n\r\n    kernel.windows.create({\r\n      title: `${title}: ${call.peer}`,\r\n      mount: video,\r\n      max: true,\r\n      onclose: () => {\r\n        call.close()\r\n      }\r\n    })\r\n  })\r\n\r\n  call.on('close', () => {\r\n    console.log('call closed')\r\n  })\r\n}\r\n\r\nexport function openChatWindow (peer) {\r\n  const container = document.createElement('div')\r\n  container.classList.add(styles.container)\r\n  const chat = document.createElement('div')\r\n  chat.classList.add(styles.chat)\r\n  const form = document.createElement('form')\r\n  form.classList.add(styles.form)\r\n  const input = document.createElement('input')\r\n  input.classList.add(styles.input)\r\n  const button = document.createElement('button')\r\n  button.classList.add(styles.button)\r\n  button.type = 'submit'\r\n  button.textContent = 'Send'\r\n\r\n  container.appendChild(chat)\r\n  form.appendChild(input)\r\n  form.appendChild(button)\r\n  container.appendChild(form)\r\n\r\n  const receiveMessage = data => {\r\n    if (typeof data !== 'string') return\r\n    const bubble = document.createElement('div')\r\n    bubble.classList.add(styles.bubble, styles.toMe)\r\n    bubble.textContent = typeof data === 'string' ? data : JSON.stringify(data, null, 2)\r\n    chat.appendChild(bubble)\r\n    bubble.scrollIntoView()\r\n  }\r\n\r\n  const sendMessage = data => {\r\n    if (!data || data === '') return\r\n    const bubble = document.createElement('div')\r\n    bubble.classList.add(styles.fromMe)\r\n    bubble.textContent = data\r\n    chat.appendChild(bubble)\r\n    bubble.scrollIntoView()\r\n    peer.connection.send(data)\r\n  }\r\n\r\n  peer.connection.on('data', receiveMessage)\r\n  peer.connection.send({ cmd: 'chat' })\r\n\r\n  form.addEventListener('submit', e => {\r\n    e.preventDefault()\r\n    sendMessage(input.value)\r\n    input.value = ''\r\n  })\r\n\r\n  kernel.windows.create({\r\n    title: `Chat: ${peer.connection.peer}`,\r\n    mount: container,\r\n    width: '100%',\r\n    max: false,\r\n    onclose: () => {\r\n      peer.connection.off('data', receiveMessage)\r\n    }\r\n  })\r\n}\r\n\r\nexport async function chat (peerId) {\r\n  const peer = connections[peerId]\r\n  if (!peer) throw new Error('Not connected to that peer')\r\n  openChatWindow(peer)\r\n}\r\n\r\nexport async function screen (peerId) {\r\n  const peer = connections[peerId]\r\n  if (!peer) throw new Error('Not connected to that peer')\r\n  if (!navigator.mediaDevices) throw new Error('Media devices not available')\r\n  call(peerId, { screen: true })\r\n}\r\n\r\nexport async function send (peerId, args) {\r\n  const peer = connections[peerId]\r\n  if (!peer) throw new Error('Not connected to that peer')\r\n  if (args['--text']) return peer.connection.send(args['--text'])\r\n  if (args['--text-file']) return peer.connection.send(kernel.fs.readFileSync(args['--text-file']).toString())\r\n  if (args['--json']) return peer.connection.send(JSON.parse(args['--json']))\r\n  if (args['--json-file']) return peer.connection.send(JSON.parse(kernel.fs.readFileSync(args['--json-file']).toString()))\r\n}\r\n\r\nexport async function upload (peerId, args) {\r\n  const peer = connections[peerId]\r\n  if (!peer) throw new Error('Not connected to that peer')\r\n  const content = kernel.fs.readFileSync(args['--file'])\r\n  peer.connection.send({ cmd: 'upload', filename: kernel.utils.path.parse(args['--file']).base, content })\r\n}\r\n\r\nexport async function run (term, context = '') {\r\n  const args = arg(spec, { argv: cliParse(context) })\r\n  if (args['--version']) return term.log(version)\r\n  if (args['--help']) return term.log(help)\r\n\r\n  const cmd = args._?.[0]\r\n\r\n  terminal = term\r\n  kernel = term.kernel\r\n\r\n  const peerOptions = {}\r\n\r\n  if (args['--debug']) peerOptions.debug = args['--debug']\r\n  if (args['--server-key']) peerOptions.key = args['--server-key']\r\n  if (args['--server-host']) peerOptions.host = args['--server-host']\r\n  if (args['--server-port']) peerOptions.port = args['--server-port']\r\n  if (args['--server-path']) peerOptions.path = args['--server-path']\r\n  if (args['--server-secure']) peerOptions.secure = args['--server-secure']\r\n  if (args['--server-ping-interval']) peerOptions.pingInterval = args['--server-ping-interval']\r\n\r\n  if (!args['--server-host'] && kernel.get('peerjs', 'server-host')) {\r\n    peerOptions.host = kernel.get('peerjs', 'server-host')\r\n  }\r\n\r\n  if (args['--id'] && id !== args['--id']) {\r\n    instance = new Peer(args?.['--id'], peerOptions)\r\n    await setupInstance()\r\n  }\r\n\r\n  if (!instance) {\r\n    instance = new Peer(peerOptions)\r\n    await setupInstance()\r\n  }\r\n\r\n  switch (cmd) {\r\n    case 'call':\r\n      return await call(args._?.[1], args)\r\n    case 'chat':\r\n      return await chat(args._?.[1], args)\r\n    case 'connect':\r\n      return await connect(args._?.[1], args)\r\n    case 'id':\r\n      return term.log(id)\r\n    case 'list':\r\n      return term.log(Object.keys(connections))\r\n    case 'screen':\r\n      return await screen(args._?.[1], args)\r\n    case 'send':\r\n      return await send(args._?.[1], args)\r\n    case 'upload':\r\n      return await upload(args._?.[1], args)\r\n    default:\r\n      return term.log(help)\r\n  }\r\n}\r\n"],"names":["ANSI_REGEX","create","colors","enabled","process","env","FORCE_COLOR","visible","styles","keys","wrap","style","input","newline","stack","str","nl","includes","n","length","Set","reverse","define","name","codes","type","open","close","regex","RegExp","replace","output","ansi","push","Reflect","defineProperty","configurable","enumerable","set","value","alias","get","color","setPrototypeOf","this","concat","ansiRegex","hasColor","hasAnsi","lastIndex","test","fn","TypeError","theme","custom","val","Array","isArray","Object","none","clear","noop","stripColor","unstyle","symbols","module","exports","isHyper","TERM_PROGRAM","isWindows","platform","isLinux","common","ballotDisabled","ballotOff","ballotOn","bullet","bulletWhite","fullBlock","heart","identicalTo","line","mark","middot","minus","multiplication","obelus","pencilDownRight","pencilRight","pencilUpRight","percent","pilcrow2","pilcrow","plusMinus","question","section","starsOff","starsOn","upDownArrow","windows","assign","check","cross","ellipsisLarge","ellipsis","info","questionSmall","pointer","pointerSmall","radioOff","radioOn","warning","other","ballotCross","questionFull","flagSymbol","Symbol","ArgError","Error","constructor","msg","code","super","prototype","arg","opts","argv","slice","permissive","stopAtPositional","result","_","aliases","handlers","key","isFlag","prev","Boolean","i","len","wholeArg","separatedArguments","split","map","a","j","originalArgName","argStr","undefined","argName","match","Number","BigInt","flag","COUNT","v","existingCount","___CSS_LOADER_EXPORT___","id","locals","cssWithMappingToString","list","toString","item","content","needLayer","join","modules","media","dedupe","supports","layer","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","__create","__defProp","__defProps","defineProperties","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropNames","getOwnPropertyNames","__getOwnPropSymbols","getOwnPropertySymbols","__getProtoOf","getPrototypeOf","__hasOwnProp","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","writable","__spreadValues","b","prop","call","__spreadProps","__commonJS","cb","mod","__toESM","isNodeMode","target","copyDefault","desc","__reExport","__esModule","default","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","throw","x","done","then","apply","require_bufferbuilder","binaryFeatures","useBlobBuilder","Blob","useArrayBufferView","Uint8Array","size","BlobBuilder","BufferBuilder","_pieces","_parts","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","flush","buf","buffer","getBuffer","builder","ii","getBlob","require_binarypack","BinaryPack2","unpack","Unpacker","pack","packer","Packer","index","dataBuffer","dataView","byteLength","bufferBuilder","_utf8Replace","m","charCodeAt","unpack_uint8","unpack_raw","unpack_string","unpack_array","unpack_map","unpack_float","unpack_double","unpack_uint16","unpack_uint32","unpack_uint64","unpack_int8","unpack_int16","unpack_int32","unpack_int64","byte","bytes","read","uint16","uint32","uint64","uint8","Math","pow","c","String","fromCharCode","objects","exp","h32","l32","subarray","pack_string","floor","pack_integer","pack_double","pack_array","File","pack_bin","ArrayBuffer","startsWith","pack_object","Date","toBinaryPack","blob","pack_uint8","pack_uint16","pack_uint32","utf8Length","ary","num","pack_int8","pack_int16","pack_int32","pack_int64","pack_uint64","sign","log","LN2","frac0","frac1","b32","high","low","require_eventemitter3","has","prefix","Events","EE","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter5","__proto__","eventNames","events","names","listeners","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","arguments","removeListener","on","removeAllListeners","off","prefixed","EventEmitter","BinaryPack","DEFAULT_CONFIG","iceServers","urls","username","credential","sdpSemantics","Utils","CLOUD_HOST","CLOUD_PORT","chunkedMTU","defaultConfig","_dataCount","validateId","chunk","chunks","total","ceil","start","end","min","__peerData","blobToArrayBuffer","FileReaderCtr","fr","onload","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","randomToken","random","substr","isSecure","location","protocol","import_eventemitter34","logger_default","_logLevel","logLevel","_print","warn","error","setLogFunction","rest","copy","message","console","import_eventemitter3","Socket","secure","host","port","path","pingInterval","polyfills","_a","_disconnected","_id","_messagesQueue","alive","_destroyed","wsProtocol","_baseUrl","WebSocketConstructor","WebSocket","messagesQueue","destroyed","token","_socket","wsUrl","onmessage","parse","onclose","_cleanup","onopen","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","setTimeout","_sendHeartbeat","_wsOpen","send","readyState","copiedQueue","clearTimeout","destroy","Negotiator","connection","webRtc","_b","provider","options","WebRTC","startConnection","peerConnection","_startPeerConnection","_stream","_addTracksToConnection","originator","dataConnection","config","ordered","reliable","dataChannel","createDataChannel","label","initialize","_makeOffer","handleSDP","sdp","ctr","RTCPeerConnection","_setupListeners","peerId","peer","connectionId","connectionType","onicecandidate","candidate","socket","payload","dst","oniceconnectionstatechange","iceConnectionState","ondatachannel","channel","getConnection","ontrack","stream","streams","mediaConnection","_addStreamToMediaConnection","cleanup","peerConnectionNotClosed","signalingState","dataChannelNotClosed","offer","createOffer","constraints","sdpTransform","setLocalDescription","metadata","serialization","err","emitError","err_1","_makeAnswer","answer","createAnswer","RTCSessionDescription","self","setRemoteDescription","handleCandidate","ice","sdpMLineIndex","sdpMid","RTCIceCandidate","addIceCandidate","addTrack","getTracks","forEach","track","addStream","import_eventemitter32","BaseConnection","_open","_MediaConnection","localStream","_localStream","remoteStream","_remoteStream","ID_PREFIX","_negotiator","handleMessage","_payload","messages","_getMessages","_removeConnection","MediaConnection","import_eventemitter33","EncodingQueue","fileReader","_queue","_processing","doNextTask","onerror","queue","processing","enque","abort","shift","_DataConnection","_buffer","_bufferSize","_buffering","_chunkedData","FileReader","_encodingQueue","ab","_bufferedSend","_dc","bufferSize","dc","_configureDataChannel","features","binaryBlob","binaryType","_handleDataMessage","datatype","deserializedData","unpackedData","_handleChunk","chunkInfo","count","data2","chunked","_sendChunks","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blob2","DataConnection","Supports","isUnifiedPlanSupported","RTCRtpTransceiver","tempPc","supported","addTransceiver","_Peer","userId","_lastServerId","_connections","Map","_lostMessages","debug","DEFAULT_KEY","_options","hostname","logFunction","_api","_request","url","fetch","_buildUrl","method","getTime","retrieveId","response","status","text","pathError","listAllPeers","helpfulError","json","_createServerConnection","getFeatures","audioVideo","_initialize","id2","catch","_abort","_delayedAbort","connections","plainConnections","disconnected","_handleMessage","disconnect","src","_cleanupPeer","delete","_addConnection","message2","_storeMessage","connect","indexOf","splice","currentId","reconnect","peers","static","_features","checkFeatures","webRTC","unifiedPlan","pc","Peer","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","nextTick","title","browser","version","versions","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","api","update","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","styleTarget","document","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","appendChild","element","createElement","attributes","styleElement","nonce","setAttribute","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","d","definition","o","nc","globalThis","Kernel","i18n","t"],"sourceRoot":""}