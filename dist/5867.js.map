{"version":3,"file":"5867.js","mappings":";s7DACA,smNACA,IAAIA,EACAC,EACAC,EAEG,SAAeC,IAAtB,iEAAO,8EACLC,cAAcH,GACdD,EAAOK,SACPH,IAHK,kEAMQ,cAAf,iEAAe,gGAAkBI,EAAlB,EAAkBA,gBAC3BC,SAASC,eAAe,eADf,0CACsC,GADtC,OAGbN,EAAmBI,GACnBN,EAASO,SAASE,cAAc,WACzBC,GAAK,cACZV,EAAOW,MAAQC,WAAWC,WAC1Bb,EAAOc,OAASF,WAAWG,YAC3Bf,EAAOgB,MAAMC,SAAW,WACxBjB,EAAOgB,MAAME,IAAM,EACnBlB,EAAOgB,MAAMG,KAAO,EACpBnB,EAAOgB,MAAMI,OAASC,OAAOC,iBAE7Bf,SAASgB,KAAKC,YAAYxB,GACpByB,EAAMzB,EAAO0B,WAAW,MAGxBC,EAAUC,KAAKC,MAAM7B,EAAOW,MADjB,IAEXmB,EAAQC,MAAMJ,GAASK,KAAK,GAC5BC,EAAQ,mGAAmGC,MAAM,IACvHT,EAAIU,KAAOV,EAAIU,KAAKC,QAAQ,QAAjB,UAJM,GAIN,OAeXnC,EAAWoC,aAbO,WAChBZ,EAAIa,UAAY,qBAChBb,EAAIc,SAAS,EAAG,EAAGvC,EAAOW,MAAOX,EAAOc,QAFlB,UAIDgB,EAAMU,WAJL,IAItB,IAAK,EAAL,qBAAsC,oBAA1BC,EAA0B,KAAvBC,EAAuB,KACpCjB,EAAIa,UAAY,OAChB,IAAMK,EAAOV,EAAML,KAAKC,MAAMD,KAAKgB,SAAWX,EAAMY,SACpDpB,EAAIqB,SAASH,EAbA,GAaMF,EAbN,GAaoBC,GACjCZ,EAAMW,KAdO,GAeTC,EAAe1C,EAAOc,QAAUc,KAAKgB,SAAW,MAAMd,EAAMW,GAAK,IATjD,iCAaU,IAClCzC,EAAO+C,iBAAiB,QAAS5C,GApCpB","sources":["file:////home/j/code/web3os/@web3os-core/kernel/src/modules/screensaver/matrix/index.js"],"sourcesContent":["/* Inspired by https://codepen.io/yaclive/pen/EayLYO */\r\n\r\nlet canvas\r\nlet interval\r\nlet endScreensaverFn\r\n\r\nexport async function exit () {\r\n  clearInterval(interval)\r\n  canvas.remove()\r\n  endScreensaverFn()\r\n}\r\n\r\nexport default async function ({ endScreensaver }) {\r\n  if (document.getElementById('screensaver')) return false\r\n\r\n  endScreensaverFn = endScreensaver\r\n  canvas = document.createElement('canvas')\r\n  canvas.id = 'screensaver'\r\n  canvas.width = globalThis.innerWidth\r\n  canvas.height = globalThis.innerHeight\r\n  canvas.style.position = 'absolute'\r\n  canvas.style.top = 0\r\n  canvas.style.left = 0\r\n  canvas.style.zIndex = Number.MAX_SAFE_INTEGER\r\n\r\n  document.body.appendChild(canvas)\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  const fontSize = 14\r\n  const columns = Math.floor(canvas.width / fontSize)\r\n  const drops = Array(columns).fill(1)\r\n  const chars = '01~!#$%^&*()_+=-[]{}\\\\|;:\",./<>?ﾊﾐﾋｰｳｼﾅﾓﾆｻﾜﾂｵﾘｱﾎﾃﾏｹﾒｴｶｷﾑﾕﾗｾﾈｽﾀﾇﾍﾊﾐﾋｰｳｼﾅﾓﾆｻﾜﾂｵﾘｱﾎﾃﾏｹﾒｴｶｷﾑﾕﾗｾﾈｽﾀﾇﾍ'.split('')\r\n  ctx.font = ctx.font.replace(/\\d+px/, `${fontSize}px`);\r\n\r\n  const animatrix = () => {\r\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n    for (const [x, y] of drops.entries()) {\r\n      ctx.fillStyle = '#0f0'\r\n      const char = chars[Math.floor(Math.random() * chars.length)]\r\n      ctx.fillText(char, x * fontSize, y * fontSize)\r\n      drops[x]++\r\n      if (y * fontSize > canvas.height && Math.random() > 0.95) drops[x] = 0\r\n    }\r\n  }\r\n\r\n  interval = setInterval(animatrix, 33)\r\n  canvas.addEventListener('click', exit)\r\n}\r\n"],"names":["canvas","interval","endScreensaverFn","exit","clearInterval","remove","endScreensaver","document","getElementById","createElement","id","width","globalThis","innerWidth","height","innerHeight","style","position","top","left","zIndex","Number","MAX_SAFE_INTEGER","body","appendChild","ctx","getContext","columns","Math","floor","drops","Array","fill","chars","split","font","replace","setInterval","fillStyle","fillRect","entries","x","y","char","random","length","fillText","addEventListener"],"sourceRoot":""}