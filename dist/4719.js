/*! For license information please see 4719.js.LICENSE.txt */
(self.webpackChunk_web3os_core_kernel=self.webpackChunk_web3os_core_kernel||[]).push([[4719,6748],{94654:(e,t,n)=>{var r=n(14224);const o=Symbol("arg flag");class i extends Error{constructor(e,t){super(e),this.name="ArgError",this.code=t,Object.setPrototypeOf(this,i.prototype)}}function a(e,{argv:t=r.argv.slice(2),permissive:n=!1,stopAtPositional:a=!1}={}){if(!e)throw new i("argument specification object is required","ARG_CONFIG_NO_SPEC");const c={_:[]},s={},u={};for(const t of Object.keys(e)){if(!t)throw new i("argument key cannot be an empty string","ARG_CONFIG_EMPTY_KEY");if("-"!==t[0])throw new i(`argument key must start with '-' but found: '${t}'`,"ARG_CONFIG_NONOPT_KEY");if(1===t.length)throw new i(`argument key must have a name; singular '-' keys are not allowed: ${t}`,"ARG_CONFIG_NONAME_KEY");if("string"==typeof e[t]){s[t]=e[t];continue}let n=e[t],r=!1;if(Array.isArray(n)&&1===n.length&&"function"==typeof n[0]){const[e]=n;n=(t,n,r=[])=>(r.push(e(t,n,r[r.length-1])),r),r=e===Boolean||!0===e[o]}else{if("function"!=typeof n)throw new i(`type missing or not a function or valid array type: ${t}`,"ARG_CONFIG_VAD_TYPE");r=n===Boolean||!0===n[o]}if("-"!==t[1]&&t.length>2)throw new i(`short argument keys (with a single hyphen) must have only one character: ${t}`,"ARG_CONFIG_SHORTOPT_TOOLONG");u[t]=[n,r]}for(let e=0,r=t.length;e<r;e++){const r=t[e];if(a&&c._.length>0){c._=c._.concat(t.slice(e));break}if("--"===r){c._=c._.concat(t.slice(e+1));break}if(r.length>1&&"-"===r[0]){const o="-"===r[1]||2===r.length?[r]:r.slice(1).split("").map((e=>`-${e}`));for(let r=0;r<o.length;r++){const a=o[r],[l,d]="-"===a[1]?a.split(/=(.*)/,2):[a,void 0];let p=l;for(;p in s;)p=s[p];if(!(p in u)){if(n){c._.push(a);continue}throw new i(`unknown or unexpected option: ${l}`,"ARG_UNKNOWN_OPTION")}const[h,f]=u[p];if(!f&&r+1<o.length)throw new i(`option requires argument (but was followed by another short argument): ${l}`,"ARG_MISSING_REQUIRED_SHORTARG");if(f)c[p]=h(!0,p,c[p]);else if(void 0===d){if(t.length<e+2||t[e+1].length>1&&"-"===t[e+1][0]&&(!t[e+1].match(/^-?\d*(\.(?=\d))?\d*$/)||h!==Number&&("undefined"==typeof BigInt||h!==BigInt)))throw new i(`option requires argument: ${l}${l===p?"":` (alias for ${p})`}`,"ARG_MISSING_REQUIRED_LONGARG");c[p]=h(t[e+1],p,c[p]),++e}else c[p]=h(d,p,c[p])}}else c._.push(r)}return c}a.flag=e=>(e[o]=!0,e),a.COUNT=a.flag(((e,t,n)=>(n||0)+1)),a.ArgError=i,e.exports=a},94719:(e,t,n)=>{"use strict";n.r(t),n.d(t,{description:()=>k,exitDesktop:()=>F,help:()=>T,launchTerminal:()=>C,loadDesktopIconPositions:()=>O,name:()=>E,run:()=>q,saveDesktopIconPositions:()=>D,start:()=>P,toggleLauncher:()=>R,toggleRunner:()=>Y,version:()=>L});var r=n(94654),o=n.n(r),i=n(62005),a=n.n(i),c=n(55481),s=n.n(c),u=n(76618),l=n(64667),d=(n(49825),n(56748)),p=n.n(d),h=n(13053),f=n.n(h);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(){w=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=b(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function p(){}function h(){}var f={};c(f,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(T([])));v&&v!==t&&n.call(v,o)&&(f=v);var g=h.prototype=d.prototype=Object.create(f);function M(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,i,a,c){var s=u(e[o],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==m(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(s.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=h,c(g,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},M(x.prototype),c(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(g),c(g,a,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function g(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,c,"next",e)}function c(e){g(i,r,o,a,c,"throw",e)}a(void 0)}))}}var x,b,E="desktop",L="1.0.0",k="Web3OS Desktop",T="\n  Usage:\n    desktop <options>             Start the Desktop Environment\n    desktop launcher              Start the Desktop Launcher only\n\n  Options:\n    --wallpaper, -w               Specify the URL to the wallpaper to use at startup\n    --launcher-wallpaper, l       Specify the URL to the wallpaper for the launcher\n",A={"--version":Boolean,"-v":"--version","--wallpaper":String,"-w":"--wallpaper","--launcher-wallpaper":String,"-l":"--launcher-wallpaper"},S=globalThis.Kernel,N=globalThis.Terminal,I="https://images.unsplash.com/photo-1639262498805-17c7dc422d37";function D(){var e={};document.querySelectorAll(".web3os-desktop-entry").forEach((function(t){var n=t.getBoundingClientRect(),r=n.x,o=n.y,i=JSON.parse(t.dataset.file).location;e[i]={x:r,y:o}})),globalThis.localStorage.setItem("web3os_desktop_icon_positions",JSON.stringify(e))}function O(){try{var e=JSON.parse(globalThis.localStorage.getItem("web3os_desktop_icon_positions"));document.querySelectorAll(".web3os-desktop-entry").forEach((function(t){try{var n=JSON.parse(t.dataset.file).location,r=e[n],o=r.x,i=r.y;t.style.position="absolute",t.style.top=i+"px",t.style.left=o+"px"}catch(e){console.log("Position not set:",t.dataset.file)}}))}catch(e){console.warn("No desktop positions set")}}function C(){return j.apply(this,arguments)}function j(){return j=M(w().mark((function e(){var t,n,r,o,i,a,c,s=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=null,(r=t.customCommands||[]).push({name:"exit",run:function(){return n.window.close()}}),o=t.kernel?t.kernel:S||globalThis.Kernel,i=o.Web3osTerminal.create({fontFamily:t.fontFamily||"'Fira Mono', monospace",fontSize:t.fontSize||18,fontWeight:t.fontWeight||900,theme:t.theme||{background:"#131820"},customCommands:r}),(a=document.createElement("div")).style.width="100%",a.style.height="100%",i.open(a),i.cwd=t.path||"/",(n=o.windows.create({title:t.windowTitle||t.command||"web3os.sh",mount:a,width:t.windowWidth||"75%",height:t.windowHeight||"70%",x:"center",y:"center",onclose:function(){clearInterval(c)}})).term=i,t.startup&&o.execute(t.startup,{terminal:i}),i.prompt(),i.focus(),t.command&&S.execute(t.command,{terminal:i}),c=setInterval(i.fit,200),setTimeout((function(){return n.window.focus()}),10),e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function _(){return z.apply(this,arguments)}function z(){return z=M(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("div")).id="web3os-desktop-file-layer",t.addEventListener("dragover",(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"})),S.fs.readdirSync("/desktop").forEach((function(e){var n,r={name:e,location:S.utils.path.resolve("/desktop",e),type:S.fs.statSync(a().resolve("/desktop",e)).isDirectory()?"dir":"file"},o=document.createElement("div"),i=document.createElement("mwc-icon"),c=document.createElement("h1");n="dir"===r.type?"folder":"text_snippet",o.id="web3os-desktop-entry-".concat(btoa(r.location)),o.classList.add("web3os-desktop-entry"),i.textContent=n,c.textContent=r.name,o.dataset.file=JSON.stringify(r),i.dataset.file=o.dataset.file,c.dataset.file=o.dataset.file,o.appendChild(i),o.appendChild(c),t.appendChild(o),o.draggable=!0,o.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text",e.target.id),e.dataTransfer.effectAllowed="move"})),o.addEventListener("dragend",(function(e){e.target.style.position="absolute",e.target.style.left=e.x-48+"px",e.target.style.top=e.y-48+"px",D()}));var s,d=[{text:"Edit",action:function(){return S.execute("edit ".concat(r.location))}},{text:"Delete",action:(s=M(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.execute("rm ".concat(r.location)),e.next=3,_();case 3:t=e.sent,document.querySelector("#web3os-desktop-file-layer").replaceWith(t),O();case 6:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})}];o.addEventListener("contextmenu",(function(e){e.preventDefault(),e.stopPropagation(),u.b.show(d,e.target)})),o.addEventListener("click",(function(e){var t=e.target.dataset.file,n=JSON.parse(t),r=S.fs.statSync(n.location),o=S.utils.path.parse(n.name).ext,i=(0,l.lookup)(o);if(r.isDirectory())return S.execute("files ".concat(n.location));switch(o){case".sh":return S.executeScript(n.location);case".js":return S.execute("eval ".concat(n.location));case".json":case".txt":return S.execute("edit ".concat(n.location));case".md":return S.execute("markdown ".concat(n.location));case".link":try{var a=JSON.parse(S.fs.readFileSync(location,"utf8")),c=a.url;a.useWeb3osBrowser?S.execute("www ".concat(c)):globalThis.open(c,"_blank")}catch(e){console.error(e),S.dialog({title:"Error",text:e.message,icon:"error"})}break;default:if(i&&/^(image|video|audio|application\/pdf)/.test(i))return S.execute("view ".concat(location));S.execute("alert I'm not sure how to handle this file!")}}))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function P(e){return G.apply(this,arguments)}function G(){return(G=M(w().mark((function e(t){var n,r,o,i,a,c,s,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N.log("Starting web3os.sh Desktop.."),(x=document.createElement("div")).id="web3os-desktop",(n=document.createElement("img")).id="web3os-desktop-wallpaper",n.src=t["--wallpaper"]||p(),n.style.opacity=0,n.complete?n.style.opacity=1:n.addEventListener("load",(function(){n.style.opacity=1})),e.next=11,_();case 11:r=e.sent,x.appendChild(n),x.appendChild(r),(o=document.createElement("mwc-icon")).id="web3os-desktop-menu-button",o.ariaLabel="Open the Launcher",o.textContent="widgets",o.classList.add("hint--left","hint--success"),(i=document.createElement("mwc-icon")).id="web3os-desktop-shell-button",i.ariaLabel="Open a terminal",i.textContent="terminal",i.classList.add("hint--left","hint--info"),i.addEventListener("click",(function(){return C()})),(a=document.createElement("mwc-icon")).id="web3os-desktop-exit-button",a.ariaLabel="Exit the desktop",a.textContent="logout",a.classList.add("hint--left","hint--info"),a.addEventListener("click",F),c=function(){[i,a].forEach((function(e){e.style.opacity=1}))},s=function(){[i,a].forEach((function(e){e.style.opacity=0}))},o.addEventListener("animationend",(function(){return o.classList.remove("animate__animated","animate__bounce","animate__slow")})),o.addEventListener("click",(function(e){return R({e})})),o.addEventListener("contextmenu",(function(e){e.preventDefault(),e.stopPropagation()})),o.addEventListener("mouseenter",(function(){o.classList.add("web3os-desktop-menu-button-hover")})),o.addEventListener("mouseleave",(function(){o.classList.remove("web3os-desktop-menu-button-hover")})),o.addEventListener("touchstart",(function(){o.classList.add("web3os-desktop-menu-button-hover"),c()})),o.addEventListener("touchend",(function(e){var t,n,r=document.elementFromPoint(null===(t=e.changedTouches)||void 0===t?void 0:t[0].clientX,null===(n=e.changedTouches)||void 0===n?void 0:n[0].clientY);e.preventDefault(),e.stopPropagation(),r&&r.click(),s(),o.classList.remove("web3os-desktop-menu-button-hover")})),[o,i,a].forEach((function(e){e.addEventListener("pointerenter",c),e.addEventListener("pointerleave",s)})),u=function(e){"KeyQ"===e.code&&e.ctrlKey&&e.shiftKey&&F(),"Meta"===e.key&&e.ctrlKey&&R(t),"Tab"===e.key&&e.shiftKey&&Y()},globalThis.addEventListener("keydown",u),x.append(o),x.append(i),x.append(a),document.querySelector("#web3os-terminal").style.display="none",document.body.appendChild(x),O(),e.next=56;break;case 52:throw e.prev=52,e.t0=e.catch(0),console.error(e.t0),e.t0;case 56:case"end":return e.stop()}}),e,null,[[0,52]])})))).apply(this,arguments)}function Y(){return U.apply(this,arguments)}function U(){return U=M(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.querySelector("#web3os-desktop-runner")){e.next=2;break}return e.abrupt("return",document.querySelector("#web3os-desktop-runner").remove());case 2:(t=document.createElement("div")).id="web3os-desktop-runner",t.hideActions=!0,(n=document.createElement("input")).id="web3os-desktop-runner-input",n.placeholder="Run a command...",n.addEventListener("keydown",function(){var e=M(w().mark((function e(r){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===r.key){e.next=2;break}return e.abrupt("return");case 2:S.execute(n.value),t.remove();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.append(n),t.open=!0,document.body.appendChild(t);case 12:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function R(e){return W.apply(this,arguments)}function W(){return W=M(w().mark((function e(t){var n,r,o,i,a,c,u,l,d,p,h,m,v,g,x,E,L,k,T,A,N,D,O;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=4;break}return b.window.close(),b=null,e.abrupt("return");case 4:T=[{name:"Files",icon:null===(n=S.modules.files)||void 0===n?void 0:n.icon,description:null===(r=S.modules.files)||void 0===r?void 0:r.description,run:function(){return S.execute("files /desktop")}},{name:"Doom",icon:null===(o=S.modules["@web3os-apps/doom"])||void 0===o?void 0:o.icon,description:null===(i=S.modules["@web3os-apps/doom"])||void 0===i?void 0:i.description,run:function(){return S.execute("@web3os-apps/doom")}},{name:"Wolfenstein",icon:null===(a=S.modules["@web3os-apps/wolfenstein"])||void 0===a?void 0:a.icon,description:null===(c=S.modules["@web3os-apps/wolfenstein"])||void 0===c?void 0:c.description,run:function(){return S.execute("wolfenstein")}},{name:"Screensaver",icon:null===(u=S.modules.screensaver)||void 0===u?void 0:u.icon,description:null===(l=S.modules.screensaver)||void 0===l?void 0:l.description,run:function(){return S.execute("screensaver")}},{name:"Browser",icon:null===(d=S.modules.www)||void 0===d?void 0:d.icon,description:null===(p=S.modules.www)||void 0===p?void 0:p.description,run:function(){return S.execute("www about:blank")}},{name:"Instacalc",icon:null===(h=S.modules.www)||void 0===h?void 0:h.icon,description:null===(m=S.modules.www)||void 0===m?void 0:m.description,run:function(){return S.execute("www https://instacalc.com")}},{name:"Thesaurus",icon:null===(v=S.modules.www)||void 0===v?void 0:v.icon,description:null===(g=S.modules.www)||void 0===g?void 0:g.description,run:function(){return S.execute("www https://thesaurus.com")}},{name:"Dictionary",icon:null===(x=S.modules.www)||void 0===x?void 0:x.icon,description:null===(E=S.modules.www)||void 0===E?void 0:E.description,run:function(){return S.execute("www https://dictionary.com")}},{name:"Wikipedia",icon:null===(L=S.modules.www)||void 0===L?void 0:L.icon,description:null===(k=S.modules.www)||void 0===k?void 0:k.description,run:function(){return S.execute("www https://wikipedia.org")}}],(A=document.createElement("div")).id="web3os-desktop-launcher",N=y(T.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})));try{for(O=function(){var e=D.value,t=e.name,n=e.description,r=e.icon,o=e.run,i=document.createElement("div");i.classList.add("web3os-desktop-launcher-entry");var a=document.createElement("img");a.src=r||f();var c=document.createElement("h1");c.textContent=t,i.title=n,i.dataset.command=t,i.append(a),i.append(c),A.appendChild(i),i.addEventListener("click",function(){var e=M(w().mark((function e(t){var n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.dataset.command,console.log({command:n});try{o()}catch(e){S.log(e.message),S.dialog({icon:"error",title:"Error",text:s().unstyle(e.message)})}finally{null!==(r=b)&&void 0!==r&&r.window&&b.window.close()}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},N.s();!(D=N.n()).done;)O()}catch(e){N.e(e)}finally{N.f()}(b=S.windows.create({class:"no-min no-full web3os-desktop-launcher-window",title:"Web3os",mount:A,x:"center",y:"center",width:"70%",height:"70%",onblur:function(){var e,t,n;null===(e=b)||void 0===e||null===(t=e.window)||void 0===t||null===(n=t.close)||void 0===n||n.call(t)},onclose:function(){b=null}})).window.body.style.backgroundImage="url(".concat(t["--launcher-wallpaper"]||I,")"),b.window.body.id="web3os-desktop-launcher-wallpaper";case 12:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function F(){return Q.apply(this,arguments)}function Q(){return(Q=M(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.remove(),document.querySelector("#web3os-terminal").style.display="block",globalThis.Terminal.focus(),globalThis.Terminal.fit();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return B.apply(this,arguments)}function B(){return(B=M(w().mark((function e(t,n){var r,i,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N=t,S=t.kernel,i=o()(A,{argv:n.split(" ")}),a=null===(r=i._)||void 0===r?void 0:r[0],!i["--version"]){e.next=6;break}return e.abrupt("return",N.log(L));case 6:S.fs.existsSync("/desktop")||S.fs.mkdirSync("/desktop"),S.fs.existsSync("/desktop/Documents")||S.fs.mkdirSync("/desktop/Documents"),e.t0=a,e.next="launcher"===e.t0?11:(e.t0,12);break;case 11:return e.abrupt("return",R(i));case 12:if(!document.querySelector("#web3os-desktop")){e.next=14;break}throw new Error("Desktop is already running");case 14:return e.next=16,P(i);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},76618:(e,t)=>{"use strict";function n(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r}function r(e){return"function"==typeof e?e():e}function o(e){return i(e)||a(e)||c(e)||function(e){return e.hasOwnProperty("html")||e.hasOwnProperty("element")}(e)}function i(e){return e.hasOwnProperty("action")}function a(e){return e.hasOwnProperty("href")}function c(e){return e.hasOwnProperty("subMenu")}function s(e,t){var n;e.addEventListener("mouseenter",(function(e){n=setTimeout((function(){return t(e)}),150)})),e.addEventListener("mouseleave",(function(){return clearTimeout(n)}))}function u(e){return r(e.disabled)||c(e)&&0===e.subMenu.length}var l=function(){function e(){var t=this;this.cache={},this.hdir="r",this.vdir="d",this.preventCloseOnScroll=!1,window.addEventListener("click",(function(e){var n=e.target instanceof Element&&e.target.parentElement;n&&"interactive"===n.className||t.hide()})),window.addEventListener("resize",(function(){return t.hide()}));var n=0;window.addEventListener("wheel",(function(){clearTimeout(n),n=setTimeout((function(){t.preventCloseOnScroll?t.preventCloseOnScroll=!1:t.hide()}))}),{passive:!0}),e.addStylesToDom()}return e.getInstance=function(){e.instance||(e.instance=new e);var t=e.instance;return{attach:t.attach.bind(t),delete:t.delete.bind(t),hide:t.hide.bind(t),show:t.show.bind(t),update:t.update.bind(t)}},e.prototype.attach=function(e,t,r){var o=this;void 0===r&&(r=function(e){return e});var i=document.querySelector(e);if(void 0===this.cache[e])if(i){var a=function(e){var i=r(n(t),e);o.show(i,e)};this.cache[e]={ctxMenu:t,handler:a,beforeRender:r},i.addEventListener("contextmenu",a)}else console.error("target element "+e+" not found");else console.error("target element "+e+" already has a context menu assigned. Use ContextMenu.update() intstead.")},e.prototype.update=function(e,t,n){var r=this.cache[e],o=document.querySelector(e);r&&(null==o||o.removeEventListener("contextmenu",r.handler)),delete this.cache[e],this.attach(e,t||(null==r?void 0:r.ctxMenu)||[],n||(null==r?void 0:r.beforeRender))},e.prototype.delete=function(e){var t=this.cache[e];if(t){var n=document.querySelector(e);n?(n.removeEventListener("contextmenu",t.handler),delete this.cache[e]):console.error("target element "+e+" does not exist (anymore)")}else console.error("no context menu for target element "+e+" found")},e.prototype.show=function(e,t){var r=this;t instanceof MouseEvent&&t.stopImmediatePropagation(),this.hide(),this.menu=this.generateDOM(n(e),t),document.body.appendChild(this.menu),this.menu.addEventListener("wheel",(function(){return r.preventCloseOnScroll=!0}),{passive:!0}),t instanceof MouseEvent&&t.preventDefault()},e.prototype.hide=function(e){var t;void 0===e&&(e=this.menu),this.hdir="r",this.vdir="d",e&&(e===this.menu&&delete this.menu,null===(t=e.parentElement)||void 0===t||t.removeChild(e))},e.prototype.generateDOM=function(e,t){var n=this,l=document.createElement("ul");0===e.length&&(l.style.display="none"),e.forEach((function(e){var t=function(e){var t=document.createElement("li");if(function(e){return e.hasOwnProperty("isDivider")}(e))return t.className="divider",t;if(function(e,t){var n=r(e.html),o="<span>"+r(e.text)+"</span>",i=r(e.element);i?t.append(i):t.innerHTML=n||o,t.title=r(e.tooltip)||"",e.style&&t.setAttribute("style",r(e.style)),e.icon&&(t.classList.add("icon"),t.innerHTML+='<img class="icon" src="'+r(e.icon)+'" />')}(e,t),!o(e))return t.classList.add("heading"),t;if(u(e))return t.classList.add("disabled"),c(e)&&t.classList.add("submenu"),t;if(t.classList.add("interactive"),a(e)){var n=document.createElement("a");return n.append.apply(n,Array.from(t.childNodes)),n.href=r(e.href),e.hasOwnProperty("download")&&(n.download=r(e.download)),e.hasOwnProperty("target")&&(n.target=r(e.target)),t.append(n),t}return i(e)?(t.addEventListener("click",e.action),t):(t.classList.add("submenu"),t)}(e);s(t,(function(){var e,r=null===(e=t.parentElement)||void 0===e?void 0:e.querySelector("ul");r&&r.parentElement!==t&&n.hide(r)})),o(e)&&!u(e)&&(c(e)?s(t,(function(o){t.querySelector("ul")||n.openSubMenu(o,r(e.subMenu),t)})):t.addEventListener("click",(function(){return n.hide()}))),l.appendChild(t)})),l.className="ctxmenu";var d=function(e){var t=e.cloneNode(!0);t.style.visibility="hidden",document.body.appendChild(t);var n=t.getBoundingClientRect();return document.body.removeChild(t),n}(l),p={x:0,y:0};if(t instanceof Element){var h=t.getBoundingClientRect(),f=h.left,m=h.width,y=h.top;p={x:"r"===this.hdir?f+m:f-d.width,y},t.className.includes("submenu")&&(p.y+="d"===this.vdir?4:-12);var v=this.getPosition(d,p);p.x!==v.x&&(this.hdir="r"===this.hdir?"l":"r",p.x="r"===this.hdir?f+m:f-d.width),p.y!==v.y&&(this.vdir="u"===this.vdir?"d":"u",p.y=v.y),p=this.getPosition(d,p,!1)}else p=this.getPosition(d,{x:t.clientX,y:t.clientY});return l.style.left=p.x+"px",l.style.top=p.y+"px",l.addEventListener("contextmenu",(function(e){e.stopPropagation(),e.preventDefault()})),l.addEventListener("click",(function(e){var t=e.target instanceof Element&&e.target.parentElement;t&&"interactive"!==t.className&&e.stopPropagation()})),l},e.prototype.openSubMenu=function(e,t,n){var r,o=null===(r=n.parentElement)||void 0===r?void 0:r.querySelector("li > ul");o&&o.parentElement!==n&&this.hide(o),n.appendChild(this.generateDOM(t,n))},e.prototype.getPosition=function(e,t,n){void 0===n&&(n=!0);var r=document.documentElement,o=r.clientWidth,i=r.clientHeight,a=""!==document.body.style.transform,c=a?window.scrollX:0,s=a?window.scrollY:0,u=a?o+window.scrollX:o,l=a?i+window.scrollY:i;return a&&n&&(t.x+=window.scrollX,t.y+=window.scrollY),{x:"r"===this.hdir?t.x+e.width>u?u-e.width:t.x:t.x<c?c:t.x,y:"d"===this.vdir?t.y+e.height>l?l-e.height:t.y:t.y<s?s:t.y}},e.addStylesToDom=function(){var e=function(){if("loading"===document.readyState)return document.addEventListener("readystatechange",e);var t=document.createElement("style");t.innerHTML='html{min-height:100%}.ctxmenu{position:fixed;max-height:100vh;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana, sans-serif}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0, 0, 0, .1)}.ctxmenu li.submenu::after{content:"";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border-right:1px solid #000;border-top:1px solid #000;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}',document.head.insertBefore(t,document.head.childNodes[0]),e=function(){}};e()},e}().getInstance();t.b=l},13053:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEyMi44OCAxMDEuOSI+PHBhdGggZD0iTTMuMzQgMGgxMTYuMmEzLjM1IDMuMzUgMCAwMTMuMzQgMy4zNHY3N2EzLjM1IDMuMzUgMCAwMS0zLjM0IDMuMzRIMy4zNEEzLjM1IDMuMzUgMCAwMTAgODAuMzJ2LTc3QTMuMzUgMy4zNSAwIDAxMy4zNCAwem0xMC4xNSA2My45MWEyLjU5IDIuNTkgMCAxMTAtNS4xN2gzOS40NWEyLjU5IDIuNTkgMCAxMTAgNS4xN3ptLjE1LTEzLjI4YTIuNTkgMi41OSAwIDAxMC01LjE3SDQyLjRhMi41OSAyLjU5IDAgMDEwIDUuMTd6bS0uMTUtMTMuMjNhMi41OSAyLjU5IDAgMTEwLTUuMTdoMjAuMzZhMi41OSAyLjU5IDAgMDEwIDUuMTd6bTAtMTMuMjZhMi41OSAyLjU5IDAgMTEwLTUuMTdIMjUuM2EyLjU5IDIuNTkgMCAwMTAgNS4xN3ptOTcgMjYuMTl2Ni40NGwtMTMuMjMgNy41di03LjVsOC41Mi0zLjI0LTguNTItMy4ydi03LjVsMTMuMjMgNy41em0tMjIuOTIgMTZIODJsNy0yNy4xMWg1LjYzbC03IDI3LjExem0tOS40MS0xNmwtOC41MyAzLjIgOC41MyAzLjI0djcuNUw2NSA1Ni43N3YtNi40NGwxMy4yNC03LjV2Ny41em01LjY3LTM4LjY4djMuNjdBMS44MyAxLjgzIDAgMDE4MiAxNy4xNWgtM2ExNC40MyAxNC40MyAwIDAxLTEuNiAzLjVsMiAyYTEuODMgMS44MyAwIDAxMCAyLjU4bC0yLjcxIDIuNzFhMS44MyAxLjgzIDAgMDEtMi41OCAwbC0yLjE4LTIuMThhMTQuNDMgMTQuNDMgMCAwMS0zLjYgMS4zNXYyLjgyYTEuODQgMS44NCAwIDAxLTEuODMgMS44M2gtMy44N2ExLjg0IDEuODQgMCAwMS0xLjgzLTEuODN2LTMuMDhhMTQuMiAxNC4yIDAgMDEtMy41LTEuNTlsLTIgMmExLjgyIDEuODIgMCAwMS0yLjU5IDBMNTAgMjQuNTVBMS44NCAxLjg0IDAgMDE1MCAyMmwyLjE4LTIuMTdhMTQuNSAxNC41IDAgMDEtMS4zNS0zLjYxSDQ4YTEuODMgMS44MyAwIDAxLTEuODMtMS44M3YtMi43SDMuMDl2NTkuMTVhMyAzIDAgMDAzIDNoMTEwLjc2YTMgMyAwIDAwMy0zVjExLjY1em0tMTEuNDIgMEg1Ny42MmE3LjcxIDcuNzEgMCAwMC0uMTEgMS4yOCA3LjUyIDcuNTIgMCAwMDE1IDAgNy43MSA3LjcxIDAgMDAtLjEtMS4yOHptNDEuNzktNi43M2EyIDIgMCAxMS0yIDIgMiAyIDAgMDEyLTJ6bS0xMy40NCAwYTIgMiAwIDExLTIgMiAyIDIgMCAwMTItMnptNi43MiAwYTIgMiAwIDExLTIgMiAyIDIgMCAwMTItMnpNNDYuMjkgODguMjdoMzAuM2MuMDggNS4yNCAyLjI0IDkuOTQgOC4wOSAxMy42M0gzOC4yYzQuNzEtMy40MSA4LjExLTcuNTQgOC4wOS0xMy42M3oiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg=="},56748:(e,t,n)=>{e.exports=n.p+"imgs/default_wallpaper.fd2c7c2a.png"}}]);
//# sourceMappingURL=4719.js.map