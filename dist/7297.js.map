{"version":3,"file":"7297.js","mappings":"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","sources":["file:////home/j/code/web3os/@web3os-core/kernel/src/modules/files/index.js","file:////home/j/code/web3os/@web3os-core/kernel/src/modules/files/files.css","file:////home/j/code/web3os/@web3os-core/kernel/node_modules/.pnpm/ctxmenu@1.4.3/node_modules/ctxmenu/index.js","webpack://@web3os-core/kernel/./src/modules/files/files.css?9ef4"],"sourcesContent":["/* global FileReader */\r\n\r\nimport { ctxmenu } from 'ctxmenu'\r\nimport { lookup } from 'mime-types'\r\n\r\nimport './files.css'\r\n\r\nexport const name = 'files'\r\nexport const description = 'File Explorer'\r\nexport const help = `\r\n  Usage:\r\n    files <path>         Open a window at <url>\r\n`\r\n\r\nexport let appWindow\r\nlet kernel = globalThis.Kernel\r\nlet history = []\r\nlet historyPosition = 0\r\n\r\nasync function loadFolder (browser, url) {\r\n  browser.cloneNode(true) // Remove all event listeners\r\n\r\n  const explorer = browser.querySelector('.web3os-files-explorer')\r\n  const addressBar = browser.querySelector('.web3os-files-explorer-toolbar-addressbar-input')\r\n\r\n  const upIcon = browser.querySelector('mwc-icon[title=Up]')\r\n  const backIcon = browser.querySelector('mwc-icon[title=Back]')\r\n  const forwardIcon = browser.querySelector('mwc-icon[title=Forward]')\r\n\r\n  try {\r\n    const files = kernel.fs.readdirSync(url)\r\n    explorer.textContent = ''\r\n\r\n    files.sort().forEach(file => {\r\n      const fileData = { name: file }\r\n      const location = kernel.utils.path.resolve(url, file)\r\n      const stat = kernel.fs.statSync(location)\r\n\r\n      fileData.type = stat.isDirectory() ? 'dir' : 'file'\r\n      fileData.location = location\r\n\r\n      const entry = document.createElement('div')\r\n      entry.classList.add('web3os-files-explorer-entry')\r\n\r\n      const icon = document.createElement('mwc-icon')\r\n      const title = document.createElement('h1')\r\n\r\n      let fileIcon\r\n      switch (fileData.type) {\r\n        case 'dir':\r\n          fileIcon = 'folder'\r\n          break\r\n        default:\r\n          fileIcon = 'text_snippet'\r\n      }\r\n\r\n      const extension = kernel.utils.path.extname(file)\r\n      const mime = lookup(extension)\r\n      const isBin = !!(!mime && fileData.type === 'file' && /^\\/bin\\//.test(fileData.location))\r\n\r\n      switch (extension) {\r\n        case '.js':\r\n          fileIcon = 'javascript'\r\n          break\r\n        case '.sh':\r\n          fileIcon = 'code'\r\n          break\r\n        case '.md':\r\n          fileIcon = 'assignment'\r\n          break\r\n        case '.link':\r\n          fileIcon = 'link'\r\n          break\r\n        case '.jpg':\r\n        case '.png':\r\n        case '.webp':\r\n        case '.svg':\r\n        case '.gif':\r\n          fileIcon = 'image'\r\n          break\r\n      }\r\n\r\n      switch (location) {\r\n        case '/var':\r\n        case '/config':\r\n        case '/desktop':\r\n        case '/usr':\r\n        case '/var/packages':\r\n          fileIcon = 'source'\r\n          break\r\n        case '/bin':\r\n          fileIcon = 'folder_special'\r\n          break\r\n        case '/config/packages':\r\n          fileIcon = 'apps'\r\n          break\r\n        case '/docs':\r\n          fileIcon = 'snippet_folder'\r\n          break\r\n        case '/tmp':\r\n          fileIcon = 'folder_delete'\r\n          break\r\n      }\r\n\r\n      if (isBin) fileIcon = 'terminal'\r\n\r\n      icon.textContent = fileIcon\r\n      title.textContent = file\r\n      entry.dataset.file = file\r\n      icon.dataset.file = entry.dataset.file\r\n      title.dataset.file = entry.dataset.file\r\n\r\n      let divider = false\r\n      let entryContextMenu = []\r\n      const setAriaLabel = label => [icon, title].forEach(el => { el.setAttribute('aria-label', label) }) // .ariaLabel isn't yet supported in firefox\r\n\r\n      switch (extension) {\r\n        case '.js':\r\n          divider = true\r\n          setAriaLabel('Run script')\r\n          entryContextMenu.push({ text: 'Run', action: () => kernel.execute(`eval ${location}`) })\r\n          break\r\n        case '.sh':\r\n          divider = true\r\n          setAriaLabel('Run script')\r\n          entryContextMenu.push({ text: 'Run', action: () => kernel.execute(`sh ${location}`) })\r\n          break\r\n        case '.md':\r\n          divider = true\r\n          setAriaLabel('View Markdown')\r\n          entryContextMenu.push({ text: 'View', action: () => kernel.execute(`markdown ${location}`) })\r\n          break\r\n        case '.link':\r\n          divider = true\r\n          setAriaLabel('Open link in new tab')\r\n          entryContextMenu.push({\r\n            text: 'Open',\r\n            action: () => {\r\n              try {\r\n                const { url, useWeb3osBrowser } = JSON.parse(kernel.fs.readFileSync(location, 'utf8'))\r\n                if (!useWeb3osBrowser) globalThis.open(url, '_blank')\r\n                else kernel.execute(`www ${url}`)\r\n              } catch (err) {\r\n                console.error(err)\r\n                kernel.dialog({ title: 'Error', text: err.message, icon: 'error' })\r\n              }\r\n            }\r\n          })\r\n          break\r\n        case '.jpg':\r\n        case '.png':\r\n        case '.webp':\r\n        case '.svg':\r\n        case '.gif':\r\n          divider = true\r\n          setAriaLabel('View image')\r\n          entryContextMenu.push({ text: 'View', action: () => kernel.execute(`view ${location}`) })\r\n          break\r\n      }\r\n\r\n      if (icon.getAttribute('aria-label')) icon.classList.add('hint--right', 'hint--info')\r\n      if (title.getAttribute('aria-label')) title.classList.add('hint--right', 'hint--info')\r\n      if (divider) entryContextMenu.push({ isDivider: true })\r\n\r\n      if (fileData.type !== 'dir') {\r\n        entryContextMenu.push({\r\n          text: 'Edit',\r\n          action: () => kernel.execute(`edit ${location}`)\r\n        })\r\n      }\r\n\r\n      entryContextMenu.push(\r\n        {\r\n          text: 'Delete',\r\n          action: async () => {\r\n            const { isConfirmed } = await kernel.dialog({\r\n              title: `Delete ${location}?`,\r\n              text: 'Are you sure you want to delete this file? It cannot be undone.',\r\n              icon: 'error',\r\n              reverseButtons: true,\r\n              showDenyButton: true,\r\n              denyButtonText: 'Cancel',\r\n              confirmButtonText: 'Delete',\r\n              confirmButtonColor: 'red',\r\n              denyButtonColor: '#888'\r\n            })\r\n\r\n            if (isConfirmed) {\r\n              if (fileData.type !== 'dir') await kernel.execute(`rm ${location}`)\r\n              else await kernel.execute(`rmdir ${location}`)\r\n              loadFolder(browser, url)\r\n            }\r\n          }\r\n        }\r\n      )\r\n\r\n      if (isBin) {\r\n        entryContextMenu = [\r\n          {\r\n            text: 'Run',\r\n            action: () => kernel.execute(location)\r\n          },\r\n          {\r\n            text: 'Run in new terminal',\r\n            action: () => kernel.modules.desktop.launchTerminal({ startup: location })\r\n          }\r\n        ]\r\n      }\r\n\r\n      entry.addEventListener('contextmenu', e => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        ctxmenu.show(entryContextMenu, e.target.closest('.web3os-files-explorer-entry').querySelector('mwc-icon'))\r\n      })\r\n\r\n      entry.addEventListener('click', e => {\r\n        const { file } = e.target.dataset\r\n\r\n        const location = kernel.utils.path.resolve(addressBar.value, file)\r\n        const stat = kernel.fs.statSync(location)\r\n        const fileParts = kernel.utils.path.parse(file)\r\n        const extension = fileParts.ext\r\n\r\n        if (stat.isDirectory()) {\r\n          history.push(location)\r\n          historyPosition = history.length - 1\r\n          addressBar.value = location\r\n          return loadFolder(browser, location)\r\n        }\r\n\r\n        if (isBin) return kernel.execute(location) // && appWindow.window.minimize()\r\n\r\n        const promptExecute = async allow => {\r\n          const { isConfirmed } = await kernel.dialog({\r\n            title: `Execute Script: ${location}`,\r\n            text: 'Executing scripts can be dangerous. Are you sure?',\r\n            icon: 'warning',\r\n            showDenyButton: true,\r\n            denyButtonColor: 'green',\r\n            denyButtonText: 'Cancel',\r\n            confirmButtonColor: 'red',\r\n            confirmButtonText: 'Run'\r\n          })\r\n\r\n          if (isConfirmed) allow()\r\n        }\r\n\r\n        switch (extension) {\r\n          case '.sh':\r\n            return promptExecute(() => kernel.executeScript(location) && appWindow.window.minimize())\r\n          case '.js':\r\n            return promptExecute(() => kernel.execute(`eval ${location}`) && appWindow.window.minimize())\r\n          case '.json':\r\n          case '.txt':\r\n            return kernel.execute(`edit ${location}`) && appWindow.window.minimize()\r\n          case '.md':\r\n            return kernel.execute(`markdown ${location}`) && appWindow.window.minimize()\r\n          case '.link':\r\n            try {\r\n              const { url, useWeb3osBrowser } = JSON.parse(kernel.fs.readFileSync(location, 'utf8'))\r\n              if (!useWeb3osBrowser) globalThis.open(url, '_blank')\r\n              else { kernel.execute(`www ${url}`) && appWindow.window.minimize() }\r\n            } catch (err) {\r\n              console.error(err)\r\n              kernel.dialog({ title: 'Error', text: err.message, icon: 'error' })\r\n            }\r\n            break\r\n          default:\r\n            if (mime && /^(image|video|audio|application\\/pdf)/.test(mime)) return kernel.execute(`view ${location}`) && appWindow.window.minimize()\r\n            kernel.execute(\"alert I'm not sure how to handle this file!\")\r\n        }\r\n      })\r\n\r\n      entry.appendChild(icon)\r\n      entry.appendChild(title)\r\n\r\n      explorer.appendChild(entry)\r\n    })\r\n\r\n    addressBar.value = url\r\n    browser.appWindow.window.setTitle(`${url}`)\r\n\r\n    upIcon.style.color = addressBar.value === '/' ? 'darkslateblue' : 'white'\r\n    backIcon.style.color = historyPosition === 0 ? 'darkslateblue' : 'white'\r\n    forwardIcon.style.color = historyPosition === history.length - 1 ? 'darkslateblue' : 'white'\r\n\r\n    upIcon.style.cursor = addressBar.value === '/' ? 'initial' : 'pointer'\r\n    backIcon.style.cursor = historyPosition === 0 ? 'initial' : 'pointer'\r\n    forwardIcon.style.cursor = historyPosition === history.length - 1 ? 'initial' : 'pointer'\r\n  } catch (err) {\r\n    console.error(err)\r\n    addressBar.style.color = 'red'\r\n    kernel.execute('snackbar Invalid path')\r\n  }\r\n}\r\n\r\nexport async function run (terminal = globalThis.Terminal, url) {\r\n  kernel = terminal.kernel || globalThis.Kernel\r\n  url = (!url || url === '') ? '/' : url\r\n  history = [url]\r\n  historyPosition = 0\r\n\r\n  const browser = document.createElement('div')\r\n  const toolbar = document.createElement('div')\r\n  const addressBar = document.createElement('input')\r\n  const buttonWrapper = document.createElement('div')\r\n  const backIcon = document.createElement('mwc-icon')\r\n  const forwardIcon = document.createElement('mwc-icon')\r\n  const upIcon = document.createElement('mwc-icon')\r\n  const terminalIcon = document.createElement('mwc-icon')\r\n  const explorer = document.createElement('div')\r\n\r\n  backIcon.style.color = 'darkslateblue'\r\n  backIcon.textContent = 'arrow_back_ios'\r\n  backIcon.title = 'Back'\r\n\r\n  forwardIcon.style.color = 'darkslateblue'\r\n  forwardIcon.textContent = 'arrow_forward_ios'\r\n  forwardIcon.title = 'Forward'\r\n\r\n  upIcon.style.color = 'darkslateblue'\r\n  upIcon.textContent = 'arrow_upward'\r\n  upIcon.title = 'Up'\r\n\r\n  terminalIcon.style.color = 'white'\r\n  terminalIcon.style.cursor = 'pointer'\r\n  terminalIcon.textContent = 'terminal'\r\n  terminalIcon.title = 'Open Terminal Here'\r\n\r\n  addressBar.value = url\r\n  explorer.dataset.url = url\r\n\r\n  browser.classList.add('web3os-files-browser')\r\n  toolbar.classList.add('web3os-files-explorer-toolbar')\r\n  addressBar.classList.add('web3os-files-explorer-toolbar-addressbar-input')\r\n  buttonWrapper.classList.add('web3os-files-explorer-toolbar-button-wrapper')\r\n  explorer.classList.add('web3os-files-explorer')\r\n\r\n  addressBar.spellcheck = false\r\n  addressBar.addEventListener('focus', () => addressBar.select())\r\n  addressBar.addEventListener('keydown', e => {\r\n    if (e.key === 'Enter') {\r\n      addressBar.style.color = 'white'\r\n      const newUrl = addressBar.value\r\n      history.push(newUrl)\r\n      historyPosition = history.length - 1\r\n      gotoHistory()\r\n    }\r\n  })\r\n\r\n  const gotoHistory = () => {\r\n    url = history[historyPosition]\r\n    loadFolder(browser, url)\r\n  }\r\n\r\n  backIcon.addEventListener('click', () => {\r\n    if (historyPosition === 0) return\r\n    historyPosition--\r\n    gotoHistory()\r\n  })\r\n\r\n  forwardIcon.addEventListener('click', () => {\r\n    if (historyPosition === history.length - 1) return\r\n    historyPosition++\r\n    gotoHistory()\r\n  })\r\n\r\n  upIcon.addEventListener('click', () => {\r\n    if (addressBar.value === '/') return\r\n    const newUrl = kernel.utils.path.resolve(addressBar.value, '..')\r\n    history.push(newUrl)\r\n    historyPosition = history.length - 1\r\n    gotoHistory()\r\n  })\r\n\r\n  terminalIcon.addEventListener('click', async () => {\r\n    await kernel.modules.desktop.launchTerminal({ path: addressBar.value })\r\n  })\r\n\r\n  buttonWrapper.appendChild(backIcon)\r\n  buttonWrapper.appendChild(forwardIcon)\r\n  buttonWrapper.appendChild(upIcon)\r\n  buttonWrapper.appendChild(terminalIcon)\r\n\r\n  toolbar.appendChild(buttonWrapper)\r\n  toolbar.appendChild(addressBar)\r\n\r\n  browser.appendChild(toolbar)\r\n  browser.appendChild(explorer)\r\n\r\n  const dragstart = e => { e.dataTransfer.effectAllowed = 'copy' }\r\n  const dragover = e => { e.preventDefault(); e.dataTransfer.dropEffect = 'copy' }\r\n  const drop = e => {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    const dt = e.dataTransfer\r\n    const files = dt.files\r\n\r\n    for (const file of files) {\r\n      const reader = new FileReader()\r\n\r\n      reader.readAsArrayBuffer(file)\r\n      reader.onload = () => {\r\n        const buffer = kernel.BrowserFS.Buffer.from(reader.result)\r\n        const filepath = kernel.utils.path.resolve(addressBar.value, file.name)\r\n        kernel.fs.writeFileSync(filepath, buffer)\r\n        kernel.snackbar({ labelText: `Uploaded ${filepath}` })\r\n\r\n        loadFolder(browser, url)\r\n      }\r\n    }\r\n  }\r\n\r\n  browser.addEventListener('dragstart', dragstart)\r\n  browser.addEventListener('dragover', dragover)\r\n  browser.addEventListener('drop', drop)\r\n\r\n  appWindow = kernel.windows.create({\r\n    mount: browser,\r\n    title: url,\r\n    class: ['web3os-window', 'web3os-files-explorer-window'],\r\n    height: '60%',\r\n    width: '60%',\r\n    x: 'center',\r\n    y: 'center'\r\n  })\r\n\r\n  appWindow.window.body.style.margin = '0'\r\n  appWindow.window.body.style.overflow = 'hidden'\r\n  appWindow.window.body.style.color = '#121212'\r\n\r\n  browser.appWindow = appWindow\r\n\r\n  gotoHistory()\r\n}\r\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".web3os-files-explorer {\\r\\n  height: 100%;\\r\\n  padding: 1rem;\\r\\n  color: white;\\r\\n  overflow-y: auto;\\r\\n\\r\\n  margin-top: -1em;\\r\\n  display: flex;\\r\\n  gap: 0.5rem;\\r\\n  justify-content: flex-start;\\r\\n  align-items: flex-start;\\r\\n  flex-wrap: wrap;\\r\\n  align-content: flex-start;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry {\\r\\n  margin-bottom: 1em;\\r\\n  display: flex;\\r\\n  flex: 0 1 calc(20% - 0.5em);\\r\\n}\\r\\n\\r\\n.web3os-files-browser {\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer::-webkit-scrollbar-track\\r\\n{\\r\\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  border-radius: 10px;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer::-webkit-scrollbar\\r\\n{\\r\\n  width: 12px;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer::-webkit-scrollbar-thumb\\r\\n{\\r\\n  border-radius: 10px;\\r\\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  background-color: #302f2f;\\r\\n}\\r\\n\\r\\n/* @media screen and (min-width: 40em) {\\r\\n  .web3os-files-explorer {\\r\\n    margin-top: -1em;\\r\\n    display: flex;\\r\\n    justify-content: flex-start;\\r\\n    align-items: flex-start;\\r\\n    flex-wrap: wrap;\\r\\n  }\\r\\n\\r\\n  .web3os-files-explorer-entry {\\r\\n    margin-bottom: 1em;\\r\\n    display: flex;\\r\\n    flex: 0 1 calc(20% - 0.5em);\\r\\n  }\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 60em) {\\r\\n  .web3os-files-explorer {\\r\\n    margin-top: inherit;\\r\\n  }\\r\\n  \\r\\n  .web3os-files-explorer-entry {\\r\\n    margin-bottom: 2em;\\r\\n    display: flex;\\r\\n    flex: 0 1 calc(3% - 0.5em);\\r\\n  }\\r\\n} */\\r\\n\\r\\n.web3os-files-explorer * {\\r\\n  -ms-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  padding-left: 1rem;\\r\\n  background-color: #240858;\\r\\n  min-height: 2.5rem;\\r\\n  position: relative;\\r\\n  z-index: 10;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar-button-wrapper {\\r\\n  display: flex;\\r\\n  gap: 1rem;\\r\\n  align-self: center;\\r\\n  min-width: 64px;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar-button-wrapper mwc-icon {\\r\\n  -ms-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar-addressbar-input {\\r\\n  border-top-left-radius: 20px;\\r\\n  border-bottom-left-radius: 20px;\\r\\n  padding-left: 1rem;\\r\\n  width: 65%;\\r\\n  font-weight: bolder;\\r\\n  font-size: 1rem;\\r\\n  color: black;\\r\\n  background-color: #ddd;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  text-align: center;\\r\\n  cursor: pointer;\\r\\n  min-width: 150px;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry mwc-icon {\\r\\n  font-size: 4rem;\\r\\n  margin: auto;\\r\\n  max-width: 64px;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry h1 {\\r\\n  font-size: 1.25rem;\\r\\n  margin: auto;\\r\\n  word-break: break-all;\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 460px) {\\r\\n  .web3os-files-explorer-toolbar-addressbar-input {\\r\\n    width: 55%;\\r\\n  }\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/modules/files/files.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,YAAY;EACZ,aAAa;EACb,YAAY;EACZ,gBAAgB;;EAEhB,gBAAgB;EAChB,aAAa;EACb,WAAW;EACX,2BAA2B;EAC3B,uBAAuB;EACvB,eAAe;EACf,yBAAyB;AAC3B;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,2BAA2B;AAC7B;;AAEA;EACE,YAAY;AACd;;AAEA;;EAEE,oDAAoD;EACpD,4CAA4C;EAC5C,mBAAmB;EACnB,6BAA6B;AAC/B;;AAEA;;EAEE,WAAW;EACX,6BAA6B;AAC/B;;AAEA;;EAEE,mBAAmB;EACnB,oDAAoD;EACpD,4CAA4C;EAC5C,yBAAyB;AAC3B;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;GA0BG;;AAEH;EACE,qBAAqB;EACrB,yBAAyB;EACzB,iBAAiB;AACnB;;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,kBAAkB;EAClB,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,SAAS;EACT,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,qBAAqB;EACrB,yBAAyB;EACzB,iBAAiB;AACnB;;AAEA;EACE,4BAA4B;EAC5B,+BAA+B;EAC/B,kBAAkB;EAClB,UAAU;EACV,mBAAmB;EACnB,eAAe;EACf,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,kBAAkB;EAClB,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,qBAAqB;AACvB;;AAEA;EACE;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\".web3os-files-explorer {\\r\\n  height: 100%;\\r\\n  padding: 1rem;\\r\\n  color: white;\\r\\n  overflow-y: auto;\\r\\n\\r\\n  margin-top: -1em;\\r\\n  display: flex;\\r\\n  gap: 0.5rem;\\r\\n  justify-content: flex-start;\\r\\n  align-items: flex-start;\\r\\n  flex-wrap: wrap;\\r\\n  align-content: flex-start;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry {\\r\\n  margin-bottom: 1em;\\r\\n  display: flex;\\r\\n  flex: 0 1 calc(20% - 0.5em);\\r\\n}\\r\\n\\r\\n.web3os-files-browser {\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer::-webkit-scrollbar-track\\r\\n{\\r\\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  border-radius: 10px;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer::-webkit-scrollbar\\r\\n{\\r\\n  width: 12px;\\r\\n  background-color: transparent;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer::-webkit-scrollbar-thumb\\r\\n{\\r\\n  border-radius: 10px;\\r\\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\\r\\n  background-color: #302f2f;\\r\\n}\\r\\n\\r\\n/* @media screen and (min-width: 40em) {\\r\\n  .web3os-files-explorer {\\r\\n    margin-top: -1em;\\r\\n    display: flex;\\r\\n    justify-content: flex-start;\\r\\n    align-items: flex-start;\\r\\n    flex-wrap: wrap;\\r\\n  }\\r\\n\\r\\n  .web3os-files-explorer-entry {\\r\\n    margin-bottom: 1em;\\r\\n    display: flex;\\r\\n    flex: 0 1 calc(20% - 0.5em);\\r\\n  }\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 60em) {\\r\\n  .web3os-files-explorer {\\r\\n    margin-top: inherit;\\r\\n  }\\r\\n  \\r\\n  .web3os-files-explorer-entry {\\r\\n    margin-bottom: 2em;\\r\\n    display: flex;\\r\\n    flex: 0 1 calc(3% - 0.5em);\\r\\n  }\\r\\n} */\\r\\n\\r\\n.web3os-files-explorer * {\\r\\n  -ms-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar {\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n  padding-left: 1rem;\\r\\n  background-color: #240858;\\r\\n  min-height: 2.5rem;\\r\\n  position: relative;\\r\\n  z-index: 10;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar-button-wrapper {\\r\\n  display: flex;\\r\\n  gap: 1rem;\\r\\n  align-self: center;\\r\\n  min-width: 64px;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar-button-wrapper mwc-icon {\\r\\n  -ms-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-toolbar-addressbar-input {\\r\\n  border-top-left-radius: 20px;\\r\\n  border-bottom-left-radius: 20px;\\r\\n  padding-left: 1rem;\\r\\n  width: 65%;\\r\\n  font-weight: bolder;\\r\\n  font-size: 1rem;\\r\\n  color: black;\\r\\n  background-color: #ddd;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  text-align: center;\\r\\n  cursor: pointer;\\r\\n  min-width: 150px;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry mwc-icon {\\r\\n  font-size: 4rem;\\r\\n  margin: auto;\\r\\n  max-width: 64px;\\r\\n}\\r\\n\\r\\n.web3os-files-explorer-entry h1 {\\r\\n  font-size: 1.25rem;\\r\\n  margin: auto;\\r\\n  word-break: break-all;\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 460px) {\\r\\n  .web3os-files-explorer-toolbar-addressbar-input {\\r\\n    width: 55%;\\r\\n  }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction __spreadArrays() {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, \n    k++) r[k] = a[j];\n    return r;\n}\n\nfunction getProp(prop) {\n    return \"function\" === typeof prop ? prop() : prop;\n}\n\nfunction itemIsInteractive(item) {\n    return itemIsAction(item) || itemIsAnchor(item) || itemIsSubMenu(item) || itemIsCustom(item);\n}\n\nfunction itemIsAction(item) {\n    return item.hasOwnProperty(\"action\");\n}\n\nfunction itemIsAnchor(item) {\n    return item.hasOwnProperty(\"href\");\n}\n\nfunction itemIsDivider(item) {\n    return item.hasOwnProperty(\"isDivider\");\n}\n\nfunction itemIsSubMenu(item) {\n    return item.hasOwnProperty(\"subMenu\");\n}\n\nfunction itemIsCustom(item) {\n    return item.hasOwnProperty(\"html\") || item.hasOwnProperty(\"element\");\n}\n\nfunction onHoverDebounced(target, action) {\n    var timeout;\n    target.addEventListener(\"mouseenter\", (function(e) {\n        timeout = setTimeout((function() {\n            return action(e);\n        }), 150);\n    }));\n    target.addEventListener(\"mouseleave\", (function() {\n        return clearTimeout(timeout);\n    }));\n}\n\nfunction getBounding(elem) {\n    var container = elem.cloneNode(true);\n    container.style.visibility = \"hidden\";\n    document.body.appendChild(container);\n    var result = container.getBoundingClientRect();\n    document.body.removeChild(container);\n    return result;\n}\n\nfunction isDisabled(item) {\n    return getProp(item.disabled) || itemIsSubMenu(item) && 0 === item.subMenu.length;\n}\n\nfunction generateMenuItem(item) {\n    var li = document.createElement(\"li\");\n    if (itemIsDivider(item)) {\n        li.className = \"divider\";\n        return li;\n    }\n    generateBaseItemContent(item, li);\n    if (!itemIsInteractive(item)) {\n        li.classList.add(\"heading\");\n        return li;\n    }\n    if (isDisabled(item)) {\n        li.classList.add(\"disabled\");\n        if (itemIsSubMenu(item)) li.classList.add(\"submenu\");\n        return li;\n    }\n    li.classList.add(\"interactive\");\n    if (itemIsAnchor(item)) {\n        var a = document.createElement(\"a\");\n        a.append.apply(a, Array.from(li.childNodes));\n        a.href = getProp(item.href);\n        if (item.hasOwnProperty(\"download\")) a.download = getProp(item.download);\n        if (item.hasOwnProperty(\"target\")) a.target = getProp(item.target);\n        li.append(a);\n        return li;\n    }\n    if (itemIsAction(item)) {\n        li.addEventListener(\"click\", item.action);\n        return li;\n    }\n    li.classList.add(\"submenu\");\n    return li;\n}\n\nfunction generateBaseItemContent(item, li) {\n    var html = getProp(item.html);\n    var text = \"<span>\" + getProp(item.text) + \"</span>\";\n    var elem = getProp(item.element);\n    elem ? li.append(elem) : li.innerHTML = html ? html : text;\n    li.title = getProp(item.tooltip) || \"\";\n    if (item.style) li.setAttribute(\"style\", getProp(item.style));\n    if (item.icon) {\n        li.classList.add(\"icon\");\n        li.innerHTML += '<img class=\"icon\" src=\"' + getProp(item.icon) + '\" />';\n    }\n}\n\nvar styles = 'html{min-height:100%}.ctxmenu{position:fixed;max-height:100vh;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana, sans-serif}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0, 0, 0, .1)}.ctxmenu li.submenu::after{content:\"\";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border-right:1px solid #000;border-top:1px solid #000;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}';\n\n/*! ctxMenu v1.4.3 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/ var ContextMenu = function() {\n    function ContextMenu() {\n        var _this = this;\n        this.cache = {};\n        this.hdir = \"r\";\n        this.vdir = \"d\";\n        this.preventCloseOnScroll = false;\n        window.addEventListener(\"click\", (function(ev) {\n            var item = ev.target instanceof Element && ev.target.parentElement;\n            if (item && \"interactive\" === item.className) return;\n            _this.hide();\n        }));\n        window.addEventListener(\"resize\", (function() {\n            return _this.hide();\n        }));\n        var timeout = 0;\n        window.addEventListener(\"wheel\", (function() {\n            clearTimeout(timeout);\n            timeout = setTimeout((function() {\n                if (_this.preventCloseOnScroll) {\n                    _this.preventCloseOnScroll = false;\n                    return;\n                }\n                _this.hide();\n            }));\n        }), {\n            passive: true\n        });\n        ContextMenu.addStylesToDom();\n    }\n    ContextMenu.getInstance = function() {\n        if (!ContextMenu.instance) ContextMenu.instance = new ContextMenu;\n        var instance = ContextMenu.instance;\n        return {\n            attach: instance.attach.bind(instance),\n            delete: instance.delete.bind(instance),\n            hide: instance.hide.bind(instance),\n            show: instance.show.bind(instance),\n            update: instance.update.bind(instance)\n        };\n    };\n    ContextMenu.prototype.attach = function(target, ctxMenu, beforeRender) {\n        var _this = this;\n        if (void 0 === beforeRender) beforeRender = function(m) {\n            return m;\n        };\n        var t = document.querySelector(target);\n        if (void 0 !== this.cache[target]) {\n            console.error(\"target element \" + target + \" already has a context menu assigned. Use ContextMenu.update() intstead.\");\n            return;\n        }\n        if (!t) {\n            console.error(\"target element \" + target + \" not found\");\n            return;\n        }\n        var handler = function(e) {\n            var newMenu = beforeRender(__spreadArrays(ctxMenu), e);\n            _this.show(newMenu, e);\n        };\n        this.cache[target] = {\n            ctxMenu: ctxMenu,\n            handler: handler,\n            beforeRender: beforeRender\n        };\n        t.addEventListener(\"contextmenu\", handler);\n    };\n    ContextMenu.prototype.update = function(target, ctxMenu, beforeRender) {\n        var o = this.cache[target];\n        var t = document.querySelector(target);\n        o && (null === t || void 0 === t ? void 0 : t.removeEventListener(\"contextmenu\", o.handler));\n        delete this.cache[target];\n        this.attach(target, ctxMenu || (null === o || void 0 === o ? void 0 : o.ctxMenu) || [], beforeRender || (null === o || void 0 === o ? void 0 : o.beforeRender));\n    };\n    ContextMenu.prototype.delete = function(target) {\n        var o = this.cache[target];\n        if (!o) {\n            console.error(\"no context menu for target element \" + target + \" found\");\n            return;\n        }\n        var t = document.querySelector(target);\n        if (!t) {\n            console.error(\"target element \" + target + \" does not exist (anymore)\");\n            return;\n        }\n        t.removeEventListener(\"contextmenu\", o.handler);\n        delete this.cache[target];\n    };\n    ContextMenu.prototype.show = function(ctxMenu, eventOrElement) {\n        var _this = this;\n        if (eventOrElement instanceof MouseEvent) eventOrElement.stopImmediatePropagation();\n        this.hide();\n        this.menu = this.generateDOM(__spreadArrays(ctxMenu), eventOrElement);\n        document.body.appendChild(this.menu);\n        this.menu.addEventListener(\"wheel\", (function() {\n            return _this.preventCloseOnScroll = true;\n        }), {\n            passive: true\n        });\n        if (eventOrElement instanceof MouseEvent) eventOrElement.preventDefault();\n    };\n    ContextMenu.prototype.hide = function(menu) {\n        var _a;\n        if (void 0 === menu) menu = this.menu;\n        this.hdir = \"r\";\n        this.vdir = \"d\";\n        if (menu) {\n            if (menu === this.menu) delete this.menu;\n            null === (_a = menu.parentElement) || void 0 === _a ? void 0 : _a.removeChild(menu);\n        }\n    };\n    ContextMenu.prototype.generateDOM = function(ctxMenu, parentOrEvent) {\n        var _this = this;\n        var container = document.createElement(\"ul\");\n        if (0 === ctxMenu.length) container.style.display = \"none\";\n        ctxMenu.forEach((function(item) {\n            var li = generateMenuItem(item);\n            onHoverDebounced(li, (function() {\n                var _a;\n                var subMenu = null === (_a = li.parentElement) || void 0 === _a ? void 0 : _a.querySelector(\"ul\");\n                if (subMenu && subMenu.parentElement !== li) _this.hide(subMenu);\n            }));\n            if (itemIsInteractive(item) && !isDisabled(item)) if (itemIsSubMenu(item)) onHoverDebounced(li, (function(ev) {\n                var subMenu = li.querySelector(\"ul\");\n                if (!subMenu) _this.openSubMenu(ev, getProp(item.subMenu), li);\n            })); else li.addEventListener(\"click\", (function() {\n                return _this.hide();\n            }));\n            container.appendChild(li);\n        }));\n        container.className = \"ctxmenu\";\n        var rect = getBounding(container);\n        var pos = {\n            x: 0,\n            y: 0\n        };\n        if (parentOrEvent instanceof Element) {\n            var _a = parentOrEvent.getBoundingClientRect(), left = _a.left, width = _a.width, top_1 = _a.top;\n            pos = {\n                x: \"r\" === this.hdir ? left + width : left - rect.width,\n                y: top_1\n            };\n            if (parentOrEvent.className.includes(\"submenu\")) pos.y += \"d\" === this.vdir ? 4 : -12;\n            var savePos = this.getPosition(rect, pos);\n            if (pos.x !== savePos.x) {\n                this.hdir = \"r\" === this.hdir ? \"l\" : \"r\";\n                pos.x = \"r\" === this.hdir ? left + width : left - rect.width;\n            }\n            if (pos.y !== savePos.y) {\n                this.vdir = \"u\" === this.vdir ? \"d\" : \"u\";\n                pos.y = savePos.y;\n            }\n            pos = this.getPosition(rect, pos, false);\n        } else pos = this.getPosition(rect, {\n            x: parentOrEvent.clientX,\n            y: parentOrEvent.clientY\n        });\n        container.style.left = pos.x + \"px\";\n        container.style.top = pos.y + \"px\";\n        container.addEventListener(\"contextmenu\", (function(ev) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        }));\n        container.addEventListener(\"click\", (function(ev) {\n            var item = ev.target instanceof Element && ev.target.parentElement;\n            if (item && \"interactive\" !== item.className) ev.stopPropagation();\n        }));\n        return container;\n    };\n    ContextMenu.prototype.openSubMenu = function(e, ctxMenu, listElement) {\n        var _a;\n        var subMenu = null === (_a = listElement.parentElement) || void 0 === _a ? void 0 : _a.querySelector(\"li > ul\");\n        if (subMenu && subMenu.parentElement !== listElement) this.hide(subMenu);\n        listElement.appendChild(this.generateDOM(ctxMenu, listElement));\n    };\n    ContextMenu.prototype.getPosition = function(rect, pos, addScrollOffset) {\n        if (void 0 === addScrollOffset) addScrollOffset = true;\n        var html = document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        var hasTransform = \"\" !== document.body.style.transform;\n        var minX = hasTransform ? window.scrollX : 0;\n        var minY = hasTransform ? window.scrollY : 0;\n        var maxX = hasTransform ? width + window.scrollX : width;\n        var maxY = hasTransform ? height + window.scrollY : height;\n        if (hasTransform && addScrollOffset) {\n            pos.x += window.scrollX;\n            pos.y += window.scrollY;\n        }\n        return {\n            x: \"r\" === this.hdir ? pos.x + rect.width > maxX ? maxX - rect.width : pos.x : pos.x < minX ? minX : pos.x,\n            y: \"d\" === this.vdir ? pos.y + rect.height > maxY ? maxY - rect.height : pos.y : pos.y < minY ? minY : pos.y\n        };\n    };\n    ContextMenu.addStylesToDom = function() {\n        var append = function() {\n            if (\"loading\" === document.readyState) return document.addEventListener(\"readystatechange\", append);\n            var style = document.createElement(\"style\");\n            style.innerHTML = styles;\n            document.head.insertBefore(style, document.head.childNodes[0]);\n            append = function() {};\n        };\n        append();\n    };\n    return ContextMenu;\n}();\n\nvar ctxmenu = ContextMenu.getInstance();\n\nexports.ctxmenu = ctxmenu;\n","\n      import API from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/.pnpm/style-loader@3.3.1_webpack@5.73.0/node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/cjs.js!./files.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/.pnpm/css-loader@6.7.1_webpack@5.73.0/node_modules/css-loader/dist/cjs.js!./files.css\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["appWindow","name","description","help","kernel","globalThis","Kernel","history","historyPosition","loadFolder","browser","url","cloneNode","explorer","querySelector","addressBar","upIcon","backIcon","forwardIcon","files","fs","readdirSync","textContent","sort","forEach","file","fileData","location","utils","path","resolve","stat","statSync","type","isDirectory","entry","document","createElement","classList","add","fileIcon","icon","title","extension","extname","mime","lookup","isBin","test","dataset","divider","entryContextMenu","setAriaLabel","label","el","setAttribute","push","text","action","execute","JSON","parse","readFileSync","useWeb3osBrowser","open","err","console","error","dialog","message","getAttribute","isDivider","reverseButtons","showDenyButton","denyButtonText","confirmButtonText","confirmButtonColor","denyButtonColor","isConfirmed","modules","desktop","launchTerminal","startup","addEventListener","e","preventDefault","stopPropagation","ctxmenu","target","closest","value","ext","length","promptExecute","allow","executeScript","window","minimize","appendChild","setTitle","style","color","cursor","run","terminal","Terminal","toolbar","buttonWrapper","terminalIcon","spellcheck","select","key","newUrl","gotoHistory","dragstart","dataTransfer","effectAllowed","dragover","dropEffect","drop","reader","FileReader","readAsArrayBuffer","onload","buffer","BrowserFS","Buffer","from","result","filepath","writeFileSync","snackbar","labelText","windows","create","mount","class","height","width","x","y","body","margin","overflow","___CSS_LOADER_EXPORT___","module","id","__spreadArrays","s","i","il","arguments","r","Array","k","a","j","jl","getProp","prop","itemIsInteractive","item","itemIsAction","itemIsAnchor","itemIsSubMenu","hasOwnProperty","itemIsCustom","onHoverDebounced","timeout","setTimeout","clearTimeout","isDisabled","disabled","subMenu","ContextMenu","_this","this","cache","hdir","vdir","preventCloseOnScroll","ev","Element","parentElement","className","hide","passive","addStylesToDom","getInstance","instance","attach","bind","delete","show","update","prototype","ctxMenu","beforeRender","m","t","handler","newMenu","o","removeEventListener","eventOrElement","MouseEvent","stopImmediatePropagation","menu","generateDOM","_a","removeChild","parentOrEvent","container","display","li","itemIsDivider","html","elem","element","append","innerHTML","tooltip","generateBaseItemContent","apply","childNodes","href","download","generateMenuItem","openSubMenu","rect","visibility","getBoundingClientRect","getBounding","pos","left","top_1","top","includes","savePos","getPosition","clientX","clientY","listElement","addScrollOffset","documentElement","clientWidth","clientHeight","hasTransform","transform","minX","scrollX","minY","scrollY","maxX","maxY","readyState","head","insertBefore","exports","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","undefined"],"sourceRoot":""}